"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@aptos-labs+wallet-adapter-core@4.20.0_@aptos-labs+ts-sdk@1.30.0_@mizuwallet-sdk+core@1.4.0_@_cgmcuphqum2bcnvteqmmfjs2ba";
exports.ids = ["vendor-chunks/@aptos-labs+wallet-adapter-core@4.20.0_@aptos-labs+ts-sdk@1.30.0_@mizuwallet-sdk+core@1.4.0_@_cgmcuphqum2bcnvteqmmfjs2ba"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@aptos-labs+wallet-adapter-core@4.20.0_@aptos-labs+ts-sdk@1.30.0_@mizuwallet-sdk+core@1.4.0_@_cgmcuphqum2bcnvteqmmfjs2ba/node_modules/@aptos-labs/wallet-adapter-core/dist/index.mjs":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@aptos-labs+wallet-adapter-core@4.20.0_@aptos-labs+ts-sdk@1.30.0_@mizuwallet-sdk+core@1.4.0_@_cgmcuphqum2bcnvteqmmfjs2ba/node_modules/@aptos-labs/wallet-adapter-core/dist/index.mjs ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APTOS_CONNECT_ACCOUNT_URL: () => (/* binding */ APTOS_CONNECT_ACCOUNT_URL),\n/* harmony export */   APTOS_CONNECT_BASE_URL: () => (/* binding */ APTOS_CONNECT_BASE_URL),\n/* harmony export */   ChainIdToAnsSupportedNetworkMap: () => (/* binding */ ChainIdToAnsSupportedNetworkMap),\n/* harmony export */   NetworkName: () => (/* binding */ NetworkName),\n/* harmony export */   TxnBuilderTypes: () => (/* reexport safe */ aptos__WEBPACK_IMPORTED_MODULE_0__.TxnBuilderTypes),\n/* harmony export */   Types: () => (/* reexport safe */ aptos__WEBPACK_IMPORTED_MODULE_0__.Types),\n/* harmony export */   WalletCore: () => (/* binding */ WalletCore),\n/* harmony export */   WalletCoreV1: () => (/* binding */ WalletCoreV1),\n/* harmony export */   WalletReadyState: () => (/* binding */ WalletReadyState),\n/* harmony export */   WalletStandardCore: () => (/* binding */ WalletStandardCore),\n/* harmony export */   areBCSArguments: () => (/* binding */ areBCSArguments),\n/* harmony export */   convertNetwork: () => (/* binding */ convertNetwork),\n/* harmony export */   convertPayloadInputV1ToV2: () => (/* binding */ convertPayloadInputV1ToV2),\n/* harmony export */   convertV2PayloadToV1JSONPayload: () => (/* binding */ convertV2PayloadToV1JSONPayload),\n/* harmony export */   convertV2TransactionPayloadToV1BCSPayload: () => (/* binding */ convertV2TransactionPayloadToV1BCSPayload),\n/* harmony export */   fetchDevnetChainId: () => (/* binding */ fetchDevnetChainId),\n/* harmony export */   generalizedErrorMessage: () => (/* binding */ generalizedErrorMessage),\n/* harmony export */   generateTransactionPayloadFromV1Input: () => (/* binding */ generateTransactionPayloadFromV1Input),\n/* harmony export */   getAptosConfig: () => (/* binding */ getAptosConfig),\n/* harmony export */   getAptosConnectWallets: () => (/* binding */ getAptosConnectWallets),\n/* harmony export */   getLocalStorage: () => (/* binding */ getLocalStorage),\n/* harmony export */   groupAndSortWallets: () => (/* binding */ groupAndSortWallets),\n/* harmony export */   handlePublishPackageTransaction: () => (/* binding */ handlePublishPackageTransaction),\n/* harmony export */   isAptosConnectWallet: () => (/* binding */ isAptosConnectWallet),\n/* harmony export */   isAptosNetwork: () => (/* binding */ isAptosNetwork),\n/* harmony export */   isInAppBrowser: () => (/* binding */ isInAppBrowser),\n/* harmony export */   isInstallRequired: () => (/* binding */ isInstallRequired),\n/* harmony export */   isInstalledOrLoadable: () => (/* binding */ isInstalledOrLoadable),\n/* harmony export */   isMobile: () => (/* binding */ isMobile),\n/* harmony export */   isRedirectable: () => (/* binding */ isRedirectable),\n/* harmony export */   partitionWallets: () => (/* binding */ partitionWallets),\n/* harmony export */   removeLocalStorage: () => (/* binding */ removeLocalStorage),\n/* harmony export */   scopePollingDetectionStrategy: () => (/* binding */ scopePollingDetectionStrategy),\n/* harmony export */   setLocalStorage: () => (/* binding */ setLocalStorage),\n/* harmony export */   truncateAddress: () => (/* binding */ truncateAddress)\n/* harmony export */ });\n/* harmony import */ var aptos__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aptos */ \"(ssr)/./node_modules/.pnpm/aptos@1.21.0/node_modules/aptos/dist/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/.pnpm/@aptos-labs+ts-sdk@1.30.0/node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var eventemitter3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! eventemitter3 */ \"(ssr)/./node_modules/.pnpm/eventemitter3@4.0.7/node_modules/eventemitter3/index.js\");\n/* harmony import */ var _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aptos-labs/wallet-standard */ \"(ssr)/./node_modules/.pnpm/@aptos-labs+wallet-standard@0.2.0_@aptos-labs+ts-sdk@1.30.0_@wallet-standard+core@1.1.0/node_modules/@aptos-labs/wallet-standard/dist/esm/index.mjs\");\n/* harmony import */ var _aptos_connect_wallet_adapter_plugin__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aptos-connect/wallet-adapter-plugin */ \"(ssr)/./node_modules/.pnpm/@aptos-connect+wallet-adapter-plugin@2.3.2_@aptos-labs+ts-sdk@1.30.0_@aptos-labs+wallet-stand_ihgbzc7hbr5tewt6nk5dtocfka/node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs\");\n/* harmony import */ var _atomrigslab_aptos_wallet_adapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @atomrigslab/aptos-wallet-adapter */ \"(ssr)/./node_modules/.pnpm/@atomrigslab+aptos-wallet-adapter@0.1.21_@aptos-labs+ts-sdk@1.30.0/node_modules/@atomrigslab/aptos-wallet-adapter/dist/index.es.js\");\n/* harmony import */ var _mizuwallet_sdk_aptos_wallet_adapter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mizuwallet-sdk/aptos-wallet-adapter */ \"(ssr)/./node_modules/.pnpm/@mizuwallet-sdk+aptos-wallet-adapter@0.3.2_@mizuwallet-sdk+core@1.4.0_@mizuwallet-sdk+protoco_mdwqtnpdoi52g5ylnhdt6pxsdm/node_modules/@mizuwallet-sdk/aptos-wallet-adapter/dist/index.js\");\n/* harmony import */ var buffer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! buffer */ \"buffer\");\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! tweetnacl */ \"(ssr)/./node_modules/.pnpm/tweetnacl@1.0.3/node_modules/tweetnacl/nacl-fast.js\");\n// src/version.ts\nvar WALLET_ADAPTER_CORE_VERSION = \"4.20.0\";\n\n// src/WalletCore.ts\n\n\n\n\n\n// src/AIP62StandardWallets/sdkWallets.ts\n\n\n\n\nfunction getSDKWallets(dappConfig) {\n  const sdkWallets = [];\n  if (typeof window !== \"undefined\") {\n    sdkWallets.push(\n      new _aptos_connect_wallet_adapter_plugin__WEBPACK_IMPORTED_MODULE_4__.AptosConnectGoogleWallet({\n        network: dappConfig == null ? void 0 : dappConfig.network,\n        dappId: dappConfig == null ? void 0 : dappConfig.aptosConnectDappId,\n        ...dappConfig == null ? void 0 : dappConfig.aptosConnect\n      }),\n      new _aptos_connect_wallet_adapter_plugin__WEBPACK_IMPORTED_MODULE_4__.AptosConnectAppleWallet({\n        network: dappConfig == null ? void 0 : dappConfig.network,\n        dappId: dappConfig == null ? void 0 : dappConfig.aptosConnectDappId,\n        ...dappConfig == null ? void 0 : dappConfig.aptosConnect\n      })\n    );\n    if ((dappConfig == null ? void 0 : dappConfig.mizuwallet) && (dappConfig == null ? void 0 : dappConfig.network) && [_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.MAINNET, _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.TESTNET].includes(dappConfig.network)) {\n      sdkWallets.push(\n        new _mizuwallet_sdk_aptos_wallet_adapter__WEBPACK_IMPORTED_MODULE_6__.MizuWallet({\n          network: dappConfig.network,\n          manifestURL: dappConfig.mizuwallet.manifestURL,\n          appId: dappConfig.mizuwallet.appId\n        })\n      );\n    }\n  }\n  if ((dappConfig == null ? void 0 : dappConfig.network) === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.MAINNET) {\n    sdkWallets.push(new _atomrigslab_aptos_wallet_adapter__WEBPACK_IMPORTED_MODULE_5__.TWallet());\n  } else {\n    sdkWallets.push(new _atomrigslab_aptos_wallet_adapter__WEBPACK_IMPORTED_MODULE_5__.DevTWallet());\n  }\n  return sdkWallets;\n}\n\n// src/constants.ts\nvar WalletReadyState = /* @__PURE__ */ ((WalletReadyState2) => {\n  WalletReadyState2[\"Installed\"] = \"Installed\";\n  WalletReadyState2[\"NotDetected\"] = \"NotDetected\";\n  WalletReadyState2[\"Loadable\"] = \"Loadable\";\n  WalletReadyState2[\"Unsupported\"] = \"Unsupported\";\n  return WalletReadyState2;\n})(WalletReadyState || {});\nvar NetworkName = /* @__PURE__ */ ((NetworkName2) => {\n  NetworkName2[\"Mainnet\"] = \"mainnet\";\n  NetworkName2[\"Testnet\"] = \"testnet\";\n  NetworkName2[\"Devnet\"] = \"devnet\";\n  return NetworkName2;\n})(NetworkName || {});\nvar ChainIdToAnsSupportedNetworkMap = {\n  \"1\": \"mainnet\",\n  \"2\": \"testnet\"\n};\nvar APTOS_CONNECT_BASE_URL = \"https://aptosconnect.app\";\nvar APTOS_CONNECT_ACCOUNT_URL = \"https://aptosconnect.app/dashboard/main-account\";\n\n// src/error/index.ts\nvar WalletError = class extends Error {\n  constructor(message, error) {\n    super(message);\n    this.error = error;\n  }\n};\nvar WalletNotSelectedError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletNotSelectedError\";\n  }\n};\nvar WalletNotReadyError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletNotReadyError\";\n  }\n};\nvar WalletConnectionError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletConnectionError\";\n  }\n};\nvar WalletDisconnectionError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletDisconnectionError\";\n  }\n};\nvar WalletAccountError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletAccountError\";\n  }\n};\nvar WalletGetNetworkError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletGetNetworkError\";\n  }\n};\nvar WalletAccountChangeError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletAccountChangeError\";\n  }\n};\nvar WalletNetworkChangeError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletNetworkChangeError\";\n  }\n};\nvar WalletNotConnectedError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletNotConnectedError\";\n  }\n};\nvar WalletSignMessageError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletSignMessageError\";\n  }\n};\nvar WalletSignMessageAndVerifyError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletSignMessageAndVerifyError\";\n  }\n};\nvar WalletSignAndSubmitMessageError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletSignAndSubmitMessageError\";\n  }\n};\nvar WalletSignTransactionError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletSignTransactionError\";\n  }\n};\nvar WalletNotSupportedMethod = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletNotSupportedMethod\";\n  }\n};\nvar WalletChangeNetworkError = class extends WalletError {\n  constructor() {\n    super(...arguments);\n    this.name = \"WalletChangeNetworkError\";\n  }\n};\n\n// src/LegacyWalletPlugins/WalletCoreV1.ts\n\n\n\n\n\n\n// src/LegacyWalletPlugins/conversion.ts\n\n\nfunction convertNetwork(networkInfo) {\n  switch (networkInfo == null ? void 0 : networkInfo.name) {\n    case \"mainnet\":\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.MAINNET;\n    case \"testnet\":\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.TESTNET;\n    case \"devnet\":\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.DEVNET;\n    case \"local\":\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.LOCAL;\n    default:\n      throw new Error(\"Invalid Aptos network name\");\n  }\n}\nfunction convertV2TransactionPayloadToV1BCSPayload(payload) {\n  const deserializer = new aptos__WEBPACK_IMPORTED_MODULE_0__.BCS.Deserializer(payload.bcsToBytes());\n  return aptos__WEBPACK_IMPORTED_MODULE_0__.TxnBuilderTypes.TransactionPayload.deserialize(deserializer);\n}\nfunction convertV2PayloadToV1JSONPayload(payload) {\n  var _a, _b;\n  if (\"bytecode\" in payload) {\n    throw new Error(\"script payload not supported\");\n  } else if (\"multisigAddress\" in payload) {\n    const stringTypeTags = (_a = payload.typeArguments) == null ? void 0 : _a.map(\n      (typeTag) => {\n        if (typeTag instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TypeTag) {\n          return typeTag.toString();\n        }\n        return typeTag;\n      }\n    );\n    const newPayload = {\n      type: \"multisig_payload\",\n      multisig_address: payload.multisigAddress.toString(),\n      function: payload.function,\n      type_arguments: stringTypeTags || [],\n      arguments: payload.functionArguments\n    };\n    return newPayload;\n  } else {\n    const stringTypeTags = (_b = payload.typeArguments) == null ? void 0 : _b.map(\n      (typeTag) => {\n        if (typeTag instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TypeTag) {\n          return typeTag.toString();\n        }\n        return typeTag;\n      }\n    );\n    const newPayload = {\n      type: \"entry_function_payload\",\n      function: payload.function,\n      type_arguments: stringTypeTags || [],\n      arguments: payload.functionArguments\n    };\n    return newPayload;\n  }\n}\nfunction convertPayloadInputV1ToV2(inputV1) {\n  if (\"function\" in inputV1) {\n    const inputV2 = {\n      function: inputV1.function,\n      functionArguments: inputV1.arguments,\n      typeArguments: inputV1.type_arguments\n    };\n    return inputV2;\n  }\n  throw new Error(\"Payload type not supported\");\n}\nasync function generateTransactionPayloadFromV1Input(aptosConfig, inputV1) {\n  if (\"function\" in inputV1) {\n    const inputV2 = convertPayloadInputV1ToV2(inputV1);\n    return (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.generateTransactionPayload)({ ...inputV2, aptosConfig });\n  }\n  throw new Error(\"Payload type not supported\");\n}\n\n// src/utils/helpers.ts\n\nfunction isMobile() {\n  return /Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/i.test(\n    navigator.userAgent\n  );\n}\nfunction isInAppBrowser() {\n  const isIphone = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(\n    navigator.userAgent\n  );\n  const isAndroid = /(Android).*Version\\/[\\d.]+.*Chrome\\/[^\\s]+ Mobile/i.test(\n    navigator.userAgent\n  );\n  return isIphone || isAndroid;\n}\nfunction isRedirectable() {\n  if (typeof navigator === \"undefined\" || !navigator)\n    return false;\n  return isMobile() && !isInAppBrowser();\n}\nfunction generalizedErrorMessage(error) {\n  return typeof error === \"object\" && \"message\" in error ? error.message : error;\n}\nvar areBCSArguments = (args) => {\n  if (args.length === 0)\n    return false;\n  return args.every(\n    (arg) => arg instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Serializable\n  );\n};\nvar getAptosConfig = (networkInfo, dappConfig) => {\n  if (!networkInfo) {\n    throw new Error(\"Undefined network\");\n  }\n  if (isAptosNetwork(networkInfo)) {\n    return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AptosConfig({\n      network: convertNetwork(networkInfo),\n      clientConfig: { API_KEY: dappConfig == null ? void 0 : dappConfig.aptosApiKey }\n    });\n  }\n  return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AptosConfig({\n    network: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.CUSTOM,\n    fullnode: networkInfo.url,\n    clientConfig: { API_KEY: dappConfig == null ? void 0 : dappConfig.aptosApiKey }\n  });\n};\nvar isAptosNetwork = (networkInfo) => {\n  if (!networkInfo) {\n    throw new Error(\"Undefined network\");\n  }\n  return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToNodeAPI[networkInfo.name] !== void 0;\n};\nvar fetchDevnetChainId = async () => {\n  const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos();\n  return await aptos.getChainId();\n};\nvar handlePublishPackageTransaction = (transactionInput) => {\n  let metadataBytes = transactionInput.data.functionArguments[0];\n  if (typeof metadataBytes === \"string\") {\n    metadataBytes = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Hex.fromHexInput(metadataBytes).toUint8Array();\n  }\n  let byteCode = transactionInput.data.functionArguments[1];\n  if (Array.isArray(byteCode)) {\n    byteCode = byteCode.map((byte) => {\n      if (typeof byte === \"string\") {\n        return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Hex.fromHexInput(byte).toUint8Array();\n      }\n      return byte;\n    });\n  } else {\n    throw new WalletSignAndSubmitMessageError(\n      \"The bytecode argument must be an array.\"\n    ).message;\n  }\n  return { metadataBytes, byteCode };\n};\n\n// src/utils/localStorage.ts\nvar LOCAL_STORAGE_ITEM_KEY = \"AptosWalletName\";\nfunction setLocalStorage(walletName) {\n  localStorage.setItem(LOCAL_STORAGE_ITEM_KEY, walletName);\n}\nfunction removeLocalStorage() {\n  localStorage.removeItem(LOCAL_STORAGE_ITEM_KEY);\n}\nfunction getLocalStorage() {\n  localStorage.getItem(LOCAL_STORAGE_ITEM_KEY);\n}\n\n// src/utils/scopePollingDetectionStrategy.ts\nfunction scopePollingDetectionStrategy(detect) {\n  if (typeof window === \"undefined\" || typeof document === \"undefined\")\n    return;\n  const disposers = [];\n  function detectAndDispose() {\n    const detected = detect();\n    if (detected) {\n      for (const dispose of disposers) {\n        dispose();\n      }\n    }\n  }\n  const interval = setInterval(detectAndDispose, 1e3);\n  disposers.push(() => clearInterval(interval));\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", detectAndDispose, {\n      once: true\n    });\n    disposers.push(\n      () => document.removeEventListener(\"DOMContentLoaded\", detectAndDispose)\n    );\n  }\n  if (document.readyState !== \"complete\") {\n    window.addEventListener(\"load\", detectAndDispose, { once: true });\n    disposers.push(() => window.removeEventListener(\"load\", detectAndDispose));\n  }\n  detectAndDispose();\n}\n\n// src/utils/walletSelector.ts\nfunction partitionWallets(wallets, partitionFunction = isInstalledOrLoadable) {\n  const defaultWallets = [];\n  const moreWallets = [];\n  for (const wallet of wallets) {\n    if (partitionFunction(wallet))\n      defaultWallets.push(wallet);\n    else\n      moreWallets.push(wallet);\n  }\n  return { defaultWallets, moreWallets };\n}\nfunction isInstalledOrLoadable(wallet) {\n  return wallet.readyState === \"Installed\" /* Installed */ || wallet.readyState === \"Loadable\" /* Loadable */;\n}\nfunction isInstallRequired(wallet) {\n  const isWalletReady = isInstalledOrLoadable(wallet);\n  const isMobile2 = !isWalletReady && isRedirectable();\n  return !isMobile2 && !isWalletReady;\n}\nfunction truncateAddress(address) {\n  if (!address)\n    return;\n  return `${address.slice(0, 6)}...${address.slice(-5)}`;\n}\nfunction isAptosConnectWallet(wallet) {\n  if (!wallet.url)\n    return false;\n  return wallet.url.startsWith(APTOS_CONNECT_BASE_URL);\n}\nfunction getAptosConnectWallets(wallets) {\n  const { defaultWallets, moreWallets } = partitionWallets(\n    wallets,\n    isAptosConnectWallet\n  );\n  return { aptosConnectWallets: defaultWallets, otherWallets: moreWallets };\n}\nfunction groupAndSortWallets(wallets, options) {\n  const { aptosConnectWallets, otherWallets } = getAptosConnectWallets(wallets);\n  const { defaultWallets, moreWallets } = partitionWallets(otherWallets);\n  if (options == null ? void 0 : options.sortAptosConnectWallets) {\n    aptosConnectWallets.sort(options.sortAptosConnectWallets);\n  }\n  if (options == null ? void 0 : options.sortAvailableWallets) {\n    defaultWallets.sort(options.sortAvailableWallets);\n  }\n  if (options == null ? void 0 : options.sortInstallableWallets) {\n    moreWallets.sort(options.sortInstallableWallets);\n  }\n  return {\n    aptosConnectWallets,\n    availableWallets: defaultWallets,\n    installableWallets: moreWallets\n  };\n}\n\n// src/LegacyWalletPlugins/WalletCoreV1.ts\nvar WalletCoreV1 = class extends eventemitter3__WEBPACK_IMPORTED_MODULE_2__ {\n  async connect(wallet) {\n    const account = await wallet.connect();\n    return account;\n  }\n  async resolveSignAndSubmitTransaction(payloadData, network, wallet, transactionInput, dappConfig) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    if (areBCSArguments(payloadData.functionArguments)) {\n      const aptosConfig = getAptosConfig(network, dappConfig);\n      const newPayload = await (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.generateTransactionPayload)({\n        ...payloadData,\n        aptosConfig\n      });\n      const oldTransactionPayload2 = convertV2TransactionPayloadToV1BCSPayload(newPayload);\n      return await this.signAndSubmitBCSTransaction(\n        oldTransactionPayload2,\n        wallet,\n        {\n          max_gas_amount: ((_a = transactionInput.options) == null ? void 0 : _a.maxGasAmount) ? BigInt((_b = transactionInput.options) == null ? void 0 : _b.maxGasAmount) : void 0,\n          gas_unit_price: ((_c = transactionInput.options) == null ? void 0 : _c.gasUnitPrice) ? BigInt((_d = transactionInput.options) == null ? void 0 : _d.gasUnitPrice) : void 0\n        }\n      );\n    }\n    const oldTransactionPayload = convertV2PayloadToV1JSONPayload(payloadData);\n    return await this.signAndSubmitTransaction(oldTransactionPayload, wallet, {\n      max_gas_amount: ((_e = transactionInput.options) == null ? void 0 : _e.maxGasAmount) ? BigInt((_f = transactionInput.options) == null ? void 0 : _f.maxGasAmount) : void 0,\n      gas_unit_price: ((_g = transactionInput.options) == null ? void 0 : _g.gasUnitPrice) ? BigInt((_h = transactionInput.options) == null ? void 0 : _h.gasUnitPrice) : void 0\n    });\n  }\n  async signAndSubmitTransaction(transaction, wallet, options) {\n    try {\n      const response = await wallet.signAndSubmitTransaction(\n        transaction,\n        options\n      );\n      return response;\n    } catch (error) {\n      const errMsg = typeof error == \"object\" && \"message\" in error ? error.message : error;\n      throw new WalletSignAndSubmitMessageError(errMsg).message;\n    }\n  }\n  async signAndSubmitBCSTransaction(transaction, wallet, options) {\n    if (!(\"signAndSubmitBCSTransaction\" in wallet)) {\n      throw new WalletNotSupportedMethod(\n        `Submit a BCS Transaction is not supported by ${wallet.name}`\n      ).message;\n    }\n    try {\n      const response = await wallet.signAndSubmitBCSTransaction(\n        transaction,\n        options\n      );\n      return response;\n    } catch (error) {\n      const errMsg = typeof error == \"object\" && \"message\" in error ? error.message : error;\n      throw new WalletSignAndSubmitMessageError(errMsg).message;\n    }\n  }\n  async signTransaction(transaction, wallet, options) {\n    try {\n      const response = await wallet.signTransaction(\n        transaction,\n        options\n      );\n      return response;\n    } catch (error) {\n      const errMsg = typeof error == \"object\" && \"message\" in error ? error.message : error;\n      throw new WalletSignTransactionError(errMsg).message;\n    }\n  }\n  async signMessageAndVerify(message, wallet, account) {\n    try {\n      const response = await wallet.signMessage(message);\n      if (!response)\n        throw new WalletSignMessageAndVerifyError(\"Failed to sign a message\").message;\n      console.log(\"signMessageAndVerify signMessage response\", response);\n      let verified = false;\n      if (Array.isArray(response.signature)) {\n        const { fullMessage, signature, bitmap } = response;\n        if (bitmap) {\n          const minKeysRequired = account.minKeysRequired;\n          if (signature.length < minKeysRequired) {\n            verified = false;\n          } else {\n            const bits = Array.from(bitmap).flatMap(\n              (n) => Array.from({ length: 8 }).map((_, i) => n >> i & 1)\n            );\n            const index = bits.map((_, i) => i).filter((i) => bits[i]);\n            const publicKeys = account.publicKey;\n            const matchedPublicKeys = publicKeys.filter(\n              (_, i) => index.includes(i)\n            );\n            verified = true;\n            for (let i = 0; i < signature.length; i++) {\n              const isSigVerified = tweetnacl__WEBPACK_IMPORTED_MODULE_8__.sign.detached.verify(\n                buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(fullMessage),\n                buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(signature[i], \"hex\"),\n                buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(matchedPublicKeys[i], \"hex\")\n              );\n              if (!isSigVerified) {\n                verified = false;\n                break;\n              }\n            }\n          }\n        } else {\n          throw new WalletSignMessageAndVerifyError(\"Failed to get a bitmap\").message;\n        }\n      } else {\n        const currentAccountPublicKey = new aptos__WEBPACK_IMPORTED_MODULE_0__.HexString(\n          account.publicKey\n        );\n        const signature = new aptos__WEBPACK_IMPORTED_MODULE_0__.HexString(\n          response.signature\n        );\n        verified = tweetnacl__WEBPACK_IMPORTED_MODULE_8__.sign.detached.verify(\n          buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(response.fullMessage),\n          buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(signature.noPrefix(), \"hex\"),\n          buffer__WEBPACK_IMPORTED_MODULE_7__.Buffer.from(currentAccountPublicKey.noPrefix(), \"hex\")\n        );\n      }\n      return verified;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignMessageAndVerifyError(errMsg).message;\n    }\n  }\n};\n\n// src/LegacyWalletPlugins/types.ts\n\n\n// src/AIP62StandardWallets/WalletStandard.ts\n\n\nvar WalletStandardCore = class {\n  async connect(wallet) {\n    const response = await wallet.connect();\n    if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n      throw new WalletConnectionError(\"User has rejected the request\").message;\n    }\n    return response.args;\n  }\n  async signAndSubmitTransaction(transactionInput, aptos, account, wallet, standardWallets) {\n    var _a, _b, _c;\n    try {\n      const standardWallet = standardWallets.find(\n        (standardWallet2) => wallet.name === standardWallet2.name\n      );\n      if (((_a = standardWallet == null ? void 0 : standardWallet.features[\"aptos:signAndSubmitTransaction\"]) == null ? void 0 : _a.version) !== \"1.1.0\") {\n        const transaction2 = await aptos.transaction.build.simple({\n          sender: account.address.toString(),\n          data: transactionInput.data,\n          options: transactionInput.options\n        });\n        const response2 = await wallet.signAndSubmitTransaction(\n          transaction2\n        );\n        if (response2.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n          throw new WalletConnectionError(\"User has rejected the request\").message;\n        }\n        return response2.args;\n      }\n      const transaction = {\n        gasUnitPrice: (_b = transactionInput.options) == null ? void 0 : _b.gasUnitPrice,\n        maxGasAmount: (_c = transactionInput.options) == null ? void 0 : _c.maxGasAmount,\n        payload: transactionInput.data\n      };\n      const response = await wallet.signAndSubmitTransaction(\n        transaction\n      );\n      if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n        throw new WalletConnectionError(\"User has rejected the request\").message;\n      }\n      return response.args;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignAndSubmitMessageError(errMsg).message;\n    }\n  }\n  async signTransaction(transactionOrInput, wallet, asFeePayer) {\n    const response = await wallet.signTransaction(\n      transactionOrInput,\n      asFeePayer\n    );\n    if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n      throw new WalletConnectionError(\"User has rejected the request\").message;\n    }\n    return response.args;\n  }\n  async signMessage(message, wallet) {\n    try {\n      const response = await wallet.signMessage(\n        message\n      );\n      if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n        throw new WalletConnectionError(\"User has rejected the request\").message;\n      }\n      return response.args;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignMessageError(errMsg).message;\n    }\n  }\n  async signMessageAndVerify(message, wallet) {\n    try {\n      const response = await wallet.signMessage(\n        message\n      );\n      const account = await wallet.account();\n      if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n        throw new WalletConnectionError(\"Failed to sign a message\").message;\n      }\n      if (account.publicKey instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AnyPublicKey && account.publicKey.variant === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AnyPublicKeyVariant.Keyless) {\n        return true;\n      }\n      let verified = false;\n      if (response.args.signature instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiEd25519Signature) {\n        if (!(account.publicKey instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiEd25519PublicKey)) {\n          throw new WalletSignMessageAndVerifyError(\n            \"Public key and Signature type mismatch\"\n          ).message;\n        }\n        const { fullMessage, signature } = response.args;\n        const bitmap = signature.bitmap;\n        if (bitmap) {\n          const minKeysRequired = account.publicKey.threshold;\n          if (signature.signatures.length < minKeysRequired) {\n            verified = false;\n          } else {\n            verified = account.publicKey.verifySignature({\n              message: new TextEncoder().encode(fullMessage),\n              signature\n            });\n          }\n        }\n      } else {\n        verified = account.publicKey.verifySignature({\n          message: new TextEncoder().encode(response.args.fullMessage),\n          signature: response.args.signature\n        });\n      }\n      return verified;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignMessageAndVerifyError(errMsg).message;\n    }\n  }\n};\n\n// src/ga/index.ts\nvar GA4 = class {\n  constructor() {\n    this.aptosGAID = \"G-GNVVWBL3J9\";\n    this.injectGA(this.aptosGAID);\n  }\n  gtag(a, b, c) {\n    let dataLayer = window.dataLayer || [];\n    dataLayer.push(arguments);\n  }\n  injectGA(gaID) {\n    if (typeof window === \"undefined\")\n      return;\n    if (!gaID)\n      return;\n    const head = document.getElementsByTagName(\"head\")[0];\n    var myScript = document.createElement(\"script\");\n    myScript.setAttribute(\n      \"src\",\n      `https://www.googletagmanager.com/gtag/js?id=${gaID}`\n    );\n    const that = this;\n    myScript.onload = function() {\n      that.gtag(\"js\", new Date());\n      that.gtag(\"config\", `${gaID}`, {\n        send_page_view: false\n      });\n    };\n    head.insertBefore(myScript, head.children[1]);\n  }\n};\n\n// src/AIP62StandardWallets/registry.ts\nvar aptosStandardSupportedWalletList = [\n  {\n    name: \"Nightly\",\n    url: \"https://chromewebstore.google.com/detail/nightly/fiikommddbeccaoicoejoniammnalkfa?hl=en\",\n    icon: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iV2Fyc3R3YV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDg1MS41IDg1MS41IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA4NTEuNSA4NTEuNTsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6IzYwNjdGOTt9DQoJLnN0MXtmaWxsOiNGN0Y3Rjc7fQ0KPC9zdHlsZT4NCjxnPg0KCTxnIGlkPSJXYXJzdHdhXzJfMDAwMDAwMTQ2MDk2NTQyNTMxODA5NDY0NjAwMDAwMDg2NDc4NTIwMDIxMTY5MTg2ODhfIj4NCgkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEyNCwwaDYwMy42YzY4LjUsMCwxMjQsNTUuNSwxMjQsMTI0djYwMy42YzAsNjguNS01NS41LDEyNC0xMjQsMTI0SDEyNGMtNjguNSwwLTEyNC01NS41LTEyNC0xMjRWMTI0DQoJCQlDMCw1NS41LDU1LjUsMCwxMjQsMHoiLz4NCgk8L2c+DQoJPGcgaWQ9IldhcnN0d2FfMyI+DQoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik02MjMuNSwxNzAuM2MtMzcuNCw1Mi4yLTg0LjIsODguNC0xMzkuNSwxMTIuNmMtMTkuMi01LjMtMzguOS04LTU4LjMtNy44Yy0xOS40LTAuMi0zOS4xLDIuNi01OC4zLDcuOA0KCQkJYy01NS4zLTI0LjMtMTAyLjEtNjAuMy0xMzkuNS0xMTIuNmMtMTEuMywyOC40LTU0LjgsMTI2LjQtMi42LDI2My40YzAsMC0xNi43LDcxLjUsMTQsMTMyLjljMCwwLDQ0LjQtMjAuMSw3OS43LDguMg0KCQkJYzM2LjksMjkuOSwyNS4xLDU4LjcsNTEuMSw4My41YzIyLjQsMjIuOSw1NS43LDIyLjksNTUuNywyMi45czMzLjMsMCw1NS43LTIyLjhjMjYtMjQuNywxNC4zLTUzLjUsNTEuMS04My41DQoJCQljMzUuMi0yOC4zLDc5LjctOC4yLDc5LjctOC4yYzMwLjYtNjEuNCwxNC0xMzIuOSwxNC0xMzIuOUM2NzguMywyOTYuNyw2MzQuOSwxOTguNyw2MjMuNSwxNzAuM3ogTTI1My4xLDQxNC44DQoJCQljLTI4LjQtNTguMy0zNi4yLTEzOC4zLTE4LjMtMjAxLjVjMjMuNyw2MCw1NS45LDg2LjksOTQuMiwxMTUuM0MzMTIuOCwzNjIuMywyODIuMywzOTQuMSwyNTMuMSw0MTQuOHogTTMzNC44LDUxNy41DQoJCQljLTIyLjQtOS45LTI3LjEtMjkuNC0yNy4xLTI5LjRjMzAuNS0xOS4yLDc1LjQtNC41LDc2LjgsNDAuOUMzNjAuOSw1MTQuNywzNTMsNTI1LjQsMzM0LjgsNTE3LjV6IE00MjUuNyw2NzguNw0KCQkJYy0xNiwwLTI5LTExLjUtMjktMjUuNnMxMy0yNS42LDI5LTI1LjZzMjksMTEuNSwyOSwyNS42QzQ1NC43LDY2Ny4zLDQ0MS43LDY3OC43LDQyNS43LDY3OC43eiBNNTE2LjcsNTE3LjUNCgkJCWMtMTguMiw4LTI2LTIuOC00OS43LDExLjVjMS41LTQ1LjQsNDYuMi02MC4xLDc2LjgtNDAuOUM1NDMuOCw0ODgsNTM5LDUwNy42LDUxNi43LDUxNy41eiBNNTk4LjMsNDE0LjgNCgkJCWMtMjkuMS0yMC43LTU5LjctNTIuNC03Ni04Ni4yYzM4LjMtMjguNCw3MC42LTU1LjQsOTQuMi0xMTUuM0M2MzQuNiwyNzYuNSw2MjYuOCwzNTYuNiw1OTguMyw0MTQuOHoiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==\",\n    readyState: \"NotDetected\" /* NotDetected */,\n    isAIP62Standard: true\n  },\n  {\n    name: \"Petra\",\n    url: \"https://chromewebstore.google.com/detail/petra-aptos-wallet/ejjladinnckdgjemekebdpeokbikhfci?hl=en\",\n    icon: \"data:image/png;base64,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\",\n    readyState: \"NotDetected\" /* NotDetected */,\n    isAIP62Standard: true\n  },\n  {\n    name: \"Pontem Wallet\",\n    url: \"https://pontem.network/pontem-wallet\",\n    icon: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDBDOC4wNzMwNCAwIDAgOC4wNzEzOSAwIDE3Ljk5NjNDMCAyNS4xMjk4IDQuMTczMTYgMzEuMzEwOCAxMC4yMDc2IDM0LjIyMDNWMzQuMjM1MUgxMC4yMzcyQzEyLjU4NiAzNS4zNjQ5IDE1LjIyMjggMzYgMTggMzZDMjcuOTI3IDM2IDM2IDI3LjkyODYgMzYgMTguMDAzN0MzNiA4LjA3MTM4IDI3LjkyNyAwIDE4IDBaTTE4IDEuNDc2OTJDMjcuMTA3MSAxLjQ3NjkyIDM0LjUyMjggOC44OTEwOCAzNC41MjI4IDE3Ljk5NjNDMzQuNTIyOCAyMC42MTA1IDMzLjkwOTcgMjMuMDkxNyAzMi44MjQgMjUuMjkyM0MzMC40NDU2IDI0LjE0MDMgMjguMDMwNCAyMy4yODM3IDI1LjU5MjkgMjIuNzAwM1Y4LjkyMDYyQzI1LjU5MjkgOC40NDA2MiAyNS4yMTYyIDguMDU2NjIgMjQuNzQzNSA4LjA1NjYySDIxLjcxNTJIMTQuMDg1NEgxMS4wNTdDMTAuNTkxNyA4LjA1NjYyIDEwLjIwNzYgOC40NDA2MiAxMC4yMDc2IDguOTIwNjJWMjIuNzY2OEM3Ljg0NDA3IDIzLjM1MDIgNS40OTUyOCAyNC4xOTIgMy4xODM0MiAyNS4yOTk3QzIuMDkwMjcgMjMuMDkxNyAxLjQ3NzIzIDIwLjYxNzggMS40NzcyMyAxNy45OTYzQzEuNDc3MjMgOC44OTEwOCA4Ljg5MjkgMS40NzY5MiAxOCAxLjQ3NjkyWk00LjEzNjIzIDI2Ljk2MTJDNi4wOTM1NiAyNS45OTM4IDguMTI0NzQgMjUuMjQ4IDEwLjIxNSAyNC43MzExVjMyLjU1ODhDNy43NDA2NiAzMS4yMzY5IDUuNjUwMzkgMjkuMzAyMiA0LjEzNjIzIDI2Ljk2MTJaTTE0LjA4NTQgMzQuMDQzMVYxNS42MDM3QzE0LjA4NTQgMTMuNDY5NSAxNS44MzU5IDExLjcwNDYgMTcuOTI2MSAxMS43MDQ2QzIwLjAxNjQgMTEuNzA0NiAyMS43MTUyIDEzLjQzMjYgMjEuNzE1MiAxNS41NTk0QzIxLjcxNTIgMTUuNTc0MiAyMS43MDc4IDE1LjU4ODkgMjEuNzA3OCAxNS42MDM3SDIxLjcxNTJWMjIuMDIwOUMxOS45MzUyIDIxLjgxNDIgMTguMTQ3NyAyMS43NDc3IDE2LjM2MDMgMjEuODQzN0wxNC44OTA0IDIzLjk3NzhDMTcuMTgwMSAyMy43ODU4IDE5LjQxMDcgMjMuODAwNiAyMS42MTE4IDI0LjA1MTdDMjEuNjM0IDI0LjA1MTcgMjEuNjQ4NyAyNC4wNTE3IDIxLjY3MDkgMjQuMDU5MUMyMS42ODU3IDI0LjA1OTEgMjEuNzAwNSAyNC4wNTkxIDIxLjcyMjYgMjQuMDY2NUMyMi4xMDY3IDI0LjExMDggMjMuNTAyNyAyNC4yODggMjQuNzgwNSAyNC42MDU1TDIxLjcyMjYgMjUuNjQ2OFYzNC4xMDIyQzIwLjUyNjEgMzQuMzc1NCAxOS4yODUyIDM0LjUzMDUgMTguMDE0OCAzNC41MzA1QzE2LjY0ODMgMzQuNTE1NyAxNS4zNDEgMzQuMzQ1OCAxNC4wODU0IDM0LjA0MzFaTTI1LjU4NTYgMzIuNjYyMlYyNC43NjhDMjcuNjY4NCAyNS4yOTIzIDI5LjcyOTIgMjYuMDYwMyAzMS43OTczIDI3LjA2NDZDMzAuMjQ2MiAyOS40MjAzIDI4LjEwNDIgMzEuMzU1MSAyNS41ODU2IDMyLjY2MjJaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMjIyXzE2NzApIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIyXzE2NzAiIHgxPSIxNy45OTk3IiB5MT0iMzYuNzc4OSIgeDI9IjE3Ljk5OTciIHkyPSItNS41MTk3OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBvZmZzZXQ9IjAuMDg1OCIgc3RvcC1jb2xvcj0iIzhEMjlDMSIvPgo8c3RvcCBvZmZzZXQ9IjAuMjM4MyIgc3RvcC1jb2xvcj0iIzk0MkJCQiIvPgo8c3RvcCBvZmZzZXQ9IjAuNDY2NyIgc3RvcC1jb2xvcj0iI0E5MkZBQyIvPgo8c3RvcCBvZmZzZXQ9IjAuNzQxMyIgc3RvcC1jb2xvcj0iI0NBMzc5MyIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGMDNGNzciLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K\",\n    readyState: \"NotDetected\" /* NotDetected */,\n    isAIP62Standard: true\n  }\n];\n\n// src/WalletCore.ts\nvar WalletCore = class extends eventemitter3__WEBPACK_IMPORTED_MODULE_2__ {\n  constructor(plugins, optInWallets, dappConfig, disableTelemetry) {\n    super();\n    this._wallets = [];\n    this._optInWallets = [];\n    this._standard_wallets = [];\n    this._all_wallets = [];\n    this._wallet = null;\n    this._account = null;\n    this._network = null;\n    this.walletCoreV1 = new WalletCoreV1();\n    this.walletStandardCore = new WalletStandardCore();\n    this._connecting = false;\n    this._connected = false;\n    this.ga4 = null;\n    this._disableTelemetry = false;\n    this.standardizeStandardWalletToPluginWalletType = (standardWallet) => {\n      var _a, _b, _c, _d;\n      let standardWalletConvertedToWallet = {\n        name: standardWallet.name,\n        url: standardWallet.url,\n        icon: standardWallet.icon,\n        provider: standardWallet,\n        connect: standardWallet.features[\"aptos:connect\"].connect,\n        disconnect: standardWallet.features[\"aptos:disconnect\"].disconnect,\n        network: standardWallet.features[\"aptos:network\"].network,\n        account: standardWallet.features[\"aptos:account\"].account,\n        signAndSubmitTransaction: (_a = standardWallet.features[\"aptos:signAndSubmitTransaction\"]) == null ? void 0 : _a.signAndSubmitTransaction,\n        signMessage: standardWallet.features[\"aptos:signMessage\"].signMessage,\n        onAccountChange: standardWallet.features[\"aptos:onAccountChange\"].onAccountChange,\n        onNetworkChange: standardWallet.features[\"aptos:onNetworkChange\"].onNetworkChange,\n        signTransaction: standardWallet.features[\"aptos:signTransaction\"].signTransaction,\n        openInMobileApp: (_b = standardWallet.features[\"aptos:openInMobileApp\"]) == null ? void 0 : _b.openInMobileApp,\n        changeNetwork: (_c = standardWallet.features[\"aptos:changeNetwork\"]) == null ? void 0 : _c.changeNetwork,\n        readyState: \"Installed\" /* Installed */,\n        isAIP62Standard: true,\n        isSignTransactionV1_1: ((_d = standardWallet.features[\"aptos:signTransaction\"]) == null ? void 0 : _d.version) === \"1.1\"\n      };\n      this._all_wallets = this._all_wallets.filter(\n        (item) => item.name !== standardWalletConvertedToWallet.name\n      );\n      this._all_wallets.push(standardWalletConvertedToWallet);\n      this.emit(\"standardWalletsAdded\", standardWalletConvertedToWallet);\n    };\n    this._wallets = plugins;\n    this._optInWallets = optInWallets;\n    this._dappConfig = dappConfig;\n    this._disableTelemetry = disableTelemetry;\n    this._sdkWallets = getSDKWallets(this._dappConfig);\n    if (!this._disableTelemetry) {\n      this.ga4 = new GA4();\n    }\n    this.fetchExtensionAIP62AptosWallets();\n    this.fetchSDKAIP62AptosWallets();\n    this.scopePollingDetectionStrategy();\n    this.appendNotDetectedStandardSupportedWallets();\n  }\n  scopePollingDetectionStrategy() {\n    var _a;\n    (_a = this._wallets) == null ? void 0 : _a.forEach((wallet) => {\n      const existingStandardPontemWallet = this._standard_wallets.find(\n        (wallet2) => wallet2.name == \"Pontem Wallet\"\n      );\n      if (wallet.name === \"Pontem\" && existingStandardPontemWallet) {\n        return;\n      }\n      const existingWalletIndex = this._standard_wallets.findIndex(\n        (standardWallet) => standardWallet.name == wallet.name\n      );\n      if (existingWalletIndex !== -1)\n        return;\n      this._all_wallets.push(wallet);\n      if (!wallet.readyState) {\n        wallet.readyState = typeof window === \"undefined\" || typeof document === \"undefined\" ? \"Unsupported\" /* Unsupported */ : \"NotDetected\" /* NotDetected */;\n      }\n      if (typeof window !== \"undefined\") {\n        scopePollingDetectionStrategy(() => {\n          const providerName = wallet.providerName || wallet.name.toLowerCase();\n          if (Object.keys(window).includes(providerName)) {\n            wallet.readyState = \"Installed\" /* Installed */;\n            wallet.provider = window[providerName];\n            this.emit(\"readyStateChange\", wallet);\n            return true;\n          }\n          return false;\n        });\n      }\n    });\n  }\n  fetchExtensionAIP62AptosWallets() {\n    let { aptosWallets, on } = (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.getAptosWallets)();\n    this.setExtensionAIP62Wallets(aptosWallets);\n    if (typeof window === \"undefined\")\n      return;\n    const that = this;\n    const removeRegisterListener = on(\"register\", function() {\n      let { aptosWallets: aptosWallets2 } = (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.getAptosWallets)();\n      that.setExtensionAIP62Wallets(aptosWallets2);\n    });\n    const removeUnregisterListener = on(\"unregister\", function() {\n      let { aptosWallets: aptosWallets2 } = (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.getAptosWallets)();\n      that.setExtensionAIP62Wallets(aptosWallets2);\n    });\n  }\n  appendNotDetectedStandardSupportedWallets() {\n    aptosStandardSupportedWalletList.map((supportedWallet) => {\n      const existingPluginWalletIndex = this.wallets.findIndex(\n        (wallet) => wallet.name === supportedWallet.name\n      );\n      if (existingPluginWalletIndex !== -1)\n        return;\n      const existingStandardPontemWallet = this.wallets.find(\n        (wallet) => wallet.name == \"Pontem\"\n      );\n      if (supportedWallet.name === \"Pontem Wallet\" && existingStandardPontemWallet) {\n        return;\n      }\n      const existingStandardWallet = this._standard_wallets.find(\n        (wallet) => wallet.name == supportedWallet.name\n      );\n      if (existingStandardWallet && this.excludeWallet(existingStandardWallet)) {\n        return;\n      }\n      if (!existingStandardWallet) {\n        this._all_wallets.push(supportedWallet);\n        this.emit(\"standardWalletsAdded\", supportedWallet);\n      }\n    });\n  }\n  fetchSDKAIP62AptosWallets() {\n    this._sdkWallets.map((wallet) => {\n      this.standardizeAIP62WalletType(wallet);\n    });\n  }\n  setExtensionAIP62Wallets(extensionwWallets) {\n    const wallets = extensionwWallets.filter(\n      (wallet) => wallet.name !== \"Dev T wallet\" && wallet.name !== \"T wallet\"\n    );\n    wallets.map((wallet) => {\n      this.standardizeAIP62WalletType(wallet);\n      this._standard_wallets.push(wallet);\n    });\n  }\n  excludeWallet(wallet) {\n    if (this._optInWallets.length > 0 && !this._optInWallets.includes(wallet.name)) {\n      return true;\n    }\n    return false;\n  }\n  standardizeAIP62WalletType(wallet) {\n    if (this.excludeWallet(wallet)) {\n      return;\n    }\n    const isValid = (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.isWalletWithRequiredFeatureSet)(wallet);\n    if (isValid) {\n      wallet.readyState = \"Installed\" /* Installed */;\n      this.standardizeStandardWalletToPluginWalletType(wallet);\n      this._standard_wallets.push(wallet);\n    }\n  }\n  recordEvent(eventName, additionalInfo) {\n    var _a, _b, _c, _d;\n    (_d = this.ga4) == null ? void 0 : _d.gtag(\"event\", `wallet_adapter_${eventName}`, {\n      wallet: (_a = this._wallet) == null ? void 0 : _a.name,\n      network: (_b = this._network) == null ? void 0 : _b.name,\n      network_url: (_c = this._network) == null ? void 0 : _c.url,\n      adapter_core_version: WALLET_ADAPTER_CORE_VERSION,\n      send_to: \"G-GNVVWBL3J9\",\n      ...additionalInfo\n    });\n  }\n  ensureWalletExists(wallet) {\n    if (!wallet) {\n      throw new WalletNotConnectedError().name;\n    }\n    if (!(wallet.readyState === \"Loadable\" /* Loadable */ || wallet.readyState === \"Installed\" /* Installed */))\n      throw new WalletNotReadyError(\"Wallet is not set\").name;\n  }\n  ensureAccountExists(account) {\n    if (!account) {\n      throw new WalletAccountError(\"Account is not set\").name;\n    }\n  }\n  doesWalletExist() {\n    if (!this._connected || this._connecting || !this._wallet)\n      throw new WalletNotConnectedError().name;\n    if (!(this._wallet.readyState === \"Loadable\" /* Loadable */ || this._wallet.readyState === \"Installed\" /* Installed */))\n      throw new WalletNotReadyError().name;\n    return true;\n  }\n  clearData() {\n    this._connected = false;\n    this.setWallet(null);\n    this.setAccount(null);\n    this.setNetwork(null);\n    removeLocalStorage();\n  }\n  async setAnsName() {\n    var _a;\n    if (((_a = this._network) == null ? void 0 : _a.chainId) && this._account) {\n      if (!ChainIdToAnsSupportedNetworkMap[this._network.chainId] || !isAptosNetwork(this._network)) {\n        this._account.ansName = void 0;\n        return;\n      }\n      const aptosConfig = getAptosConfig(this._network, this._dappConfig);\n      const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos(aptosConfig);\n      const name = await aptos.ans.getPrimaryName({\n        address: this._account.address.toString()\n      });\n      this._account.ansName = name;\n    }\n  }\n  setWallet(wallet) {\n    this._wallet = wallet;\n  }\n  setAccount(account) {\n    var _a;\n    if (account === null) {\n      this._account = null;\n      return;\n    }\n    if ((_a = this._wallet) == null ? void 0 : _a.isAIP62Standard) {\n      if (\"status\" in account) {\n        const connectStandardAccount = account;\n        if (connectStandardAccount.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n          this._connecting = false;\n          throw new WalletConnectionError(\"User has rejected the request\").message;\n        }\n        this._account = {\n          address: connectStandardAccount.args.address.toString(),\n          publicKey: connectStandardAccount.args.publicKey.toString(),\n          ansName: connectStandardAccount.args.ansName\n        };\n        return;\n      } else {\n        const standardAccount = account;\n        this._account = {\n          address: standardAccount.address.toString(),\n          publicKey: standardAccount.publicKey.toString(),\n          ansName: standardAccount.ansName\n        };\n        return;\n      }\n    }\n    this._account = { ...account };\n    return;\n  }\n  setNetwork(network) {\n    var _a, _b, _c;\n    if (network === null) {\n      this._network = null;\n      return;\n    }\n    if ((_a = this._wallet) == null ? void 0 : _a.isAIP62Standard) {\n      const standardizeNetwork = network;\n      this.recordEvent(\"network_change\", {\n        from: (_b = this._network) == null ? void 0 : _b.name,\n        to: standardizeNetwork.name\n      });\n      this._network = {\n        name: standardizeNetwork.name.toLowerCase(),\n        chainId: standardizeNetwork.chainId.toString(),\n        url: standardizeNetwork.url\n      };\n      return;\n    }\n    this.recordEvent(\"network_change\", {\n      from: (_c = this._network) == null ? void 0 : _c.name,\n      to: network.name\n    });\n    this._network = {\n      ...network,\n      name: network.name.toLowerCase()\n    };\n  }\n  isConnected() {\n    return this._connected;\n  }\n  get wallets() {\n    return this._all_wallets;\n  }\n  get pluginWallets() {\n    return this._wallets;\n  }\n  get standardWallets() {\n    return this._standard_wallets;\n  }\n  get wallet() {\n    try {\n      if (!this._wallet)\n        return null;\n      return {\n        name: this._wallet.name,\n        icon: this._wallet.icon,\n        url: this._wallet.url\n      };\n    } catch (error) {\n      throw new WalletNotSelectedError(error).message;\n    }\n  }\n  get account() {\n    try {\n      return this._account;\n    } catch (error) {\n      throw new WalletAccountError(error).message;\n    }\n  }\n  get network() {\n    try {\n      return this._network;\n    } catch (error) {\n      throw new WalletGetNetworkError(error).message;\n    }\n  }\n  async connect(walletName) {\n    var _a;\n    const allDetectedWallets = this._all_wallets;\n    const selectedWallet = allDetectedWallets.find(\n      (wallet) => wallet.name === walletName\n    );\n    if (!selectedWallet)\n      return;\n    if (this._connected) {\n      if (((_a = this._wallet) == null ? void 0 : _a.name) === walletName)\n        throw new WalletConnectionError(\n          `${walletName} wallet is already connected`\n        ).message;\n    }\n    if (isRedirectable() && selectedWallet.readyState !== \"Installed\" /* Installed */) {\n      if (selectedWallet.isAIP62Standard && selectedWallet.openInMobileApp) {\n        selectedWallet.openInMobileApp();\n        return;\n      }\n      if (selectedWallet.deeplinkProvider) {\n        const url = encodeURIComponent(window.location.href);\n        const location = selectedWallet.deeplinkProvider({ url });\n        window.location.href = location;\n      }\n      return;\n    }\n    if (selectedWallet.readyState !== \"Installed\" /* Installed */ && selectedWallet.readyState !== \"Loadable\" /* Loadable */) {\n      return;\n    }\n    await this.connectWallet(selectedWallet);\n  }\n  async connectWallet(selectedWallet) {\n    try {\n      this._connecting = true;\n      this.setWallet(selectedWallet);\n      let account;\n      if (selectedWallet.isAIP62Standard) {\n        account = await this.walletStandardCore.connect(selectedWallet);\n      } else {\n        account = await this.walletCoreV1.connect(selectedWallet);\n      }\n      this.setAccount(account);\n      const network = await selectedWallet.network();\n      this.setNetwork(network);\n      await this.setAnsName();\n      setLocalStorage(selectedWallet.name);\n      this._connected = true;\n      this.recordEvent(\"wallet_connect\");\n      this.emit(\"connect\", account);\n    } catch (error) {\n      this.clearData();\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletConnectionError(errMsg).message;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    try {\n      this.ensureWalletExists(this._wallet);\n      await this._wallet.disconnect();\n      this.clearData();\n      this.recordEvent(\"wallet_disconnect\");\n      this.emit(\"disconnect\");\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletDisconnectionError(errMsg).message;\n    }\n  }\n  async signAndSubmitTransaction(transactionInput) {\n    try {\n      if (\"function\" in transactionInput.data) {\n        if (transactionInput.data.function === \"0x1::account::rotate_authentication_key_call\") {\n          throw new WalletSignAndSubmitMessageError(\"SCAM SITE DETECTED\").message;\n        }\n        if (transactionInput.data.function === \"0x1::code::publish_package_txn\") {\n          ({\n            metadataBytes: transactionInput.data.functionArguments[0],\n            byteCode: transactionInput.data.functionArguments[1]\n          } = handlePublishPackageTransaction(transactionInput));\n        }\n      }\n      this.ensureWalletExists(this._wallet);\n      this.ensureAccountExists(this._account);\n      this.recordEvent(\"sign_and_submit_transaction\");\n      const payloadData = transactionInput.data;\n      const aptosConfig = getAptosConfig(this._network, this._dappConfig);\n      const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos(aptosConfig);\n      if (this._wallet.signAndSubmitTransaction) {\n        if (this._wallet.isAIP62Standard) {\n          const { hash, ...output } = await this.walletStandardCore.signAndSubmitTransaction(\n            transactionInput,\n            aptos,\n            this._account,\n            this._wallet,\n            this._standard_wallets\n          );\n          return { hash, output };\n        } else {\n          const { hash, ...output } = await this.walletCoreV1.resolveSignAndSubmitTransaction(\n            payloadData,\n            this._network,\n            this._wallet,\n            transactionInput,\n            this._dappConfig\n          );\n          return { hash, output };\n        }\n      }\n      const transaction = await aptos.transaction.build.simple({\n        sender: this._account.address,\n        data: transactionInput.data,\n        options: transactionInput.options\n      });\n      const senderAuthenticator = await this.signTransaction(transaction);\n      const response = await this.submitTransaction({\n        transaction,\n        senderAuthenticator\n      });\n      return response;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignAndSubmitMessageError(errMsg).message;\n    }\n  }\n  async signTransaction(transactionOrPayload, asFeePayer, options) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    try {\n      this.ensureWalletExists(this._wallet);\n      this.recordEvent(\"sign_transaction\");\n      if (this._wallet.signTransaction) {\n        if (this._wallet.isAIP62Standard) {\n          if (\"rawTransaction\" in transactionOrPayload) {\n            return await this.walletStandardCore.signTransaction(\n              transactionOrPayload,\n              this._wallet,\n              asFeePayer\n            );\n          } else if (this._wallet.isSignTransactionV1_1) {\n            const payload = convertPayloadInputV1ToV2(transactionOrPayload);\n            const optionsV1 = options;\n            const { authenticator } = await this.walletStandardCore.signTransaction(\n              {\n                payload,\n                expirationTimestamp: (_a = optionsV1 == null ? void 0 : optionsV1.expireTimestamp) != null ? _a : optionsV1 == null ? void 0 : optionsV1.expirationTimestamp,\n                expirationSecondsFromNow: optionsV1 == null ? void 0 : optionsV1.expirationSecondsFromNow,\n                gasUnitPrice: (_b = optionsV1 == null ? void 0 : optionsV1.gasUnitPrice) != null ? _b : optionsV1 == null ? void 0 : optionsV1.gas_unit_price,\n                maxGasAmount: (_c = optionsV1 == null ? void 0 : optionsV1.maxGasAmount) != null ? _c : optionsV1 == null ? void 0 : optionsV1.max_gas_amount,\n                sequenceNumber: optionsV1 == null ? void 0 : optionsV1.sequenceNumber,\n                sender: (optionsV1 == null ? void 0 : optionsV1.sender) ? { address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(optionsV1.sender) } : void 0\n              },\n              this._wallet\n            );\n            return authenticator;\n          } else {\n            const aptosConfig = getAptosConfig(this._network, this._dappConfig);\n            this.ensureAccountExists(this._account);\n            const sender = this._account.address;\n            const payload = await generateTransactionPayloadFromV1Input(\n              aptosConfig,\n              transactionOrPayload\n            );\n            const optionsV1 = options;\n            const optionsV2 = {\n              accountSequenceNumber: optionsV1 == null ? void 0 : optionsV1.sequenceNumber,\n              expireTimestamp: (_d = optionsV1 == null ? void 0 : optionsV1.expireTimestamp) != null ? _d : optionsV1 == null ? void 0 : optionsV1.expirationTimestamp,\n              gasUnitPrice: (_e = optionsV1 == null ? void 0 : optionsV1.gasUnitPrice) != null ? _e : optionsV1 == null ? void 0 : optionsV1.gas_unit_price,\n              maxGasAmount: (_f = optionsV1 == null ? void 0 : optionsV1.maxGasAmount) != null ? _f : optionsV1 == null ? void 0 : optionsV1.max_gas_amount\n            };\n            const rawTransaction = await (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.generateRawTransaction)({\n              aptosConfig,\n              payload,\n              sender,\n              options: optionsV2\n            });\n            return await this.walletStandardCore.signTransaction(\n              new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SimpleTransaction(rawTransaction),\n              this._wallet,\n              false\n            );\n          }\n        }\n        if (\"rawTransaction\" in transactionOrPayload) {\n          const accountAuthenticator = await this._wallet.signTransaction(\n            transactionOrPayload,\n            asFeePayer\n          );\n          return accountAuthenticator;\n        } else {\n          const response = await this.walletCoreV1.signTransaction(\n            transactionOrPayload,\n            this._wallet,\n            {\n              max_gas_amount: (options == null ? void 0 : options.maxGasAmount) ? BigInt(options == null ? void 0 : options.maxGasAmount) : void 0,\n              gas_unit_price: (options == null ? void 0 : options.gasUnitPrice) ? BigInt(options == null ? void 0 : options.gasUnitPrice) : void 0\n            }\n          );\n          if (!response) {\n            throw new Error(\"error\");\n          }\n          const deserializer1 = new aptos__WEBPACK_IMPORTED_MODULE_0__.BCS.Deserializer(response);\n          const deserializedSignature = aptos__WEBPACK_IMPORTED_MODULE_0__.TxnBuilderTypes.SignedTransaction.deserialize(deserializer1);\n          const transactionAuthenticator = deserializedSignature.authenticator;\n          const publicKey = transactionAuthenticator.public_key.value;\n          const signature = transactionAuthenticator.signature.value;\n          const accountAuthenticator = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAuthenticatorEd25519(\n            new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Ed25519PublicKey(publicKey),\n            new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Ed25519Signature(signature)\n          );\n          return accountAuthenticator;\n        }\n      }\n      throw new WalletNotSupportedMethod(\n        `Sign Transaction is not supported by ${(_g = this.wallet) == null ? void 0 : _g.name}`\n      ).message;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignTransactionError(errMsg).message;\n    }\n  }\n  async signMessage(message) {\n    try {\n      this.ensureWalletExists(this._wallet);\n      this.recordEvent(\"sign_message\");\n      if (this._wallet.isAIP62Standard) {\n        return await this.walletStandardCore.signMessage(message, this._wallet);\n      }\n      const response = await this._wallet.signMessage(message);\n      return response;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignMessageError(errMsg).message;\n    }\n  }\n  async submitTransaction(transaction) {\n    try {\n      this.ensureWalletExists(this._wallet);\n      const { additionalSignersAuthenticators } = transaction;\n      const transactionType = additionalSignersAuthenticators !== void 0 ? \"multi-agent\" : \"simple\";\n      this.recordEvent(\"submit_transaction\", {\n        transaction_type: transactionType\n      });\n      if (this._wallet.submitTransaction) {\n        const pendingTransaction = await this._wallet.submitTransaction(transaction);\n        return pendingTransaction;\n      }\n      const aptosConfig = getAptosConfig(this._network, this._dappConfig);\n      const aptos = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos(aptosConfig);\n      if (additionalSignersAuthenticators !== void 0) {\n        const multiAgentTxn = {\n          ...transaction,\n          additionalSignersAuthenticators\n        };\n        return aptos.transaction.submit.multiAgent(multiAgentTxn);\n      } else {\n        return aptos.transaction.submit.simple(transaction);\n      }\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignTransactionError(errMsg).message;\n    }\n  }\n  async onAccountChange() {\n    try {\n      this.ensureWalletExists(this._wallet);\n      await this._wallet.onAccountChange(\n        async (data) => {\n          this.setAccount(data);\n          await this.setAnsName();\n          this.recordEvent(\"account_change\");\n          this.emit(\"accountChange\", this._account);\n        }\n      );\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletAccountChangeError(errMsg).message;\n    }\n  }\n  async onNetworkChange() {\n    try {\n      this.ensureWalletExists(this._wallet);\n      await this._wallet.onNetworkChange(\n        async (data) => {\n          this.setNetwork(data);\n          await this.setAnsName();\n          this.emit(\"networkChange\", this._network);\n        }\n      );\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletNetworkChangeError(errMsg).message;\n    }\n  }\n  async changeNetwork(network) {\n    var _a;\n    try {\n      this.ensureWalletExists(this._wallet);\n      this.recordEvent(\"change_network_request\", {\n        from: (_a = this._network) == null ? void 0 : _a.name,\n        to: network\n      });\n      const chainId = network === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.DEVNET ? await fetchDevnetChainId() : _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToChainId[network];\n      if (this._wallet.changeNetwork) {\n        const networkInfo = {\n          name: network,\n          chainId\n        };\n        const response = await this._wallet.changeNetwork(networkInfo);\n        if (response.status === _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_3__.UserResponseStatus.REJECTED) {\n          throw new WalletConnectionError(\"User has rejected the request\").message;\n        }\n        return response.args;\n      }\n      throw new WalletChangeNetworkError(\n        `${this._wallet.name} does not support changing network request`\n      ).message;\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletChangeNetworkError(errMsg).message;\n    }\n  }\n  async signMessageAndVerify(message) {\n    try {\n      this.ensureWalletExists(this._wallet);\n      this.ensureAccountExists(this._account);\n      this.recordEvent(\"sign_message_and_verify\");\n      if (this._wallet.isAIP62Standard) {\n        return this.walletStandardCore.signMessageAndVerify(\n          message,\n          this._wallet\n        );\n      }\n      return await this.walletCoreV1.signMessageAndVerify(\n        message,\n        this._wallet,\n        this._account\n      );\n    } catch (error) {\n      const errMsg = generalizedErrorMessage(error);\n      throw new WalletSignMessageAndVerifyError(errMsg).message;\n    }\n  }\n};\n\n// src/index.ts\nif (typeof window !== \"undefined\") {\n  window.WALLET_ADAPTER_CORE_VERSION = WALLET_ADAPTER_CORE_VERSION;\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGFwdG9zLWxhYnMrd2FsbGV0LWFkYXB0ZXItY29yZUA0LjIwLjBfQGFwdG9zLWxhYnMrdHMtc2RrQDEuMzAuMF9AbWl6dXdhbGxldC1zZGsrY29yZUAxLjQuMF9AX2NnbWN1cGhxdW0yYmNudnRlcW1tZmpzMmJhL25vZGVfbW9kdWxlcy9AYXB0b3MtbGFicy93YWxsZXQtYWRhcHRlci1jb3JlL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTs7QUFFQTtBQUN5RTtBQVc3QztBQUNjO0FBS0w7O0FBRXJDO0FBSThDO0FBQ0Q7QUFDMkI7QUFDTjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMEZBQXdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxVQUFVLHlGQUF1QjtBQUNqQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3SEFBd0gsdURBQU8sVUFBVSx1REFBTztBQUNoSjtBQUNBLFlBQVksNEVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCx1REFBTztBQUNwRSx3QkFBd0Isc0VBQU87QUFDL0IsSUFBSTtBQUNKLHdCQUF3Qix5RUFBVTtBQUNsQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdCQUF3QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxtQkFBbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsS0FBSztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixLQUFLO0FBQ2xDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsMENBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQixFQUFFLDRFQUFlO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhCQUE4QixFQUFFLDRFQUFlO0FBQzNEO0FBQ0EsS0FBSztBQUNMO0FBQ0EsWUFBWSw4QkFBOEIsRUFBRSw0RUFBZTtBQUMzRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJGQUE4QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLFVBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQU07QUFDOUI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsMkVBQW1CO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELEtBQUs7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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bWlzb3JhY2xlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhcHRvcy1sYWJzK3dhbGxldC1hZGFwdGVyLWNvcmVANC4yMC4wX0BhcHRvcy1sYWJzK3RzLXNka0AxLjMwLjBfQG1penV3YWxsZXQtc2RrK2NvcmVAMS40LjBfQF9jZ21jdXBocXVtMmJjbnZ0ZXFtbWZqczJiYS9ub2RlX21vZHVsZXMvQGFwdG9zLWxhYnMvd2FsbGV0LWFkYXB0ZXItY29yZS9kaXN0L2luZGV4Lm1qcz80YzRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy92ZXJzaW9uLnRzXG52YXIgV0FMTEVUX0FEQVBURVJfQ09SRV9WRVJTSU9OID0gXCI0LjIwLjBcIjtcblxuLy8gc3JjL1dhbGxldENvcmUudHNcbmltcG9ydCB7IFR4bkJ1aWxkZXJUeXBlcyBhcyBUeG5CdWlsZGVyVHlwZXM0LCBCQ1MgYXMgQkNTMiB9IGZyb20gXCJhcHRvc1wiO1xuaW1wb3J0IHtcbiAgTmV0d29yayBhcyBOZXR3b3JrNCxcbiAgQWNjb3VudEFkZHJlc3MsXG4gIEFjY291bnRBdXRoZW50aWNhdG9yRWQyNTUxOSxcbiAgRWQyNTUxOVB1YmxpY0tleSxcbiAgRWQyNTUxOVNpZ25hdHVyZSxcbiAgQXB0b3MgYXMgQXB0b3MzLFxuICBnZW5lcmF0ZVJhd1RyYW5zYWN0aW9uLFxuICBTaW1wbGVUcmFuc2FjdGlvbixcbiAgTmV0d29ya1RvQ2hhaW5JZFxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgRXZlbnRFbWl0dGVyMiBmcm9tIFwiZXZlbnRlbWl0dGVyM1wiO1xuaW1wb3J0IHtcbiAgZ2V0QXB0b3NXYWxsZXRzLFxuICBVc2VyUmVzcG9uc2VTdGF0dXMgYXMgVXNlclJlc3BvbnNlU3RhdHVzMixcbiAgaXNXYWxsZXRXaXRoUmVxdWlyZWRGZWF0dXJlU2V0XG59IGZyb20gXCJAYXB0b3MtbGFicy93YWxsZXQtc3RhbmRhcmRcIjtcblxuLy8gc3JjL0FJUDYyU3RhbmRhcmRXYWxsZXRzL3Nka1dhbGxldHMudHNcbmltcG9ydCB7XG4gIEFwdG9zQ29ubmVjdEFwcGxlV2FsbGV0LFxuICBBcHRvc0Nvbm5lY3RHb29nbGVXYWxsZXRcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hZGFwdGVyLXBsdWdpblwiO1xuaW1wb3J0IHsgTmV0d29yayB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IERldlRXYWxsZXQsIFRXYWxsZXQgfSBmcm9tIFwiQGF0b21yaWdzbGFiL2FwdG9zLXdhbGxldC1hZGFwdGVyXCI7XG5pbXBvcnQgeyBNaXp1V2FsbGV0IH0gZnJvbSBcIkBtaXp1d2FsbGV0LXNkay9hcHRvcy13YWxsZXQtYWRhcHRlclwiO1xuZnVuY3Rpb24gZ2V0U0RLV2FsbGV0cyhkYXBwQ29uZmlnKSB7XG4gIGNvbnN0IHNka1dhbGxldHMgPSBbXTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBzZGtXYWxsZXRzLnB1c2goXG4gICAgICBuZXcgQXB0b3NDb25uZWN0R29vZ2xlV2FsbGV0KHtcbiAgICAgICAgbmV0d29yazogZGFwcENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogZGFwcENvbmZpZy5uZXR3b3JrLFxuICAgICAgICBkYXBwSWQ6IGRhcHBDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGRhcHBDb25maWcuYXB0b3NDb25uZWN0RGFwcElkLFxuICAgICAgICAuLi5kYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLmFwdG9zQ29ubmVjdFxuICAgICAgfSksXG4gICAgICBuZXcgQXB0b3NDb25uZWN0QXBwbGVXYWxsZXQoe1xuICAgICAgICBuZXR3b3JrOiBkYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLm5ldHdvcmssXG4gICAgICAgIGRhcHBJZDogZGFwcENvbmZpZyA9PSBudWxsID8gdm9pZCAwIDogZGFwcENvbmZpZy5hcHRvc0Nvbm5lY3REYXBwSWQsXG4gICAgICAgIC4uLmRhcHBDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGRhcHBDb25maWcuYXB0b3NDb25uZWN0XG4gICAgICB9KVxuICAgICk7XG4gICAgaWYgKChkYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLm1penV3YWxsZXQpICYmIChkYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLm5ldHdvcmspICYmIFtOZXR3b3JrLk1BSU5ORVQsIE5ldHdvcmsuVEVTVE5FVF0uaW5jbHVkZXMoZGFwcENvbmZpZy5uZXR3b3JrKSkge1xuICAgICAgc2RrV2FsbGV0cy5wdXNoKFxuICAgICAgICBuZXcgTWl6dVdhbGxldCh7XG4gICAgICAgICAgbmV0d29yazogZGFwcENvbmZpZy5uZXR3b3JrLFxuICAgICAgICAgIG1hbmlmZXN0VVJMOiBkYXBwQ29uZmlnLm1penV3YWxsZXQubWFuaWZlc3RVUkwsXG4gICAgICAgICAgYXBwSWQ6IGRhcHBDb25maWcubWl6dXdhbGxldC5hcHBJZFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgaWYgKChkYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLm5ldHdvcmspID09PSBOZXR3b3JrLk1BSU5ORVQpIHtcbiAgICBzZGtXYWxsZXRzLnB1c2gobmV3IFRXYWxsZXQoKSk7XG4gIH0gZWxzZSB7XG4gICAgc2RrV2FsbGV0cy5wdXNoKG5ldyBEZXZUV2FsbGV0KCkpO1xuICB9XG4gIHJldHVybiBzZGtXYWxsZXRzO1xufVxuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgV2FsbGV0UmVhZHlTdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFdhbGxldFJlYWR5U3RhdGUyKSA9PiB7XG4gIFdhbGxldFJlYWR5U3RhdGUyW1wiSW5zdGFsbGVkXCJdID0gXCJJbnN0YWxsZWRcIjtcbiAgV2FsbGV0UmVhZHlTdGF0ZTJbXCJOb3REZXRlY3RlZFwiXSA9IFwiTm90RGV0ZWN0ZWRcIjtcbiAgV2FsbGV0UmVhZHlTdGF0ZTJbXCJMb2FkYWJsZVwiXSA9IFwiTG9hZGFibGVcIjtcbiAgV2FsbGV0UmVhZHlTdGF0ZTJbXCJVbnN1cHBvcnRlZFwiXSA9IFwiVW5zdXBwb3J0ZWRcIjtcbiAgcmV0dXJuIFdhbGxldFJlYWR5U3RhdGUyO1xufSkoV2FsbGV0UmVhZHlTdGF0ZSB8fCB7fSk7XG52YXIgTmV0d29ya05hbWUgPSAvKiBAX19QVVJFX18gKi8gKChOZXR3b3JrTmFtZTIpID0+IHtcbiAgTmV0d29ya05hbWUyW1wiTWFpbm5ldFwiXSA9IFwibWFpbm5ldFwiO1xuICBOZXR3b3JrTmFtZTJbXCJUZXN0bmV0XCJdID0gXCJ0ZXN0bmV0XCI7XG4gIE5ldHdvcmtOYW1lMltcIkRldm5ldFwiXSA9IFwiZGV2bmV0XCI7XG4gIHJldHVybiBOZXR3b3JrTmFtZTI7XG59KShOZXR3b3JrTmFtZSB8fCB7fSk7XG52YXIgQ2hhaW5JZFRvQW5zU3VwcG9ydGVkTmV0d29ya01hcCA9IHtcbiAgXCIxXCI6IFwibWFpbm5ldFwiLFxuICBcIjJcIjogXCJ0ZXN0bmV0XCJcbn07XG52YXIgQVBUT1NfQ09OTkVDVF9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcHRvc2Nvbm5lY3QuYXBwXCI7XG52YXIgQVBUT1NfQ09OTkVDVF9BQ0NPVU5UX1VSTCA9IFwiaHR0cHM6Ly9hcHRvc2Nvbm5lY3QuYXBwL2Rhc2hib2FyZC9tYWluLWFjY291bnRcIjtcblxuLy8gc3JjL2Vycm9yL2luZGV4LnRzXG52YXIgV2FsbGV0RXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gIH1cbn07XG52YXIgV2FsbGV0Tm90U2VsZWN0ZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0Tm90U2VsZWN0ZWRFcnJvclwiO1xuICB9XG59O1xudmFyIFdhbGxldE5vdFJlYWR5RXJyb3IgPSBjbGFzcyBleHRlbmRzIFdhbGxldEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm5hbWUgPSBcIldhbGxldE5vdFJlYWR5RXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXRDb25uZWN0aW9uRXJyb3IgPSBjbGFzcyBleHRlbmRzIFdhbGxldEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm5hbWUgPSBcIldhbGxldENvbm5lY3Rpb25FcnJvclwiO1xuICB9XG59O1xudmFyIFdhbGxldERpc2Nvbm5lY3Rpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0RGlzY29ubmVjdGlvbkVycm9yXCI7XG4gIH1cbn07XG52YXIgV2FsbGV0QWNjb3VudEVycm9yID0gY2xhc3MgZXh0ZW5kcyBXYWxsZXRFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5uYW1lID0gXCJXYWxsZXRBY2NvdW50RXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXRHZXROZXR3b3JrRXJyb3IgPSBjbGFzcyBleHRlbmRzIFdhbGxldEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm5hbWUgPSBcIldhbGxldEdldE5ldHdvcmtFcnJvclwiO1xuICB9XG59O1xudmFyIFdhbGxldEFjY291bnRDaGFuZ2VFcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0QWNjb3VudENoYW5nZUVycm9yXCI7XG4gIH1cbn07XG52YXIgV2FsbGV0TmV0d29ya0NoYW5nZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBXYWxsZXRFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5uYW1lID0gXCJXYWxsZXROZXR3b3JrQ2hhbmdlRXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXROb3RDb25uZWN0ZWRFcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0Tm90Q29ubmVjdGVkRXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXRTaWduTWVzc2FnZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBXYWxsZXRFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5uYW1lID0gXCJXYWxsZXRTaWduTWVzc2FnZUVycm9yXCI7XG4gIH1cbn07XG52YXIgV2FsbGV0U2lnbk1lc3NhZ2VBbmRWZXJpZnlFcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0U2lnbk1lc3NhZ2VBbmRWZXJpZnlFcnJvclwiO1xuICB9XG59O1xudmFyIFdhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3IgPSBjbGFzcyBleHRlbmRzIFdhbGxldEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm5hbWUgPSBcIldhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXRTaWduVHJhbnNhY3Rpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0U2lnblRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgfVxufTtcbnZhciBXYWxsZXROb3RTdXBwb3J0ZWRNZXRob2QgPSBjbGFzcyBleHRlbmRzIFdhbGxldEVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLm5hbWUgPSBcIldhbGxldE5vdFN1cHBvcnRlZE1ldGhvZFwiO1xuICB9XG59O1xudmFyIFdhbGxldENoYW5nZU5ldHdvcmtFcnJvciA9IGNsYXNzIGV4dGVuZHMgV2FsbGV0RXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMubmFtZSA9IFwiV2FsbGV0Q2hhbmdlTmV0d29ya0Vycm9yXCI7XG4gIH1cbn07XG5cbi8vIHNyYy9MZWdhY3lXYWxsZXRQbHVnaW5zL1dhbGxldENvcmVWMS50c1xuaW1wb3J0IHsgSGV4U3RyaW5nIH0gZnJvbSBcImFwdG9zXCI7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gXCJldmVudGVtaXR0ZXIzXCI7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyXCI7XG5pbXBvcnQge1xuICBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZCBhcyBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZDJcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IG5hY2wgZnJvbSBcInR3ZWV0bmFjbFwiO1xuXG4vLyBzcmMvTGVnYWN5V2FsbGV0UGx1Z2lucy9jb252ZXJzaW9uLnRzXG5pbXBvcnQge1xuICBOZXR3b3JrIGFzIE5ldHdvcmsyLFxuICBUeXBlVGFnLFxuICBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZFxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBCQ1MsIFR4bkJ1aWxkZXJUeXBlcyB9IGZyb20gXCJhcHRvc1wiO1xuZnVuY3Rpb24gY29udmVydE5ldHdvcmsobmV0d29ya0luZm8pIHtcbiAgc3dpdGNoIChuZXR3b3JrSW5mbyA9PSBudWxsID8gdm9pZCAwIDogbmV0d29ya0luZm8ubmFtZSkge1xuICAgIGNhc2UgXCJtYWlubmV0XCI6XG4gICAgICByZXR1cm4gTmV0d29yazIuTUFJTk5FVDtcbiAgICBjYXNlIFwidGVzdG5ldFwiOlxuICAgICAgcmV0dXJuIE5ldHdvcmsyLlRFU1RORVQ7XG4gICAgY2FzZSBcImRldm5ldFwiOlxuICAgICAgcmV0dXJuIE5ldHdvcmsyLkRFVk5FVDtcbiAgICBjYXNlIFwibG9jYWxcIjpcbiAgICAgIHJldHVybiBOZXR3b3JrMi5MT0NBTDtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBcHRvcyBuZXR3b3JrIG5hbWVcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbnZlcnRWMlRyYW5zYWN0aW9uUGF5bG9hZFRvVjFCQ1NQYXlsb2FkKHBheWxvYWQpIHtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IEJDUy5EZXNlcmlhbGl6ZXIocGF5bG9hZC5iY3NUb0J5dGVzKCkpO1xuICByZXR1cm4gVHhuQnVpbGRlclR5cGVzLlRyYW5zYWN0aW9uUGF5bG9hZC5kZXNlcmlhbGl6ZShkZXNlcmlhbGl6ZXIpO1xufVxuZnVuY3Rpb24gY29udmVydFYyUGF5bG9hZFRvVjFKU09OUGF5bG9hZChwYXlsb2FkKSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmIChcImJ5dGVjb2RlXCIgaW4gcGF5bG9hZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInNjcmlwdCBwYXlsb2FkIG5vdCBzdXBwb3J0ZWRcIik7XG4gIH0gZWxzZSBpZiAoXCJtdWx0aXNpZ0FkZHJlc3NcIiBpbiBwYXlsb2FkKSB7XG4gICAgY29uc3Qgc3RyaW5nVHlwZVRhZ3MgPSAoX2EgPSBwYXlsb2FkLnR5cGVBcmd1bWVudHMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5tYXAoXG4gICAgICAodHlwZVRhZykgPT4ge1xuICAgICAgICBpZiAodHlwZVRhZyBpbnN0YW5jZW9mIFR5cGVUYWcpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZVRhZy50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlVGFnO1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgbmV3UGF5bG9hZCA9IHtcbiAgICAgIHR5cGU6IFwibXVsdGlzaWdfcGF5bG9hZFwiLFxuICAgICAgbXVsdGlzaWdfYWRkcmVzczogcGF5bG9hZC5tdWx0aXNpZ0FkZHJlc3MudG9TdHJpbmcoKSxcbiAgICAgIGZ1bmN0aW9uOiBwYXlsb2FkLmZ1bmN0aW9uLFxuICAgICAgdHlwZV9hcmd1bWVudHM6IHN0cmluZ1R5cGVUYWdzIHx8IFtdLFxuICAgICAgYXJndW1lbnRzOiBwYXlsb2FkLmZ1bmN0aW9uQXJndW1lbnRzXG4gICAgfTtcbiAgICByZXR1cm4gbmV3UGF5bG9hZDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdHJpbmdUeXBlVGFncyA9IChfYiA9IHBheWxvYWQudHlwZUFyZ3VtZW50cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcChcbiAgICAgICh0eXBlVGFnKSA9PiB7XG4gICAgICAgIGlmICh0eXBlVGFnIGluc3RhbmNlb2YgVHlwZVRhZykge1xuICAgICAgICAgIHJldHVybiB0eXBlVGFnLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGVUYWc7XG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBuZXdQYXlsb2FkID0ge1xuICAgICAgdHlwZTogXCJlbnRyeV9mdW5jdGlvbl9wYXlsb2FkXCIsXG4gICAgICBmdW5jdGlvbjogcGF5bG9hZC5mdW5jdGlvbixcbiAgICAgIHR5cGVfYXJndW1lbnRzOiBzdHJpbmdUeXBlVGFncyB8fCBbXSxcbiAgICAgIGFyZ3VtZW50czogcGF5bG9hZC5mdW5jdGlvbkFyZ3VtZW50c1xuICAgIH07XG4gICAgcmV0dXJuIG5ld1BheWxvYWQ7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbnZlcnRQYXlsb2FkSW5wdXRWMVRvVjIoaW5wdXRWMSkge1xuICBpZiAoXCJmdW5jdGlvblwiIGluIGlucHV0VjEpIHtcbiAgICBjb25zdCBpbnB1dFYyID0ge1xuICAgICAgZnVuY3Rpb246IGlucHV0VjEuZnVuY3Rpb24sXG4gICAgICBmdW5jdGlvbkFyZ3VtZW50czogaW5wdXRWMS5hcmd1bWVudHMsXG4gICAgICB0eXBlQXJndW1lbnRzOiBpbnB1dFYxLnR5cGVfYXJndW1lbnRzXG4gICAgfTtcbiAgICByZXR1cm4gaW5wdXRWMjtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJQYXlsb2FkIHR5cGUgbm90IHN1cHBvcnRlZFwiKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVHJhbnNhY3Rpb25QYXlsb2FkRnJvbVYxSW5wdXQoYXB0b3NDb25maWcsIGlucHV0VjEpIHtcbiAgaWYgKFwiZnVuY3Rpb25cIiBpbiBpbnB1dFYxKSB7XG4gICAgY29uc3QgaW5wdXRWMiA9IGNvbnZlcnRQYXlsb2FkSW5wdXRWMVRvVjIoaW5wdXRWMSk7XG4gICAgcmV0dXJuIGdlbmVyYXRlVHJhbnNhY3Rpb25QYXlsb2FkKHsgLi4uaW5wdXRWMiwgYXB0b3NDb25maWcgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiUGF5bG9hZCB0eXBlIG5vdCBzdXBwb3J0ZWRcIik7XG59XG5cbi8vIHNyYy91dGlscy9oZWxwZXJzLnRzXG5pbXBvcnQge1xuICBBcHRvcyxcbiAgQXB0b3NDb25maWcgYXMgQXB0b3NDb25maWcyLFxuICBIZXgsXG4gIE5ldHdvcmsgYXMgTmV0d29yazMsXG4gIE5ldHdvcmtUb05vZGVBUEksXG4gIFNlcmlhbGl6YWJsZVxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBpc01vYmlsZSgpIHtcbiAgcmV0dXJuIC9Nb2JpbGV8aVAoaG9uZXxvZHxhZCl8QW5kcm9pZHxCbGFja0JlcnJ5fElFTW9iaWxlfEtpbmRsZXxOZXRGcm9udHxTaWxrLUFjY2VsZXJhdGVkfChocHd8d2ViKU9TfEZlbm5lY3xNaW5pbW98T3BlcmEgTShvYml8aW5pKXxCbGF6ZXJ8RG9sZmlufERvbHBoaW58U2t5ZmlyZXxadW5lL2kudGVzdChcbiAgICBuYXZpZ2F0b3IudXNlckFnZW50XG4gICk7XG59XG5mdW5jdGlvbiBpc0luQXBwQnJvd3NlcigpIHtcbiAgY29uc3QgaXNJcGhvbmUgPSAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QoXG4gICAgbmF2aWdhdG9yLnVzZXJBZ2VudFxuICApO1xuICBjb25zdCBpc0FuZHJvaWQgPSAvKEFuZHJvaWQpLipWZXJzaW9uXFwvW1xcZC5dKy4qQ2hyb21lXFwvW15cXHNdKyBNb2JpbGUvaS50ZXN0KFxuICAgIG5hdmlnYXRvci51c2VyQWdlbnRcbiAgKTtcbiAgcmV0dXJuIGlzSXBob25lIHx8IGlzQW5kcm9pZDtcbn1cbmZ1bmN0aW9uIGlzUmVkaXJlY3RhYmxlKCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhbmF2aWdhdG9yKVxuICAgIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGlzTW9iaWxlKCkgJiYgIWlzSW5BcHBCcm93c2VyKCk7XG59XG5mdW5jdGlvbiBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcikge1xuICByZXR1cm4gdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yO1xufVxudmFyIGFyZUJDU0FyZ3VtZW50cyA9IChhcmdzKSA9PiB7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBhcmdzLmV2ZXJ5KFxuICAgIChhcmcpID0+IGFyZyBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZVxuICApO1xufTtcbnZhciBnZXRBcHRvc0NvbmZpZyA9IChuZXR3b3JrSW5mbywgZGFwcENvbmZpZykgPT4ge1xuICBpZiAoIW5ldHdvcmtJbmZvKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5kZWZpbmVkIG5ldHdvcmtcIik7XG4gIH1cbiAgaWYgKGlzQXB0b3NOZXR3b3JrKG5ldHdvcmtJbmZvKSkge1xuICAgIHJldHVybiBuZXcgQXB0b3NDb25maWcyKHtcbiAgICAgIG5ldHdvcms6IGNvbnZlcnROZXR3b3JrKG5ldHdvcmtJbmZvKSxcbiAgICAgIGNsaWVudENvbmZpZzogeyBBUElfS0VZOiBkYXBwQ29uZmlnID09IG51bGwgPyB2b2lkIDAgOiBkYXBwQ29uZmlnLmFwdG9zQXBpS2V5IH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbmV3IEFwdG9zQ29uZmlnMih7XG4gICAgbmV0d29yazogTmV0d29yazMuQ1VTVE9NLFxuICAgIGZ1bGxub2RlOiBuZXR3b3JrSW5mby51cmwsXG4gICAgY2xpZW50Q29uZmlnOiB7IEFQSV9LRVk6IGRhcHBDb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGRhcHBDb25maWcuYXB0b3NBcGlLZXkgfVxuICB9KTtcbn07XG52YXIgaXNBcHRvc05ldHdvcmsgPSAobmV0d29ya0luZm8pID0+IHtcbiAgaWYgKCFuZXR3b3JrSW5mbykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuZGVmaW5lZCBuZXR3b3JrXCIpO1xuICB9XG4gIHJldHVybiBOZXR3b3JrVG9Ob2RlQVBJW25ldHdvcmtJbmZvLm5hbWVdICE9PSB2b2lkIDA7XG59O1xudmFyIGZldGNoRGV2bmV0Q2hhaW5JZCA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXB0b3MgPSBuZXcgQXB0b3MoKTtcbiAgcmV0dXJuIGF3YWl0IGFwdG9zLmdldENoYWluSWQoKTtcbn07XG52YXIgaGFuZGxlUHVibGlzaFBhY2thZ2VUcmFuc2FjdGlvbiA9ICh0cmFuc2FjdGlvbklucHV0KSA9PiB7XG4gIGxldCBtZXRhZGF0YUJ5dGVzID0gdHJhbnNhY3Rpb25JbnB1dC5kYXRhLmZ1bmN0aW9uQXJndW1lbnRzWzBdO1xuICBpZiAodHlwZW9mIG1ldGFkYXRhQnl0ZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBtZXRhZGF0YUJ5dGVzID0gSGV4LmZyb21IZXhJbnB1dChtZXRhZGF0YUJ5dGVzKS50b1VpbnQ4QXJyYXkoKTtcbiAgfVxuICBsZXQgYnl0ZUNvZGUgPSB0cmFuc2FjdGlvbklucHV0LmRhdGEuZnVuY3Rpb25Bcmd1bWVudHNbMV07XG4gIGlmIChBcnJheS5pc0FycmF5KGJ5dGVDb2RlKSkge1xuICAgIGJ5dGVDb2RlID0gYnl0ZUNvZGUubWFwKChieXRlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGJ5dGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIEhleC5mcm9tSGV4SW5wdXQoYnl0ZSkudG9VaW50OEFycmF5KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYnl0ZTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgV2FsbGV0U2lnbkFuZFN1Ym1pdE1lc3NhZ2VFcnJvcihcbiAgICAgIFwiVGhlIGJ5dGVjb2RlIGFyZ3VtZW50IG11c3QgYmUgYW4gYXJyYXkuXCJcbiAgICApLm1lc3NhZ2U7XG4gIH1cbiAgcmV0dXJuIHsgbWV0YWRhdGFCeXRlcywgYnl0ZUNvZGUgfTtcbn07XG5cbi8vIHNyYy91dGlscy9sb2NhbFN0b3JhZ2UudHNcbnZhciBMT0NBTF9TVE9SQUdFX0lURU1fS0VZID0gXCJBcHRvc1dhbGxldE5hbWVcIjtcbmZ1bmN0aW9uIHNldExvY2FsU3RvcmFnZSh3YWxsZXROYW1lKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExPQ0FMX1NUT1JBR0VfSVRFTV9LRVksIHdhbGxldE5hbWUpO1xufVxuZnVuY3Rpb24gcmVtb3ZlTG9jYWxTdG9yYWdlKCkge1xuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMT0NBTF9TVE9SQUdFX0lURU1fS0VZKTtcbn1cbmZ1bmN0aW9uIGdldExvY2FsU3RvcmFnZSgpIHtcbiAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oTE9DQUxfU1RPUkFHRV9JVEVNX0tFWSk7XG59XG5cbi8vIHNyYy91dGlscy9zY29wZVBvbGxpbmdEZXRlY3Rpb25TdHJhdGVneS50c1xuZnVuY3Rpb24gc2NvcGVQb2xsaW5nRGV0ZWN0aW9uU3RyYXRlZ3koZGV0ZWN0KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IGRpc3Bvc2VycyA9IFtdO1xuICBmdW5jdGlvbiBkZXRlY3RBbmREaXNwb3NlKCkge1xuICAgIGNvbnN0IGRldGVjdGVkID0gZGV0ZWN0KCk7XG4gICAgaWYgKGRldGVjdGVkKSB7XG4gICAgICBmb3IgKGNvbnN0IGRpc3Bvc2Ugb2YgZGlzcG9zZXJzKSB7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChkZXRlY3RBbmREaXNwb3NlLCAxZTMpO1xuICBkaXNwb3NlcnMucHVzaCgoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKSk7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImxvYWRpbmdcIikge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGRldGVjdEFuZERpc3Bvc2UsIHtcbiAgICAgIG9uY2U6IHRydWVcbiAgICB9KTtcbiAgICBkaXNwb3NlcnMucHVzaChcbiAgICAgICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGRldGVjdEFuZERpc3Bvc2UpXG4gICAgKTtcbiAgfVxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGRldGVjdEFuZERpc3Bvc2UsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBkaXNwb3NlcnMucHVzaCgoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZGV0ZWN0QW5kRGlzcG9zZSkpO1xuICB9XG4gIGRldGVjdEFuZERpc3Bvc2UoKTtcbn1cblxuLy8gc3JjL3V0aWxzL3dhbGxldFNlbGVjdG9yLnRzXG5mdW5jdGlvbiBwYXJ0aXRpb25XYWxsZXRzKHdhbGxldHMsIHBhcnRpdGlvbkZ1bmN0aW9uID0gaXNJbnN0YWxsZWRPckxvYWRhYmxlKSB7XG4gIGNvbnN0IGRlZmF1bHRXYWxsZXRzID0gW107XG4gIGNvbnN0IG1vcmVXYWxsZXRzID0gW107XG4gIGZvciAoY29uc3Qgd2FsbGV0IG9mIHdhbGxldHMpIHtcbiAgICBpZiAocGFydGl0aW9uRnVuY3Rpb24od2FsbGV0KSlcbiAgICAgIGRlZmF1bHRXYWxsZXRzLnB1c2god2FsbGV0KTtcbiAgICBlbHNlXG4gICAgICBtb3JlV2FsbGV0cy5wdXNoKHdhbGxldCk7XG4gIH1cbiAgcmV0dXJuIHsgZGVmYXVsdFdhbGxldHMsIG1vcmVXYWxsZXRzIH07XG59XG5mdW5jdGlvbiBpc0luc3RhbGxlZE9yTG9hZGFibGUod2FsbGV0KSB7XG4gIHJldHVybiB3YWxsZXQucmVhZHlTdGF0ZSA9PT0gXCJJbnN0YWxsZWRcIiAvKiBJbnN0YWxsZWQgKi8gfHwgd2FsbGV0LnJlYWR5U3RhdGUgPT09IFwiTG9hZGFibGVcIiAvKiBMb2FkYWJsZSAqLztcbn1cbmZ1bmN0aW9uIGlzSW5zdGFsbFJlcXVpcmVkKHdhbGxldCkge1xuICBjb25zdCBpc1dhbGxldFJlYWR5ID0gaXNJbnN0YWxsZWRPckxvYWRhYmxlKHdhbGxldCk7XG4gIGNvbnN0IGlzTW9iaWxlMiA9ICFpc1dhbGxldFJlYWR5ICYmIGlzUmVkaXJlY3RhYmxlKCk7XG4gIHJldHVybiAhaXNNb2JpbGUyICYmICFpc1dhbGxldFJlYWR5O1xufVxuZnVuY3Rpb24gdHJ1bmNhdGVBZGRyZXNzKGFkZHJlc3MpIHtcbiAgaWYgKCFhZGRyZXNzKVxuICAgIHJldHVybjtcbiAgcmV0dXJuIGAke2FkZHJlc3Muc2xpY2UoMCwgNil9Li4uJHthZGRyZXNzLnNsaWNlKC01KX1gO1xufVxuZnVuY3Rpb24gaXNBcHRvc0Nvbm5lY3RXYWxsZXQod2FsbGV0KSB7XG4gIGlmICghd2FsbGV0LnVybClcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB3YWxsZXQudXJsLnN0YXJ0c1dpdGgoQVBUT1NfQ09OTkVDVF9CQVNFX1VSTCk7XG59XG5mdW5jdGlvbiBnZXRBcHRvc0Nvbm5lY3RXYWxsZXRzKHdhbGxldHMpIHtcbiAgY29uc3QgeyBkZWZhdWx0V2FsbGV0cywgbW9yZVdhbGxldHMgfSA9IHBhcnRpdGlvbldhbGxldHMoXG4gICAgd2FsbGV0cyxcbiAgICBpc0FwdG9zQ29ubmVjdFdhbGxldFxuICApO1xuICByZXR1cm4geyBhcHRvc0Nvbm5lY3RXYWxsZXRzOiBkZWZhdWx0V2FsbGV0cywgb3RoZXJXYWxsZXRzOiBtb3JlV2FsbGV0cyB9O1xufVxuZnVuY3Rpb24gZ3JvdXBBbmRTb3J0V2FsbGV0cyh3YWxsZXRzLCBvcHRpb25zKSB7XG4gIGNvbnN0IHsgYXB0b3NDb25uZWN0V2FsbGV0cywgb3RoZXJXYWxsZXRzIH0gPSBnZXRBcHRvc0Nvbm5lY3RXYWxsZXRzKHdhbGxldHMpO1xuICBjb25zdCB7IGRlZmF1bHRXYWxsZXRzLCBtb3JlV2FsbGV0cyB9ID0gcGFydGl0aW9uV2FsbGV0cyhvdGhlcldhbGxldHMpO1xuICBpZiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5zb3J0QXB0b3NDb25uZWN0V2FsbGV0cykge1xuICAgIGFwdG9zQ29ubmVjdFdhbGxldHMuc29ydChvcHRpb25zLnNvcnRBcHRvc0Nvbm5lY3RXYWxsZXRzKTtcbiAgfVxuICBpZiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5zb3J0QXZhaWxhYmxlV2FsbGV0cykge1xuICAgIGRlZmF1bHRXYWxsZXRzLnNvcnQob3B0aW9ucy5zb3J0QXZhaWxhYmxlV2FsbGV0cyk7XG4gIH1cbiAgaWYgKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc29ydEluc3RhbGxhYmxlV2FsbGV0cykge1xuICAgIG1vcmVXYWxsZXRzLnNvcnQob3B0aW9ucy5zb3J0SW5zdGFsbGFibGVXYWxsZXRzKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFwdG9zQ29ubmVjdFdhbGxldHMsXG4gICAgYXZhaWxhYmxlV2FsbGV0czogZGVmYXVsdFdhbGxldHMsXG4gICAgaW5zdGFsbGFibGVXYWxsZXRzOiBtb3JlV2FsbGV0c1xuICB9O1xufVxuXG4vLyBzcmMvTGVnYWN5V2FsbGV0UGx1Z2lucy9XYWxsZXRDb3JlVjEudHNcbnZhciBXYWxsZXRDb3JlVjEgPSBjbGFzcyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGFzeW5jIGNvbm5lY3Qod2FsbGV0KSB7XG4gICAgY29uc3QgYWNjb3VudCA9IGF3YWl0IHdhbGxldC5jb25uZWN0KCk7XG4gICAgcmV0dXJuIGFjY291bnQ7XG4gIH1cbiAgYXN5bmMgcmVzb2x2ZVNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbihwYXlsb2FkRGF0YSwgbmV0d29yaywgd2FsbGV0LCB0cmFuc2FjdGlvbklucHV0LCBkYXBwQ29uZmlnKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICBpZiAoYXJlQkNTQXJndW1lbnRzKHBheWxvYWREYXRhLmZ1bmN0aW9uQXJndW1lbnRzKSkge1xuICAgICAgY29uc3QgYXB0b3NDb25maWcgPSBnZXRBcHRvc0NvbmZpZyhuZXR3b3JrLCBkYXBwQ29uZmlnKTtcbiAgICAgIGNvbnN0IG5ld1BheWxvYWQgPSBhd2FpdCBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZDIoe1xuICAgICAgICAuLi5wYXlsb2FkRGF0YSxcbiAgICAgICAgYXB0b3NDb25maWdcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgb2xkVHJhbnNhY3Rpb25QYXlsb2FkMiA9IGNvbnZlcnRWMlRyYW5zYWN0aW9uUGF5bG9hZFRvVjFCQ1NQYXlsb2FkKG5ld1BheWxvYWQpO1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2lnbkFuZFN1Ym1pdEJDU1RyYW5zYWN0aW9uKFxuICAgICAgICBvbGRUcmFuc2FjdGlvblBheWxvYWQyLFxuICAgICAgICB3YWxsZXQsXG4gICAgICAgIHtcbiAgICAgICAgICBtYXhfZ2FzX2Ftb3VudDogKChfYSA9IHRyYW5zYWN0aW9uSW5wdXQub3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm1heEdhc0Ftb3VudCkgPyBCaWdJbnQoKF9iID0gdHJhbnNhY3Rpb25JbnB1dC5vcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2IubWF4R2FzQW1vdW50KSA6IHZvaWQgMCxcbiAgICAgICAgICBnYXNfdW5pdF9wcmljZTogKChfYyA9IHRyYW5zYWN0aW9uSW5wdXQub3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmdhc1VuaXRQcmljZSkgPyBCaWdJbnQoKF9kID0gdHJhbnNhY3Rpb25JbnB1dC5vcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2QuZ2FzVW5pdFByaWNlKSA6IHZvaWQgMFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBvbGRUcmFuc2FjdGlvblBheWxvYWQgPSBjb252ZXJ0VjJQYXlsb2FkVG9WMUpTT05QYXlsb2FkKHBheWxvYWREYXRhKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zaWduQW5kU3VibWl0VHJhbnNhY3Rpb24ob2xkVHJhbnNhY3Rpb25QYXlsb2FkLCB3YWxsZXQsIHtcbiAgICAgIG1heF9nYXNfYW1vdW50OiAoKF9lID0gdHJhbnNhY3Rpb25JbnB1dC5vcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2UubWF4R2FzQW1vdW50KSA/IEJpZ0ludCgoX2YgPSB0cmFuc2FjdGlvbklucHV0Lm9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5tYXhHYXNBbW91bnQpIDogdm9pZCAwLFxuICAgICAgZ2FzX3VuaXRfcHJpY2U6ICgoX2cgPSB0cmFuc2FjdGlvbklucHV0Lm9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfZy5nYXNVbml0UHJpY2UpID8gQmlnSW50KChfaCA9IHRyYW5zYWN0aW9uSW5wdXQub3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLmdhc1VuaXRQcmljZSkgOiB2b2lkIDBcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaWduQW5kU3VibWl0VHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIHdhbGxldCwgb3B0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdhbGxldC5zaWduQW5kU3VibWl0VHJhbnNhY3Rpb24oXG4gICAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgICBvcHRpb25zXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSB0eXBlb2YgZXJyb3IgPT0gXCJvYmplY3RcIiAmJiBcIm1lc3NhZ2VcIiBpbiBlcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcjtcbiAgICAgIHRocm93IG5ldyBXYWxsZXRTaWduQW5kU3VibWl0TWVzc2FnZUVycm9yKGVyck1zZykubWVzc2FnZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdEJDU1RyYW5zYWN0aW9uKHRyYW5zYWN0aW9uLCB3YWxsZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIShcInNpZ25BbmRTdWJtaXRCQ1NUcmFuc2FjdGlvblwiIGluIHdhbGxldCkpIHtcbiAgICAgIHRocm93IG5ldyBXYWxsZXROb3RTdXBwb3J0ZWRNZXRob2QoXG4gICAgICAgIGBTdWJtaXQgYSBCQ1MgVHJhbnNhY3Rpb24gaXMgbm90IHN1cHBvcnRlZCBieSAke3dhbGxldC5uYW1lfWBcbiAgICAgICkubWVzc2FnZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2FsbGV0LnNpZ25BbmRTdWJtaXRCQ1NUcmFuc2FjdGlvbihcbiAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVyck1zZyA9IHR5cGVvZiBlcnJvciA9PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIHdhbGxldCwgb3B0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdhbGxldC5zaWduVHJhbnNhY3Rpb24oXG4gICAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgICBvcHRpb25zXG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSB0eXBlb2YgZXJyb3IgPT0gXCJvYmplY3RcIiAmJiBcIm1lc3NhZ2VcIiBpbiBlcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBlcnJvcjtcbiAgICAgIHRocm93IG5ldyBXYWxsZXRTaWduVHJhbnNhY3Rpb25FcnJvcihlcnJNc2cpLm1lc3NhZ2U7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNpZ25NZXNzYWdlQW5kVmVyaWZ5KG1lc3NhZ2UsIHdhbGxldCwgYWNjb3VudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdhbGxldC5zaWduTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIGlmICghcmVzcG9uc2UpXG4gICAgICAgIHRocm93IG5ldyBXYWxsZXRTaWduTWVzc2FnZUFuZFZlcmlmeUVycm9yKFwiRmFpbGVkIHRvIHNpZ24gYSBtZXNzYWdlXCIpLm1lc3NhZ2U7XG4gICAgICBjb25zb2xlLmxvZyhcInNpZ25NZXNzYWdlQW5kVmVyaWZ5IHNpZ25NZXNzYWdlIHJlc3BvbnNlXCIsIHJlc3BvbnNlKTtcbiAgICAgIGxldCB2ZXJpZmllZCA9IGZhbHNlO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2Uuc2lnbmF0dXJlKSkge1xuICAgICAgICBjb25zdCB7IGZ1bGxNZXNzYWdlLCBzaWduYXR1cmUsIGJpdG1hcCB9ID0gcmVzcG9uc2U7XG4gICAgICAgIGlmIChiaXRtYXApIHtcbiAgICAgICAgICBjb25zdCBtaW5LZXlzUmVxdWlyZWQgPSBhY2NvdW50Lm1pbktleXNSZXF1aXJlZDtcbiAgICAgICAgICBpZiAoc2lnbmF0dXJlLmxlbmd0aCA8IG1pbktleXNSZXF1aXJlZCkge1xuICAgICAgICAgICAgdmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYml0cyA9IEFycmF5LmZyb20oYml0bWFwKS5mbGF0TWFwKFxuICAgICAgICAgICAgICAobikgPT4gQXJyYXkuZnJvbSh7IGxlbmd0aDogOCB9KS5tYXAoKF8sIGkpID0+IG4gPj4gaSAmIDEpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBiaXRzLm1hcCgoXywgaSkgPT4gaSkuZmlsdGVyKChpKSA9PiBiaXRzW2ldKTtcbiAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleXMgPSBhY2NvdW50LnB1YmxpY0tleTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRQdWJsaWNLZXlzID0gcHVibGljS2V5cy5maWx0ZXIoXG4gICAgICAgICAgICAgIChfLCBpKSA9PiBpbmRleC5pbmNsdWRlcyhpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHZlcmlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2lnbmF0dXJlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGlzU2lnVmVyaWZpZWQgPSBuYWNsLnNpZ24uZGV0YWNoZWQudmVyaWZ5KFxuICAgICAgICAgICAgICAgIEJ1ZmZlci5mcm9tKGZ1bGxNZXNzYWdlKSxcbiAgICAgICAgICAgICAgICBCdWZmZXIuZnJvbShzaWduYXR1cmVbaV0sIFwiaGV4XCIpLFxuICAgICAgICAgICAgICAgIEJ1ZmZlci5mcm9tKG1hdGNoZWRQdWJsaWNLZXlzW2ldLCBcImhleFwiKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoIWlzU2lnVmVyaWZpZWQpIHtcbiAgICAgICAgICAgICAgICB2ZXJpZmllZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBXYWxsZXRTaWduTWVzc2FnZUFuZFZlcmlmeUVycm9yKFwiRmFpbGVkIHRvIGdldCBhIGJpdG1hcFwiKS5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjdXJyZW50QWNjb3VudFB1YmxpY0tleSA9IG5ldyBIZXhTdHJpbmcoXG4gICAgICAgICAgYWNjb3VudC5wdWJsaWNLZXlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gbmV3IEhleFN0cmluZyhcbiAgICAgICAgICByZXNwb25zZS5zaWduYXR1cmVcbiAgICAgICAgKTtcbiAgICAgICAgdmVyaWZpZWQgPSBuYWNsLnNpZ24uZGV0YWNoZWQudmVyaWZ5KFxuICAgICAgICAgIEJ1ZmZlci5mcm9tKHJlc3BvbnNlLmZ1bGxNZXNzYWdlKSxcbiAgICAgICAgICBCdWZmZXIuZnJvbShzaWduYXR1cmUubm9QcmVmaXgoKSwgXCJoZXhcIiksXG4gICAgICAgICAgQnVmZmVyLmZyb20oY3VycmVudEFjY291bnRQdWJsaWNLZXkubm9QcmVmaXgoKSwgXCJoZXhcIilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2ZXJpZmllZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlQW5kVmVyaWZ5RXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL0xlZ2FjeVdhbGxldFBsdWdpbnMvdHlwZXMudHNcbmltcG9ydCB7IFR4bkJ1aWxkZXJUeXBlcyBhcyBUeG5CdWlsZGVyVHlwZXMzLCBUeXBlcyBhcyBUeXBlczMgfSBmcm9tIFwiYXB0b3NcIjtcblxuLy8gc3JjL0FJUDYyU3RhbmRhcmRXYWxsZXRzL1dhbGxldFN0YW5kYXJkLnRzXG5pbXBvcnQge1xuICBVc2VyUmVzcG9uc2VTdGF0dXNcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3dhbGxldC1zdGFuZGFyZFwiO1xuaW1wb3J0IHtcbiAgQW55UHVibGljS2V5LFxuICBBbnlQdWJsaWNLZXlWYXJpYW50LFxuICBNdWx0aUVkMjU1MTlTaWduYXR1cmUsXG4gIE11bHRpRWQyNTUxOVB1YmxpY0tleVxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG52YXIgV2FsbGV0U3RhbmRhcmRDb3JlID0gY2xhc3Mge1xuICBhc3luYyBjb25uZWN0KHdhbGxldCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2FsbGV0LmNvbm5lY3QoKTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQpIHtcbiAgICAgIHRocm93IG5ldyBXYWxsZXRDb25uZWN0aW9uRXJyb3IoXCJVc2VyIGhhcyByZWplY3RlZCB0aGUgcmVxdWVzdFwiKS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgfVxuICBhc3luYyBzaWduQW5kU3VibWl0VHJhbnNhY3Rpb24odHJhbnNhY3Rpb25JbnB1dCwgYXB0b3MsIGFjY291bnQsIHdhbGxldCwgc3RhbmRhcmRXYWxsZXRzKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YW5kYXJkV2FsbGV0ID0gc3RhbmRhcmRXYWxsZXRzLmZpbmQoXG4gICAgICAgIChzdGFuZGFyZFdhbGxldDIpID0+IHdhbGxldC5uYW1lID09PSBzdGFuZGFyZFdhbGxldDIubmFtZVxuICAgICAgKTtcbiAgICAgIGlmICgoKF9hID0gc3RhbmRhcmRXYWxsZXQgPT0gbnVsbCA/IHZvaWQgMCA6IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6c2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2EudmVyc2lvbikgIT09IFwiMS4xLjBcIikge1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbjIgPSBhd2FpdCBhcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgICAgIHNlbmRlcjogYWNjb3VudC5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25JbnB1dC5kYXRhLFxuICAgICAgICAgIG9wdGlvbnM6IHRyYW5zYWN0aW9uSW5wdXQub3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgd2FsbGV0LnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbihcbiAgICAgICAgICB0cmFuc2FjdGlvbjJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlMi5zdGF0dXMgPT09IFVzZXJSZXNwb25zZVN0YXR1cy5SRUpFQ1RFRCkge1xuICAgICAgICAgIHRocm93IG5ldyBXYWxsZXRDb25uZWN0aW9uRXJyb3IoXCJVc2VyIGhhcyByZWplY3RlZCB0aGUgcmVxdWVzdFwiKS5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTIuYXJncztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0ge1xuICAgICAgICBnYXNVbml0UHJpY2U6IChfYiA9IHRyYW5zYWN0aW9uSW5wdXQub3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmdhc1VuaXRQcmljZSxcbiAgICAgICAgbWF4R2FzQW1vdW50OiAoX2MgPSB0cmFuc2FjdGlvbklucHV0Lm9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5tYXhHYXNBbW91bnQsXG4gICAgICAgIHBheWxvYWQ6IHRyYW5zYWN0aW9uSW5wdXQuZGF0YVxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd2FsbGV0LnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbihcbiAgICAgICAgdHJhbnNhY3Rpb25cbiAgICAgICk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdhbGxldENvbm5lY3Rpb25FcnJvcihcIlVzZXIgaGFzIHJlamVjdGVkIHRoZSByZXF1ZXN0XCIpLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25PcklucHV0LCB3YWxsZXQsIGFzRmVlUGF5ZXIpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdhbGxldC5zaWduVHJhbnNhY3Rpb24oXG4gICAgICB0cmFuc2FjdGlvbk9ySW5wdXQsXG4gICAgICBhc0ZlZVBheWVyXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQpIHtcbiAgICAgIHRocm93IG5ldyBXYWxsZXRDb25uZWN0aW9uRXJyb3IoXCJVc2VyIGhhcyByZWplY3RlZCB0aGUgcmVxdWVzdFwiKS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZShtZXNzYWdlLCB3YWxsZXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3YWxsZXQuc2lnbk1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VcbiAgICAgICk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdhbGxldENvbm5lY3Rpb25FcnJvcihcIlVzZXIgaGFzIHJlamVjdGVkIHRoZSByZXF1ZXN0XCIpLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZUFuZFZlcmlmeShtZXNzYWdlLCB3YWxsZXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3YWxsZXQuc2lnbk1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VcbiAgICAgICk7XG4gICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgd2FsbGV0LmFjY291bnQoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IFVzZXJSZXNwb25zZVN0YXR1cy5SRUpFQ1RFRCkge1xuICAgICAgICB0aHJvdyBuZXcgV2FsbGV0Q29ubmVjdGlvbkVycm9yKFwiRmFpbGVkIHRvIHNpZ24gYSBtZXNzYWdlXCIpLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICBpZiAoYWNjb3VudC5wdWJsaWNLZXkgaW5zdGFuY2VvZiBBbnlQdWJsaWNLZXkgJiYgYWNjb3VudC5wdWJsaWNLZXkudmFyaWFudCA9PT0gQW55UHVibGljS2V5VmFyaWFudC5LZXlsZXNzKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbGV0IHZlcmlmaWVkID0gZmFsc2U7XG4gICAgICBpZiAocmVzcG9uc2UuYXJncy5zaWduYXR1cmUgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlTaWduYXR1cmUpIHtcbiAgICAgICAgaWYgKCEoYWNjb3VudC5wdWJsaWNLZXkgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlQdWJsaWNLZXkpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlQW5kVmVyaWZ5RXJyb3IoXG4gICAgICAgICAgICBcIlB1YmxpYyBrZXkgYW5kIFNpZ25hdHVyZSB0eXBlIG1pc21hdGNoXCJcbiAgICAgICAgICApLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBmdWxsTWVzc2FnZSwgc2lnbmF0dXJlIH0gPSByZXNwb25zZS5hcmdzO1xuICAgICAgICBjb25zdCBiaXRtYXAgPSBzaWduYXR1cmUuYml0bWFwO1xuICAgICAgICBpZiAoYml0bWFwKSB7XG4gICAgICAgICAgY29uc3QgbWluS2V5c1JlcXVpcmVkID0gYWNjb3VudC5wdWJsaWNLZXkudGhyZXNob2xkO1xuICAgICAgICAgIGlmIChzaWduYXR1cmUuc2lnbmF0dXJlcy5sZW5ndGggPCBtaW5LZXlzUmVxdWlyZWQpIHtcbiAgICAgICAgICAgIHZlcmlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZlcmlmaWVkID0gYWNjb3VudC5wdWJsaWNLZXkudmVyaWZ5U2lnbmF0dXJlKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGZ1bGxNZXNzYWdlKSxcbiAgICAgICAgICAgICAgc2lnbmF0dXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZlcmlmaWVkID0gYWNjb3VudC5wdWJsaWNLZXkudmVyaWZ5U2lnbmF0dXJlKHtcbiAgICAgICAgICBtZXNzYWdlOiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocmVzcG9uc2UuYXJncy5mdWxsTWVzc2FnZSksXG4gICAgICAgICAgc2lnbmF0dXJlOiByZXNwb25zZS5hcmdzLnNpZ25hdHVyZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2ZXJpZmllZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlQW5kVmVyaWZ5RXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2dhL2luZGV4LnRzXG52YXIgR0E0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFwdG9zR0FJRCA9IFwiRy1HTlZWV0JMM0o5XCI7XG4gICAgdGhpcy5pbmplY3RHQSh0aGlzLmFwdG9zR0FJRCk7XG4gIH1cbiAgZ3RhZyhhLCBiLCBjKSB7XG4gICAgbGV0IGRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107XG4gICAgZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTtcbiAgfVxuICBpbmplY3RHQShnYUlEKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICByZXR1cm47XG4gICAgaWYgKCFnYUlEKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG4gICAgdmFyIG15U2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICBteVNjcmlwdC5zZXRBdHRyaWJ1dGUoXG4gICAgICBcInNyY1wiLFxuICAgICAgYGh0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9JHtnYUlEfWBcbiAgICApO1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIG15U2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhhdC5ndGFnKFwianNcIiwgbmV3IERhdGUoKSk7XG4gICAgICB0aGF0Lmd0YWcoXCJjb25maWdcIiwgYCR7Z2FJRH1gLCB7XG4gICAgICAgIHNlbmRfcGFnZV92aWV3OiBmYWxzZVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBoZWFkLmluc2VydEJlZm9yZShteVNjcmlwdCwgaGVhZC5jaGlsZHJlblsxXSk7XG4gIH1cbn07XG5cbi8vIHNyYy9BSVA2MlN0YW5kYXJkV2FsbGV0cy9yZWdpc3RyeS50c1xudmFyIGFwdG9zU3RhbmRhcmRTdXBwb3J0ZWRXYWxsZXRMaXN0ID0gW1xuICB7XG4gICAgbmFtZTogXCJOaWdodGx5XCIsXG4gICAgdXJsOiBcImh0dHBzOi8vY2hyb21ld2Vic3RvcmUuZ29vZ2xlLmNvbS9kZXRhaWwvbmlnaHRseS9maWlrb21tZGRiZWNjYW9pY29lam9uaWFtbW5hbGtmYT9obD1lblwiLFxuICAgIGljb246IFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF5T0M0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5Danh6ZG1jZ2RtVnljMmx2YmowaU1TNHhJaUJwWkQwaVYyRnljM1IzWVY4eElpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lOQ2drZ2RtbGxkMEp2ZUQwaU1DQXdJRGcxTVM0MUlEZzFNUzQxSWlCemRIbHNaVDBpWlc1aFlteGxMV0poWTJ0bmNtOTFibVE2Ym1WM0lEQWdNQ0E0TlRFdU5TQTROVEV1TlRzaUlIaHRiRHB6Y0dGalpUMGljSEpsYzJWeWRtVWlQZzBLUEhOMGVXeGxJSFI1Y0dVOUluUmxlSFF2WTNOeklqNE5DZ2t1YzNRd2UyWnBiR3c2SXpZd05qZEdPVHQ5RFFvSkxuTjBNWHRtYVd4c09pTkdOMFkzUmpjN2ZRMEtQQzl6ZEhsc1pUNE5DanhuUGcwS0NUeG5JR2xrUFNKWFlYSnpkSGRoWHpKZk1EQXdNREF3TVRRMk1EazJOVFF5TlRNeE9EQTVORFkwTmpBd01EQXdNRGcyTkRjNE5USXdNREl4TVRZNU1UZzJPRGhmSWo0TkNna0pQSEJoZEdnZ1kyeGhjM005SW5OME1DSWdaRDBpVFRFeU5Dd3dhRFl3TXk0Mll6WTRMalVzTUN3eE1qUXNOVFV1TlN3eE1qUXNNVEkwZGpZd015NDJZekFzTmpndU5TMDFOUzQxTERFeU5DMHhNalFzTVRJMFNERXlOR010TmpndU5Td3dMVEV5TkMwMU5TNDFMVEV5TkMweE1qUldNVEkwRFFvSkNRbERNQ3cxTlM0MUxEVTFMalVzTUN3eE1qUXNNSG9pTHo0TkNnazhMMmMrRFFvSlBHY2dhV1E5SWxkaGNuTjBkMkZmTXlJK0RRb0pDVHh3WVhSb0lHTnNZWE56UFNKemRERWlJR1E5SWswMk1qTXVOU3d4TnpBdU0yTXRNemN1TkN3MU1pNHlMVGcwTGpJc09EZ3VOQzB4TXprdU5Td3hNVEl1Tm1NdE1Ua3VNaTAxTGpNdE16Z3VPUzA0TFRVNExqTXROeTQ0WXkweE9TNDBMVEF1TWkwek9TNHhMREl1TmkwMU9DNHpMRGN1T0EwS0NRa0pZeTAxTlM0ekxUSTBMak10TVRBeUxqRXROakF1TXkweE16a3VOUzB4TVRJdU5tTXRNVEV1TXl3eU9DNDBMVFUwTGpnc01USTJMalF0TWk0MkxESTJNeTQwWXpBc01DMHhOaTQzTERjeExqVXNNVFFzTVRNeUxqbGpNQ3d3TERRMExqUXRNakF1TVN3M09TNDNMRGd1TWcwS0NRa0pZek0yTGprc01qa3VPU3d5TlM0eExEVTRMamNzTlRFdU1TdzRNeTQxWXpJeUxqUXNNakl1T1N3MU5TNDNMREl5TGprc05UVXVOeXd5TWk0NWN6TXpMak1zTUN3MU5TNDNMVEl5TGpoak1qWXRNalF1Tnl3eE5DNHpMVFV6TGpVc05URXVNUzA0TXk0MURRb0pDUWxqTXpVdU1pMHlPQzR6TERjNUxqY3RPQzR5TERjNUxqY3RPQzR5WXpNd0xqWXROakV1TkN3eE5DMHhNekl1T1N3eE5DMHhNekl1T1VNMk56Z3VNeXd5T1RZdU55dzJNelF1T1N3eE9UZ3VOeXcyTWpNdU5Td3hOekF1TTNvZ1RUSTFNeTR4TERReE5DNDREUW9KQ1FsakxUSTRMalF0TlRndU15MHpOaTR5TFRFek9DNHpMVEU0TGpNdE1qQXhMalZqTWpNdU55dzJNQ3cxTlM0NUxEZzJMamtzT1RRdU1pd3hNVFV1TTBNek1USXVPQ3d6TmpJdU15d3lPREl1TXl3ek9UUXVNU3d5TlRNdU1TdzBNVFF1T0hvZ1RUTXpOQzQ0TERVeE55NDFEUW9KQ1FsakxUSXlMalF0T1M0NUxUSTNMakV0TWprdU5DMHlOeTR4TFRJNUxqUmpNekF1TlMweE9TNHlMRGMxTGpRdE5DNDFMRGMyTGpnc05EQXVPVU16TmpBdU9TdzFNVFF1Tnl3ek5UTXNOVEkxTGpRc016TTBMamdzTlRFM0xqVjZJRTAwTWpVdU55dzJOemd1TncwS0NRa0pZeTB4Tml3d0xUSTVMVEV4TGpVdE1qa3RNalV1Tm5NeE15MHlOUzQyTERJNUxUSTFMalp6TWprc01URXVOU3d5T1N3eU5TNDJRelExTkM0M0xEWTJOeTR6TERRME1TNDNMRFkzT0M0M0xEUXlOUzQzTERZM09DNDNlaUJOTlRFMkxqY3NOVEUzTGpVTkNna0pDV010TVRndU1pdzRMVEkyTFRJdU9DMDBPUzQzTERFeExqVmpNUzQxTFRRMUxqUXNORFl1TWkwMk1DNHhMRGMyTGpndE5EQXVPVU0xTkRNdU9DdzBPRGdzTlRNNUxEVXdOeTQyTERVeE5pNDNMRFV4Tnk0MWVpQk5OVGs0TGpNc05ERTBMamdOQ2drSkNXTXRNamt1TVMweU1DNDNMVFU1TGpjdE5USXVOQzAzTmkwNE5pNHlZek00TGpNdE1qZ3VOQ3czTUM0MkxUVTFMalFzT1RRdU1pMHhNVFV1TTBNMk16UXVOaXd5TnpZdU5TdzJNall1T0N3ek5UWXVOaXcxT1RndU15dzBNVFF1T0hvaUx6NE5DZ2s4TDJjK0RRbzhMMmMrRFFvOEwzTjJaejROQ2c9PVwiLFxuICAgIHJlYWR5U3RhdGU6IFwiTm90RGV0ZWN0ZWRcIiAvKiBOb3REZXRlY3RlZCAqLyxcbiAgICBpc0FJUDYyU3RhbmRhcmQ6IHRydWVcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUGV0cmFcIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9jaHJvbWV3ZWJzdG9yZS5nb29nbGUuY29tL2RldGFpbC9wZXRyYS1hcHRvcy13YWxsZXQvZWpqbGFkaW5uY2tkZ2plbWVrZWJkcGVva2Jpa2hmY2k/aGw9ZW5cIixcbiAgICBpY29uOiBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBSUFBQUFDQUNBWUFBQUREUG1ITEFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFXYlNVUkJWSGdCN1owOWM5TllGSWFQbEZTcFVxUU5LNnJRaGJTa1dKZ2hMWlA5QmVzeGZ3QXF5dGcxeGU3K0FZKzNnbzVBQ3pPYkJrcHdTcXJWUWt1UkNpcWt2YThVWlcxamUyMndwSFB2ZVo4WlJVNnd3d3pudWVlZSs2RkxKQ3VTZHpyYjduWlROamFPSmM5L2N0ZE5pYUpFU1BQa2VlcStwaExINS9MMTYyazBISjdKaWtUTHZ0RUZQbkZCZitEKzBsL2R0OXRDTkpLNnhuam1aT2c3R2RKbFB2Qy9BaFF0UG81UDNNc0hRdndoaW9iTGlMQlFBQmY4Mnk3NHo0UXQzbGRTeWJLSFRvTFRlVytJNS8xQjN1MmV1T0QvSlF5K3p5Um93RVVzNXpBekExeCtvQ2NrSkhyUllOQ2YvdUUzQWpENFFmT05CQk1DNVBmdlkyajNURWk0Wk5tZDhlSGlsUURGTUsvczh4TWhJWFBoSkxqdUpMakFOLzhWZ1JzYlBXSHdMYkF0bTV0WFJXR1JBUzViLzk5QzdGQm1nYlRNQUdYcko1YUlvbUppcjh3QTNTNWFmeUxFRWtVdEVCZXpmUXkrUllwRnZkaWxnbU1oTm5HeFJ3MndMOFFxU2N5MWZNTkUwVDR5UUNMRUtra3N4RFFVd0RqMkJOamJLNjlwZG5kbi96eHdOc1VDQ095Tkd5SjM3NHBzYllrTUJpTHYzMCsrNTlvMWtXNVg1Tk1ua2RGSTVPWEw4blhnaENzQUFuMTBOTC9GejJObnB4UUZGeVI1L2JxOEJ5cERXQUlnNkFjSElvZUg2MG5uNC9LOGUxZGVFQ0lnd2hBQVFVTFFFWHhJVUFmNDNianUzWnZNREo3anJ3RFQvWHBUb0l2QUJlRUNxQmY4RXVCNysvVzZDS0JlMEMvQXV2djF1dkMwWHRBclFCUDllbDE0VkMvb0VxQ3RmcjB1UEtnWDJoZEFXNzllRjBycmhmWUZRUENSS2kxUnlZNFp5WllGNEdLUWNTaUFjU2lBY1NpQWNTaUFjU2lBY1NpQWNTaUFjU2lBY1NpQWNTaUFjU2lBY1NpQWNTaEFtM3orTEcxREFkcUVBaGpuNDBkcEd3clFGdGdJd2d4Z0dBV3RIMUNBdHNDMmNRVlFnTFpRc2syY0FyU0JvcWVIS0VBYktIcGlpQUkwRFZxK2t2NGZVSUNtUWV0WE1QeXJvQUJOZ3RiLzVvMW9nZ0kwaWNKekJDaEFVeUR3cjE2Sk5paEFVengrTEJxaEFFM3c1SW5hVTBNb1FOMDhmNjR5OVZkUWdEckJrTy9GQzlFTUJhZ0xCQi9QL3l2SHhsR3hUWVBoM3RPbjRnTVVZTjJnNEZQYzUwOURBZFlGcXZ4WmgxQXJod0tzZzZyU1Z6VEh2eXdVNEVlb3FueVBUeEtuQUt1Q1ZvNGlENHM2QVJ3aFR3R1dvVHJrOGUzYklFNElINGNDVkNESTFVNmRMMS9LNzNFaDRCNzI3Y3RDQVNvUTZNQmE5ekp3SnRBNEZNQTRGTUE0Rk1BNEZNQTRGTUE0Rk1BNEZNQTQ3UXRnNFAvbjFVejdBZ1E4emVvRDdRdWc1S1FNcStqb0FwZ0ZXa05IRVdod0VVWUxGTUE0T2dSUWRHQ0NOWFFJVUcyOElJMmpaeUtJV2FBVjlBaWc3T2dVSytnUkFNSDM2SW1hVU5DMUZvRHQxc3dDamFKTEFBUWZUOW1ReHRDM0dvaHVnQ09DeHRDNUhJeUhMTmtWTklKT0FUQXY0TW56OWI2amQwTUlob1dzQjJwSDk0NGdQSG1Ma1FHcERmMWJ3dEFWVUlMYThHTlBJQ1JnZDFBTC9td0tSWGZBMGNIYThXdFhNQXJEZnA4YlNkZUlmOXZDRWZ4SGo4cHNRQkYrR0gvUEIwQTJ3SXpoclZzaWg0Y2lPenRDVnNmdkF5S1FBVkFiWVByNDRFRGs2RWhrZDFmSThvUnhRZ2dLUTJRRVhNZ0VlM3VsRUxodmJRbVpUM2hIeEZSbisxVG4vVUFBWkFXSVVYVVRIejRJS1FuL2pDQmtCNlBuL3l3REh3NDFEZ1V3RGdSSWhWZ2xqU1dLem9YWUpNK2RBRm1XQ3JIS2Vld3NPQlZpRXhkNzFBQWpkMTBJc1VZYURZZG5zZnR5NFV6NFU0ZzF6dkNsSEFibStlOUNiSkZsZmR3S0FWd1dTSjBFZndpeHdyQ0l1WXhQQk9WNVQxZ0xXQ0N0V2orNEVxQ29CYkxzRnlGaGsyVVBxOVlQSnFhQ1VSVzZXMTlJcVBSZGpDZUcvZEdzZCtYZGJzL2RUb1NFUkQ4YURIclRQNHptdlpzU0JNWE00SU5vMGFmeVR1ZFk0dmczOXpJUjRpTkZYWGZadGM5azRYSncwVjlrMlIxT0ZIa0lodlZaZG4xUjhNSENERER4K3pxZHhLMGM5dHoxc3pBamFLV2MxWFVUZStPVi9pS1dGbUFjSjhOdEo4S3hlN2t2a0NHS0VpSE40NVp6M2IvOXlOMy91VnpVR3hYRCtSWDRGNTY5ODVoc3FBNlNBQUFBQUVsRlRrU3VRbUNDXCIsXG4gICAgcmVhZHlTdGF0ZTogXCJOb3REZXRlY3RlZFwiIC8qIE5vdERldGVjdGVkICovLFxuICAgIGlzQUlQNjJTdGFuZGFyZDogdHJ1ZVxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQb250ZW0gV2FsbGV0XCIsXG4gICAgdXJsOiBcImh0dHBzOi8vcG9udGVtLm5ldHdvcmsvcG9udGVtLXdhbGxldFwiLFxuICAgIGljb246IFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTXpZaUlHaGxhV2RvZEQwaU16WWlJSFpwWlhkQ2IzZzlJakFnTUNBek5pQXpOaUlnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0S1BIQmhkR2dnWkQwaVRURTRJREJET0M0d056TXdOQ0F3SURBZ09DNHdOekV6T1NBd0lERTNMams1TmpORE1DQXlOUzR4TWprNElEUXVNVGN6TVRZZ016RXVNekV3T0NBeE1DNHlNRGMySURNMExqSXlNRE5XTXpRdU1qTTFNVWd4TUM0eU16Y3lRekV5TGpVNE5pQXpOUzR6TmpRNUlERTFMakl5TWpnZ016WWdNVGdnTXpaRE1qY3VPVEkzSURNMklETTJJREkzTGpreU9EWWdNellnTVRndU1EQXpOME16TmlBNExqQTNNVE00SURJM0xqa3lOeUF3SURFNElEQmFUVEU0SURFdU5EYzJPVEpETWpjdU1UQTNNU0F4TGpRM05qa3lJRE0wTGpVeU1qZ2dPQzQ0T1RFd09DQXpOQzQxTWpJNElERTNMams1TmpORE16UXVOVEl5T0NBeU1DNDJNVEExSURNekxqa3dPVGNnTWpNdU1Ea3hOeUF6TWk0NE1qUWdNalV1TWpreU0wTXpNQzQwTkRVMklESTBMakUwTURNZ01qZ3VNRE13TkNBeU15NHlPRE0zSURJMUxqVTVNamtnTWpJdU56QXdNMVk0TGpreU1EWXlRekkxTGpVNU1qa2dPQzQwTkRBMk1pQXlOUzR5TVRZeUlEZ3VNRFUyTmpJZ01qUXVOelF6TlNBNExqQTFOall5U0RJeExqY3hOVEpJTVRRdU1EZzFORWd4TVM0d05UZERNVEF1TlRreE55QTRMakExTmpZeUlERXdMakl3TnpZZ09DNDBOREEyTWlBeE1DNHlNRGMySURndU9USXdOakpXTWpJdU56WTJPRU0zTGpnME5EQTNJREl6TGpNMU1ESWdOUzQwT1RVeU9DQXlOQzR4T1RJZ015NHhPRE0wTWlBeU5TNHlPVGszUXpJdU1Ea3dNamNnTWpNdU1Ea3hOeUF4TGpRM056SXpJREl3TGpZeE56Z2dNUzQwTnpjeU15QXhOeTQ1T1RZelF6RXVORGMzTWpNZ09DNDRPVEV3T0NBNExqZzVNamtnTVM0ME56WTVNaUF4T0NBeExqUTNOamt5V2swMExqRXpOakl6SURJMkxqazJNVEpETmk0d09UTTFOaUF5TlM0NU9UTTRJRGd1TVRJME56UWdNalV1TWpRNElERXdMakl4TlNBeU5DNDNNekV4VmpNeUxqVTFPRGhETnk0M05EQTJOaUF6TVM0eU16WTVJRFV1TmpVd016a2dNamt1TXpBeU1pQTBMakV6TmpJeklESTJMamsyTVRKYVRURTBMakE0TlRRZ016UXVNRFF6TVZZeE5TNDJNRE0zUXpFMExqQTROVFFnTVRNdU5EWTVOU0F4TlM0NE16VTVJREV4TGpjd05EWWdNVGN1T1RJMk1TQXhNUzQzTURRMlF6SXdMakF4TmpRZ01URXVOekEwTmlBeU1TNDNNVFV5SURFekxqUXpNallnTWpFdU56RTFNaUF4TlM0MU5UazBRekl4TGpjeE5USWdNVFV1TlRjME1pQXlNUzQzTURjNElERTFMalU0T0RrZ01qRXVOekEzT0NBeE5TNDJNRE0zU0RJeExqY3hOVEpXTWpJdU1ESXdPVU14T1M0NU16VXlJREl4TGpneE5ESWdNVGd1TVRRM055QXlNUzQzTkRjM0lERTJMak0yTURNZ01qRXVPRFF6TjB3eE5DNDRPVEEwSURJekxqazNOemhETVRjdU1UZ3dNU0F5TXk0M09EVTRJREU1TGpReE1EY2dNak11T0RBd05pQXlNUzQyTVRFNElESTBMakExTVRkRE1qRXVOak0wSURJMExqQTFNVGNnTWpFdU5qUTROeUF5TkM0d05URTNJREl4TGpZM01Ea2dNalF1TURVNU1VTXlNUzQyT0RVM0lESTBMakExT1RFZ01qRXVOekF3TlNBeU5DNHdOVGt4SURJeExqY3lNallnTWpRdU1EWTJOVU15TWk0eE1EWTNJREkwTGpFeE1EZ2dNak11TlRBeU55QXlOQzR5T0RnZ01qUXVOemd3TlNBeU5DNDJNRFUxVERJeExqY3lNallnTWpVdU5qUTJPRll6TkM0eE1ESXlRekl3TGpVeU5qRWdNelF1TXpjMU5DQXhPUzR5T0RVeUlETTBMalV6TURVZ01UZ3VNREUwT0NBek5DNDFNekExUXpFMkxqWTBPRE1nTXpRdU5URTFOeUF4TlM0ek5ERWdNelF1TXpRMU9DQXhOQzR3T0RVMElETTBMakEwTXpGYVRUSTFMalU0TlRZZ016SXVOall5TWxZeU5DNDNOamhETWpjdU5qWTROQ0F5TlM0eU9USXpJREk1TGpjeU9USWdNall1TURZd015QXpNUzQzT1RjeklESTNMakEyTkRaRE16QXVNalEyTWlBeU9TNDBNakF6SURJNExqRXdORElnTXpFdU16VTFNU0F5TlM0MU9EVTJJRE15TGpZMk1qSmFJaUJtYVd4c1BTSjFjbXdvSTNCaGFXNTBNRjlzYVc1bFlYSmZNakl5WHpFMk56QXBJaTgrQ2p4a1pXWnpQZ284YkdsdVpXRnlSM0poWkdsbGJuUWdhV1E5SW5CaGFXNTBNRjlzYVc1bFlYSmZNakl5WHpFMk56QWlJSGd4UFNJeE55NDVPVGszSWlCNU1UMGlNell1TnpjNE9TSWdlREk5SWpFM0xqazVPVGNpSUhreVBTSXROUzQxTVRrM09DSWdaM0poWkdsbGJuUlZibWwwY3owaWRYTmxjbE53WVdObFQyNVZjMlVpUGdvOGMzUnZjQ0J2Wm1aelpYUTlJakF1TURnMU9DSWdjM1J2Y0MxamIyeHZjajBpSXpoRU1qbERNU0l2UGdvOGMzUnZjQ0J2Wm1aelpYUTlJakF1TWpNNE15SWdjM1J2Y0MxamIyeHZjajBpSXprME1rSkNRaUl2UGdvOGMzUnZjQ0J2Wm1aelpYUTlJakF1TkRZMk55SWdjM1J2Y0MxamIyeHZjajBpSTBFNU1rWkJReUl2UGdvOGMzUnZjQ0J2Wm1aelpYUTlJakF1TnpReE15SWdjM1J2Y0MxamIyeHZjajBpSTBOQk16YzVNeUl2UGdvOGMzUnZjQ0J2Wm1aelpYUTlJakVpSUhOMGIzQXRZMjlzYjNJOUlpTkdNRE5HTnpjaUx6NEtQQzlzYVc1bFlYSkhjbUZrYVdWdWRENEtQQzlrWldaelBnbzhMM04yWno0S1wiLFxuICAgIHJlYWR5U3RhdGU6IFwiTm90RGV0ZWN0ZWRcIiAvKiBOb3REZXRlY3RlZCAqLyxcbiAgICBpc0FJUDYyU3RhbmRhcmQ6IHRydWVcbiAgfVxuXTtcblxuLy8gc3JjL1dhbGxldENvcmUudHNcbnZhciBXYWxsZXRDb3JlID0gY2xhc3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXIyIHtcbiAgY29uc3RydWN0b3IocGx1Z2lucywgb3B0SW5XYWxsZXRzLCBkYXBwQ29uZmlnLCBkaXNhYmxlVGVsZW1ldHJ5KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl93YWxsZXRzID0gW107XG4gICAgdGhpcy5fb3B0SW5XYWxsZXRzID0gW107XG4gICAgdGhpcy5fc3RhbmRhcmRfd2FsbGV0cyA9IFtdO1xuICAgIHRoaXMuX2FsbF93YWxsZXRzID0gW107XG4gICAgdGhpcy5fd2FsbGV0ID0gbnVsbDtcbiAgICB0aGlzLl9hY2NvdW50ID0gbnVsbDtcbiAgICB0aGlzLl9uZXR3b3JrID0gbnVsbDtcbiAgICB0aGlzLndhbGxldENvcmVWMSA9IG5ldyBXYWxsZXRDb3JlVjEoKTtcbiAgICB0aGlzLndhbGxldFN0YW5kYXJkQ29yZSA9IG5ldyBXYWxsZXRTdGFuZGFyZENvcmUoKTtcbiAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5nYTQgPSBudWxsO1xuICAgIHRoaXMuX2Rpc2FibGVUZWxlbWV0cnkgPSBmYWxzZTtcbiAgICB0aGlzLnN0YW5kYXJkaXplU3RhbmRhcmRXYWxsZXRUb1BsdWdpbldhbGxldFR5cGUgPSAoc3RhbmRhcmRXYWxsZXQpID0+IHtcbiAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgIGxldCBzdGFuZGFyZFdhbGxldENvbnZlcnRlZFRvV2FsbGV0ID0ge1xuICAgICAgICBuYW1lOiBzdGFuZGFyZFdhbGxldC5uYW1lLFxuICAgICAgICB1cmw6IHN0YW5kYXJkV2FsbGV0LnVybCxcbiAgICAgICAgaWNvbjogc3RhbmRhcmRXYWxsZXQuaWNvbixcbiAgICAgICAgcHJvdmlkZXI6IHN0YW5kYXJkV2FsbGV0LFxuICAgICAgICBjb25uZWN0OiBzdGFuZGFyZFdhbGxldC5mZWF0dXJlc1tcImFwdG9zOmNvbm5lY3RcIl0uY29ubmVjdCxcbiAgICAgICAgZGlzY29ubmVjdDogc3RhbmRhcmRXYWxsZXQuZmVhdHVyZXNbXCJhcHRvczpkaXNjb25uZWN0XCJdLmRpc2Nvbm5lY3QsXG4gICAgICAgIG5ldHdvcms6IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6bmV0d29ya1wiXS5uZXR3b3JrLFxuICAgICAgICBhY2NvdW50OiBzdGFuZGFyZFdhbGxldC5mZWF0dXJlc1tcImFwdG9zOmFjY291bnRcIl0uYWNjb3VudCxcbiAgICAgICAgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uOiAoX2EgPSBzdGFuZGFyZFdhbGxldC5mZWF0dXJlc1tcImFwdG9zOnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblwiXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbixcbiAgICAgICAgc2lnbk1lc3NhZ2U6IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6c2lnbk1lc3NhZ2VcIl0uc2lnbk1lc3NhZ2UsXG4gICAgICAgIG9uQWNjb3VudENoYW5nZTogc3RhbmRhcmRXYWxsZXQuZmVhdHVyZXNbXCJhcHRvczpvbkFjY291bnRDaGFuZ2VcIl0ub25BY2NvdW50Q2hhbmdlLFxuICAgICAgICBvbk5ldHdvcmtDaGFuZ2U6IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6b25OZXR3b3JrQ2hhbmdlXCJdLm9uTmV0d29ya0NoYW5nZSxcbiAgICAgICAgc2lnblRyYW5zYWN0aW9uOiBzdGFuZGFyZFdhbGxldC5mZWF0dXJlc1tcImFwdG9zOnNpZ25UcmFuc2FjdGlvblwiXS5zaWduVHJhbnNhY3Rpb24sXG4gICAgICAgIG9wZW5Jbk1vYmlsZUFwcDogKF9iID0gc3RhbmRhcmRXYWxsZXQuZmVhdHVyZXNbXCJhcHRvczpvcGVuSW5Nb2JpbGVBcHBcIl0pID09IG51bGwgPyB2b2lkIDAgOiBfYi5vcGVuSW5Nb2JpbGVBcHAsXG4gICAgICAgIGNoYW5nZU5ldHdvcms6IChfYyA9IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6Y2hhbmdlTmV0d29ya1wiXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmNoYW5nZU5ldHdvcmssXG4gICAgICAgIHJlYWR5U3RhdGU6IFwiSW5zdGFsbGVkXCIgLyogSW5zdGFsbGVkICovLFxuICAgICAgICBpc0FJUDYyU3RhbmRhcmQ6IHRydWUsXG4gICAgICAgIGlzU2lnblRyYW5zYWN0aW9uVjFfMTogKChfZCA9IHN0YW5kYXJkV2FsbGV0LmZlYXR1cmVzW1wiYXB0b3M6c2lnblRyYW5zYWN0aW9uXCJdKSA9PSBudWxsID8gdm9pZCAwIDogX2QudmVyc2lvbikgPT09IFwiMS4xXCJcbiAgICAgIH07XG4gICAgICB0aGlzLl9hbGxfd2FsbGV0cyA9IHRoaXMuX2FsbF93YWxsZXRzLmZpbHRlcihcbiAgICAgICAgKGl0ZW0pID0+IGl0ZW0ubmFtZSAhPT0gc3RhbmRhcmRXYWxsZXRDb252ZXJ0ZWRUb1dhbGxldC5uYW1lXG4gICAgICApO1xuICAgICAgdGhpcy5fYWxsX3dhbGxldHMucHVzaChzdGFuZGFyZFdhbGxldENvbnZlcnRlZFRvV2FsbGV0KTtcbiAgICAgIHRoaXMuZW1pdChcInN0YW5kYXJkV2FsbGV0c0FkZGVkXCIsIHN0YW5kYXJkV2FsbGV0Q29udmVydGVkVG9XYWxsZXQpO1xuICAgIH07XG4gICAgdGhpcy5fd2FsbGV0cyA9IHBsdWdpbnM7XG4gICAgdGhpcy5fb3B0SW5XYWxsZXRzID0gb3B0SW5XYWxsZXRzO1xuICAgIHRoaXMuX2RhcHBDb25maWcgPSBkYXBwQ29uZmlnO1xuICAgIHRoaXMuX2Rpc2FibGVUZWxlbWV0cnkgPSBkaXNhYmxlVGVsZW1ldHJ5O1xuICAgIHRoaXMuX3Nka1dhbGxldHMgPSBnZXRTREtXYWxsZXRzKHRoaXMuX2RhcHBDb25maWcpO1xuICAgIGlmICghdGhpcy5fZGlzYWJsZVRlbGVtZXRyeSkge1xuICAgICAgdGhpcy5nYTQgPSBuZXcgR0E0KCk7XG4gICAgfVxuICAgIHRoaXMuZmV0Y2hFeHRlbnNpb25BSVA2MkFwdG9zV2FsbGV0cygpO1xuICAgIHRoaXMuZmV0Y2hTREtBSVA2MkFwdG9zV2FsbGV0cygpO1xuICAgIHRoaXMuc2NvcGVQb2xsaW5nRGV0ZWN0aW9uU3RyYXRlZ3koKTtcbiAgICB0aGlzLmFwcGVuZE5vdERldGVjdGVkU3RhbmRhcmRTdXBwb3J0ZWRXYWxsZXRzKCk7XG4gIH1cbiAgc2NvcGVQb2xsaW5nRGV0ZWN0aW9uU3RyYXRlZ3koKSB7XG4gICAgdmFyIF9hO1xuICAgIChfYSA9IHRoaXMuX3dhbGxldHMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5mb3JFYWNoKCh3YWxsZXQpID0+IHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nU3RhbmRhcmRQb250ZW1XYWxsZXQgPSB0aGlzLl9zdGFuZGFyZF93YWxsZXRzLmZpbmQoXG4gICAgICAgICh3YWxsZXQyKSA9PiB3YWxsZXQyLm5hbWUgPT0gXCJQb250ZW0gV2FsbGV0XCJcbiAgICAgICk7XG4gICAgICBpZiAod2FsbGV0Lm5hbWUgPT09IFwiUG9udGVtXCIgJiYgZXhpc3RpbmdTdGFuZGFyZFBvbnRlbVdhbGxldCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBleGlzdGluZ1dhbGxldEluZGV4ID0gdGhpcy5fc3RhbmRhcmRfd2FsbGV0cy5maW5kSW5kZXgoXG4gICAgICAgIChzdGFuZGFyZFdhbGxldCkgPT4gc3RhbmRhcmRXYWxsZXQubmFtZSA9PSB3YWxsZXQubmFtZVxuICAgICAgKTtcbiAgICAgIGlmIChleGlzdGluZ1dhbGxldEluZGV4ICE9PSAtMSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgdGhpcy5fYWxsX3dhbGxldHMucHVzaCh3YWxsZXQpO1xuICAgICAgaWYgKCF3YWxsZXQucmVhZHlTdGF0ZSkge1xuICAgICAgICB3YWxsZXQucmVhZHlTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiID8gXCJVbnN1cHBvcnRlZFwiIC8qIFVuc3VwcG9ydGVkICovIDogXCJOb3REZXRlY3RlZFwiIC8qIE5vdERldGVjdGVkICovO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgc2NvcGVQb2xsaW5nRGV0ZWN0aW9uU3RyYXRlZ3koKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHByb3ZpZGVyTmFtZSA9IHdhbGxldC5wcm92aWRlck5hbWUgfHwgd2FsbGV0Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMod2luZG93KS5pbmNsdWRlcyhwcm92aWRlck5hbWUpKSB7XG4gICAgICAgICAgICB3YWxsZXQucmVhZHlTdGF0ZSA9IFwiSW5zdGFsbGVkXCIgLyogSW5zdGFsbGVkICovO1xuICAgICAgICAgICAgd2FsbGV0LnByb3ZpZGVyID0gd2luZG93W3Byb3ZpZGVyTmFtZV07XG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJyZWFkeVN0YXRlQ2hhbmdlXCIsIHdhbGxldCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmZXRjaEV4dGVuc2lvbkFJUDYyQXB0b3NXYWxsZXRzKCkge1xuICAgIGxldCB7IGFwdG9zV2FsbGV0cywgb24gfSA9IGdldEFwdG9zV2FsbGV0cygpO1xuICAgIHRoaXMuc2V0RXh0ZW5zaW9uQUlQNjJXYWxsZXRzKGFwdG9zV2FsbGV0cyk7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgY29uc3QgcmVtb3ZlUmVnaXN0ZXJMaXN0ZW5lciA9IG9uKFwicmVnaXN0ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgeyBhcHRvc1dhbGxldHM6IGFwdG9zV2FsbGV0czIgfSA9IGdldEFwdG9zV2FsbGV0cygpO1xuICAgICAgdGhhdC5zZXRFeHRlbnNpb25BSVA2MldhbGxldHMoYXB0b3NXYWxsZXRzMik7XG4gICAgfSk7XG4gICAgY29uc3QgcmVtb3ZlVW5yZWdpc3Rlckxpc3RlbmVyID0gb24oXCJ1bnJlZ2lzdGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IHsgYXB0b3NXYWxsZXRzOiBhcHRvc1dhbGxldHMyIH0gPSBnZXRBcHRvc1dhbGxldHMoKTtcbiAgICAgIHRoYXQuc2V0RXh0ZW5zaW9uQUlQNjJXYWxsZXRzKGFwdG9zV2FsbGV0czIpO1xuICAgIH0pO1xuICB9XG4gIGFwcGVuZE5vdERldGVjdGVkU3RhbmRhcmRTdXBwb3J0ZWRXYWxsZXRzKCkge1xuICAgIGFwdG9zU3RhbmRhcmRTdXBwb3J0ZWRXYWxsZXRMaXN0Lm1hcCgoc3VwcG9ydGVkV2FsbGV0KSA9PiB7XG4gICAgICBjb25zdCBleGlzdGluZ1BsdWdpbldhbGxldEluZGV4ID0gdGhpcy53YWxsZXRzLmZpbmRJbmRleChcbiAgICAgICAgKHdhbGxldCkgPT4gd2FsbGV0Lm5hbWUgPT09IHN1cHBvcnRlZFdhbGxldC5uYW1lXG4gICAgICApO1xuICAgICAgaWYgKGV4aXN0aW5nUGx1Z2luV2FsbGV0SW5kZXggIT09IC0xKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBleGlzdGluZ1N0YW5kYXJkUG9udGVtV2FsbGV0ID0gdGhpcy53YWxsZXRzLmZpbmQoXG4gICAgICAgICh3YWxsZXQpID0+IHdhbGxldC5uYW1lID09IFwiUG9udGVtXCJcbiAgICAgICk7XG4gICAgICBpZiAoc3VwcG9ydGVkV2FsbGV0Lm5hbWUgPT09IFwiUG9udGVtIFdhbGxldFwiICYmIGV4aXN0aW5nU3RhbmRhcmRQb250ZW1XYWxsZXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZXhpc3RpbmdTdGFuZGFyZFdhbGxldCA9IHRoaXMuX3N0YW5kYXJkX3dhbGxldHMuZmluZChcbiAgICAgICAgKHdhbGxldCkgPT4gd2FsbGV0Lm5hbWUgPT0gc3VwcG9ydGVkV2FsbGV0Lm5hbWVcbiAgICAgICk7XG4gICAgICBpZiAoZXhpc3RpbmdTdGFuZGFyZFdhbGxldCAmJiB0aGlzLmV4Y2x1ZGVXYWxsZXQoZXhpc3RpbmdTdGFuZGFyZFdhbGxldCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFleGlzdGluZ1N0YW5kYXJkV2FsbGV0KSB7XG4gICAgICAgIHRoaXMuX2FsbF93YWxsZXRzLnB1c2goc3VwcG9ydGVkV2FsbGV0KTtcbiAgICAgICAgdGhpcy5lbWl0KFwic3RhbmRhcmRXYWxsZXRzQWRkZWRcIiwgc3VwcG9ydGVkV2FsbGV0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmZXRjaFNES0FJUDYyQXB0b3NXYWxsZXRzKCkge1xuICAgIHRoaXMuX3Nka1dhbGxldHMubWFwKCh3YWxsZXQpID0+IHtcbiAgICAgIHRoaXMuc3RhbmRhcmRpemVBSVA2MldhbGxldFR5cGUod2FsbGV0KTtcbiAgICB9KTtcbiAgfVxuICBzZXRFeHRlbnNpb25BSVA2MldhbGxldHMoZXh0ZW5zaW9ud1dhbGxldHMpIHtcbiAgICBjb25zdCB3YWxsZXRzID0gZXh0ZW5zaW9ud1dhbGxldHMuZmlsdGVyKFxuICAgICAgKHdhbGxldCkgPT4gd2FsbGV0Lm5hbWUgIT09IFwiRGV2IFQgd2FsbGV0XCIgJiYgd2FsbGV0Lm5hbWUgIT09IFwiVCB3YWxsZXRcIlxuICAgICk7XG4gICAgd2FsbGV0cy5tYXAoKHdhbGxldCkgPT4ge1xuICAgICAgdGhpcy5zdGFuZGFyZGl6ZUFJUDYyV2FsbGV0VHlwZSh3YWxsZXQpO1xuICAgICAgdGhpcy5fc3RhbmRhcmRfd2FsbGV0cy5wdXNoKHdhbGxldCk7XG4gICAgfSk7XG4gIH1cbiAgZXhjbHVkZVdhbGxldCh3YWxsZXQpIHtcbiAgICBpZiAodGhpcy5fb3B0SW5XYWxsZXRzLmxlbmd0aCA+IDAgJiYgIXRoaXMuX29wdEluV2FsbGV0cy5pbmNsdWRlcyh3YWxsZXQubmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RhbmRhcmRpemVBSVA2MldhbGxldFR5cGUod2FsbGV0KSB7XG4gICAgaWYgKHRoaXMuZXhjbHVkZVdhbGxldCh3YWxsZXQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlzVmFsaWQgPSBpc1dhbGxldFdpdGhSZXF1aXJlZEZlYXR1cmVTZXQod2FsbGV0KTtcbiAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgd2FsbGV0LnJlYWR5U3RhdGUgPSBcIkluc3RhbGxlZFwiIC8qIEluc3RhbGxlZCAqLztcbiAgICAgIHRoaXMuc3RhbmRhcmRpemVTdGFuZGFyZFdhbGxldFRvUGx1Z2luV2FsbGV0VHlwZSh3YWxsZXQpO1xuICAgICAgdGhpcy5fc3RhbmRhcmRfd2FsbGV0cy5wdXNoKHdhbGxldCk7XG4gICAgfVxuICB9XG4gIHJlY29yZEV2ZW50KGV2ZW50TmFtZSwgYWRkaXRpb25hbEluZm8pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgKF9kID0gdGhpcy5nYTQpID09IG51bGwgPyB2b2lkIDAgOiBfZC5ndGFnKFwiZXZlbnRcIiwgYHdhbGxldF9hZGFwdGVyXyR7ZXZlbnROYW1lfWAsIHtcbiAgICAgIHdhbGxldDogKF9hID0gdGhpcy5fd2FsbGV0KSA9PSBudWxsID8gdm9pZCAwIDogX2EubmFtZSxcbiAgICAgIG5ldHdvcms6IChfYiA9IHRoaXMuX25ldHdvcmspID09IG51bGwgPyB2b2lkIDAgOiBfYi5uYW1lLFxuICAgICAgbmV0d29ya191cmw6IChfYyA9IHRoaXMuX25ldHdvcmspID09IG51bGwgPyB2b2lkIDAgOiBfYy51cmwsXG4gICAgICBhZGFwdGVyX2NvcmVfdmVyc2lvbjogV0FMTEVUX0FEQVBURVJfQ09SRV9WRVJTSU9OLFxuICAgICAgc2VuZF90bzogXCJHLUdOVlZXQkwzSjlcIixcbiAgICAgIC4uLmFkZGl0aW9uYWxJbmZvXG4gICAgfSk7XG4gIH1cbiAgZW5zdXJlV2FsbGV0RXhpc3RzKHdhbGxldCkge1xuICAgIGlmICghd2FsbGV0KSB7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0Tm90Q29ubmVjdGVkRXJyb3IoKS5uYW1lO1xuICAgIH1cbiAgICBpZiAoISh3YWxsZXQucmVhZHlTdGF0ZSA9PT0gXCJMb2FkYWJsZVwiIC8qIExvYWRhYmxlICovIHx8IHdhbGxldC5yZWFkeVN0YXRlID09PSBcIkluc3RhbGxlZFwiIC8qIEluc3RhbGxlZCAqLykpXG4gICAgICB0aHJvdyBuZXcgV2FsbGV0Tm90UmVhZHlFcnJvcihcIldhbGxldCBpcyBub3Qgc2V0XCIpLm5hbWU7XG4gIH1cbiAgZW5zdXJlQWNjb3VudEV4aXN0cyhhY2NvdW50KSB7XG4gICAgaWYgKCFhY2NvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0QWNjb3VudEVycm9yKFwiQWNjb3VudCBpcyBub3Qgc2V0XCIpLm5hbWU7XG4gICAgfVxuICB9XG4gIGRvZXNXYWxsZXRFeGlzdCgpIHtcbiAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCB8fCB0aGlzLl9jb25uZWN0aW5nIHx8ICF0aGlzLl93YWxsZXQpXG4gICAgICB0aHJvdyBuZXcgV2FsbGV0Tm90Q29ubmVjdGVkRXJyb3IoKS5uYW1lO1xuICAgIGlmICghKHRoaXMuX3dhbGxldC5yZWFkeVN0YXRlID09PSBcIkxvYWRhYmxlXCIgLyogTG9hZGFibGUgKi8gfHwgdGhpcy5fd2FsbGV0LnJlYWR5U3RhdGUgPT09IFwiSW5zdGFsbGVkXCIgLyogSW5zdGFsbGVkICovKSlcbiAgICAgIHRocm93IG5ldyBXYWxsZXROb3RSZWFkeUVycm9yKCkubmFtZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjbGVhckRhdGEoKSB7XG4gICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5zZXRXYWxsZXQobnVsbCk7XG4gICAgdGhpcy5zZXRBY2NvdW50KG51bGwpO1xuICAgIHRoaXMuc2V0TmV0d29yayhudWxsKTtcbiAgICByZW1vdmVMb2NhbFN0b3JhZ2UoKTtcbiAgfVxuICBhc3luYyBzZXRBbnNOYW1lKCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoKChfYSA9IHRoaXMuX25ldHdvcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5jaGFpbklkKSAmJiB0aGlzLl9hY2NvdW50KSB7XG4gICAgICBpZiAoIUNoYWluSWRUb0Fuc1N1cHBvcnRlZE5ldHdvcmtNYXBbdGhpcy5fbmV0d29yay5jaGFpbklkXSB8fCAhaXNBcHRvc05ldHdvcmsodGhpcy5fbmV0d29yaykpIHtcbiAgICAgICAgdGhpcy5fYWNjb3VudC5hbnNOYW1lID0gdm9pZCAwO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBhcHRvc0NvbmZpZyA9IGdldEFwdG9zQ29uZmlnKHRoaXMuX25ldHdvcmssIHRoaXMuX2RhcHBDb25maWcpO1xuICAgICAgY29uc3QgYXB0b3MgPSBuZXcgQXB0b3MzKGFwdG9zQ29uZmlnKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBhd2FpdCBhcHRvcy5hbnMuZ2V0UHJpbWFyeU5hbWUoe1xuICAgICAgICBhZGRyZXNzOiB0aGlzLl9hY2NvdW50LmFkZHJlc3MudG9TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICB0aGlzLl9hY2NvdW50LmFuc05hbWUgPSBuYW1lO1xuICAgIH1cbiAgfVxuICBzZXRXYWxsZXQod2FsbGV0KSB7XG4gICAgdGhpcy5fd2FsbGV0ID0gd2FsbGV0O1xuICB9XG4gIHNldEFjY291bnQoYWNjb3VudCkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoYWNjb3VudCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWNjb3VudCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgoX2EgPSB0aGlzLl93YWxsZXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc0FJUDYyU3RhbmRhcmQpIHtcbiAgICAgIGlmIChcInN0YXR1c1wiIGluIGFjY291bnQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdFN0YW5kYXJkQWNjb3VudCA9IGFjY291bnQ7XG4gICAgICAgIGlmIChjb25uZWN0U3RhbmRhcmRBY2NvdW50LnN0YXR1cyA9PT0gVXNlclJlc3BvbnNlU3RhdHVzMi5SRUpFQ1RFRCkge1xuICAgICAgICAgIHRoaXMuX2Nvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aHJvdyBuZXcgV2FsbGV0Q29ubmVjdGlvbkVycm9yKFwiVXNlciBoYXMgcmVqZWN0ZWQgdGhlIHJlcXVlc3RcIikubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hY2NvdW50ID0ge1xuICAgICAgICAgIGFkZHJlc3M6IGNvbm5lY3RTdGFuZGFyZEFjY291bnQuYXJncy5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICAgICAgcHVibGljS2V5OiBjb25uZWN0U3RhbmRhcmRBY2NvdW50LmFyZ3MucHVibGljS2V5LnRvU3RyaW5nKCksXG4gICAgICAgICAgYW5zTmFtZTogY29ubmVjdFN0YW5kYXJkQWNjb3VudC5hcmdzLmFuc05hbWVcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3RhbmRhcmRBY2NvdW50ID0gYWNjb3VudDtcbiAgICAgICAgdGhpcy5fYWNjb3VudCA9IHtcbiAgICAgICAgICBhZGRyZXNzOiBzdGFuZGFyZEFjY291bnQuYWRkcmVzcy50b1N0cmluZygpLFxuICAgICAgICAgIHB1YmxpY0tleTogc3RhbmRhcmRBY2NvdW50LnB1YmxpY0tleS50b1N0cmluZygpLFxuICAgICAgICAgIGFuc05hbWU6IHN0YW5kYXJkQWNjb3VudC5hbnNOYW1lXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYWNjb3VudCA9IHsgLi4uYWNjb3VudCB9O1xuICAgIHJldHVybjtcbiAgfVxuICBzZXROZXR3b3JrKG5ldHdvcmspIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBpZiAobmV0d29yayA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fbmV0d29yayA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgoX2EgPSB0aGlzLl93YWxsZXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5pc0FJUDYyU3RhbmRhcmQpIHtcbiAgICAgIGNvbnN0IHN0YW5kYXJkaXplTmV0d29yayA9IG5ldHdvcms7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwibmV0d29ya19jaGFuZ2VcIiwge1xuICAgICAgICBmcm9tOiAoX2IgPSB0aGlzLl9uZXR3b3JrKSA9PSBudWxsID8gdm9pZCAwIDogX2IubmFtZSxcbiAgICAgICAgdG86IHN0YW5kYXJkaXplTmV0d29yay5uYW1lXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX25ldHdvcmsgPSB7XG4gICAgICAgIG5hbWU6IHN0YW5kYXJkaXplTmV0d29yay5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGNoYWluSWQ6IHN0YW5kYXJkaXplTmV0d29yay5jaGFpbklkLnRvU3RyaW5nKCksXG4gICAgICAgIHVybDogc3RhbmRhcmRpemVOZXR3b3JrLnVybFxuICAgICAgfTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZWNvcmRFdmVudChcIm5ldHdvcmtfY2hhbmdlXCIsIHtcbiAgICAgIGZyb206IChfYyA9IHRoaXMuX25ldHdvcmspID09IG51bGwgPyB2b2lkIDAgOiBfYy5uYW1lLFxuICAgICAgdG86IG5ldHdvcmsubmFtZVxuICAgIH0pO1xuICAgIHRoaXMuX25ldHdvcmsgPSB7XG4gICAgICAuLi5uZXR3b3JrLFxuICAgICAgbmFtZTogbmV0d29yay5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICB9O1xuICB9XG4gIGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25uZWN0ZWQ7XG4gIH1cbiAgZ2V0IHdhbGxldHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FsbF93YWxsZXRzO1xuICB9XG4gIGdldCBwbHVnaW5XYWxsZXRzKCkge1xuICAgIHJldHVybiB0aGlzLl93YWxsZXRzO1xuICB9XG4gIGdldCBzdGFuZGFyZFdhbGxldHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YW5kYXJkX3dhbGxldHM7XG4gIH1cbiAgZ2V0IHdhbGxldCgpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLl93YWxsZXQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogdGhpcy5fd2FsbGV0Lm5hbWUsXG4gICAgICAgIGljb246IHRoaXMuX3dhbGxldC5pY29uLFxuICAgICAgICB1cmw6IHRoaXMuX3dhbGxldC51cmxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBXYWxsZXROb3RTZWxlY3RlZEVycm9yKGVycm9yKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBnZXQgYWNjb3VudCgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuX2FjY291bnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBXYWxsZXRBY2NvdW50RXJyb3IoZXJyb3IpLm1lc3NhZ2U7XG4gICAgfVxuICB9XG4gIGdldCBuZXR3b3JrKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5fbmV0d29yaztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IFdhbGxldEdldE5ldHdvcmtFcnJvcihlcnJvcikubWVzc2FnZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29ubmVjdCh3YWxsZXROYW1lKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGFsbERldGVjdGVkV2FsbGV0cyA9IHRoaXMuX2FsbF93YWxsZXRzO1xuICAgIGNvbnN0IHNlbGVjdGVkV2FsbGV0ID0gYWxsRGV0ZWN0ZWRXYWxsZXRzLmZpbmQoXG4gICAgICAod2FsbGV0KSA9PiB3YWxsZXQubmFtZSA9PT0gd2FsbGV0TmFtZVxuICAgICk7XG4gICAgaWYgKCFzZWxlY3RlZFdhbGxldClcbiAgICAgIHJldHVybjtcbiAgICBpZiAodGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICBpZiAoKChfYSA9IHRoaXMuX3dhbGxldCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm5hbWUpID09PSB3YWxsZXROYW1lKVxuICAgICAgICB0aHJvdyBuZXcgV2FsbGV0Q29ubmVjdGlvbkVycm9yKFxuICAgICAgICAgIGAke3dhbGxldE5hbWV9IHdhbGxldCBpcyBhbHJlYWR5IGNvbm5lY3RlZGBcbiAgICAgICAgKS5tZXNzYWdlO1xuICAgIH1cbiAgICBpZiAoaXNSZWRpcmVjdGFibGUoKSAmJiBzZWxlY3RlZFdhbGxldC5yZWFkeVN0YXRlICE9PSBcIkluc3RhbGxlZFwiIC8qIEluc3RhbGxlZCAqLykge1xuICAgICAgaWYgKHNlbGVjdGVkV2FsbGV0LmlzQUlQNjJTdGFuZGFyZCAmJiBzZWxlY3RlZFdhbGxldC5vcGVuSW5Nb2JpbGVBcHApIHtcbiAgICAgICAgc2VsZWN0ZWRXYWxsZXQub3BlbkluTW9iaWxlQXBwKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3RlZFdhbGxldC5kZWVwbGlua1Byb3ZpZGVyKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGVuY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gc2VsZWN0ZWRXYWxsZXQuZGVlcGxpbmtQcm92aWRlcih7IHVybCB9KTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlbGVjdGVkV2FsbGV0LnJlYWR5U3RhdGUgIT09IFwiSW5zdGFsbGVkXCIgLyogSW5zdGFsbGVkICovICYmIHNlbGVjdGVkV2FsbGV0LnJlYWR5U3RhdGUgIT09IFwiTG9hZGFibGVcIiAvKiBMb2FkYWJsZSAqLykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNvbm5lY3RXYWxsZXQoc2VsZWN0ZWRXYWxsZXQpO1xuICB9XG4gIGFzeW5jIGNvbm5lY3RXYWxsZXQoc2VsZWN0ZWRXYWxsZXQpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5fY29ubmVjdGluZyA9IHRydWU7XG4gICAgICB0aGlzLnNldFdhbGxldChzZWxlY3RlZFdhbGxldCk7XG4gICAgICBsZXQgYWNjb3VudDtcbiAgICAgIGlmIChzZWxlY3RlZFdhbGxldC5pc0FJUDYyU3RhbmRhcmQpIHtcbiAgICAgICAgYWNjb3VudCA9IGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLmNvbm5lY3Qoc2VsZWN0ZWRXYWxsZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWNjb3VudCA9IGF3YWl0IHRoaXMud2FsbGV0Q29yZVYxLmNvbm5lY3Qoc2VsZWN0ZWRXYWxsZXQpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRBY2NvdW50KGFjY291bnQpO1xuICAgICAgY29uc3QgbmV0d29yayA9IGF3YWl0IHNlbGVjdGVkV2FsbGV0Lm5ldHdvcmsoKTtcbiAgICAgIHRoaXMuc2V0TmV0d29yayhuZXR3b3JrKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0QW5zTmFtZSgpO1xuICAgICAgc2V0TG9jYWxTdG9yYWdlKHNlbGVjdGVkV2FsbGV0Lm5hbWUpO1xuICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVjb3JkRXZlbnQoXCJ3YWxsZXRfY29ubmVjdFwiKTtcbiAgICAgIHRoaXMuZW1pdChcImNvbm5lY3RcIiwgYWNjb3VudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuY2xlYXJEYXRhKCk7XG4gICAgICBjb25zdCBlcnJNc2cgPSBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0Q29ubmVjdGlvbkVycm9yKGVyck1zZykubWVzc2FnZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmVuc3VyZVdhbGxldEV4aXN0cyh0aGlzLl93YWxsZXQpO1xuICAgICAgYXdhaXQgdGhpcy5fd2FsbGV0LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHRoaXMuY2xlYXJEYXRhKCk7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwid2FsbGV0X2Rpc2Nvbm5lY3RcIik7XG4gICAgICB0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0RGlzY29ubmVjdGlvbkVycm9yKGVyck1zZykubWVzc2FnZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uSW5wdXQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKFwiZnVuY3Rpb25cIiBpbiB0cmFuc2FjdGlvbklucHV0LmRhdGEpIHtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9uSW5wdXQuZGF0YS5mdW5jdGlvbiA9PT0gXCIweDE6OmFjY291bnQ6OnJvdGF0ZV9hdXRoZW50aWNhdGlvbl9rZXlfY2FsbFwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3IoXCJTQ0FNIFNJVEUgREVURUNURURcIikubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNhY3Rpb25JbnB1dC5kYXRhLmZ1bmN0aW9uID09PSBcIjB4MTo6Y29kZTo6cHVibGlzaF9wYWNrYWdlX3R4blwiKSB7XG4gICAgICAgICAgKHtcbiAgICAgICAgICAgIG1ldGFkYXRhQnl0ZXM6IHRyYW5zYWN0aW9uSW5wdXQuZGF0YS5mdW5jdGlvbkFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgIGJ5dGVDb2RlOiB0cmFuc2FjdGlvbklucHV0LmRhdGEuZnVuY3Rpb25Bcmd1bWVudHNbMV1cbiAgICAgICAgICB9ID0gaGFuZGxlUHVibGlzaFBhY2thZ2VUcmFuc2FjdGlvbih0cmFuc2FjdGlvbklucHV0KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZW5zdXJlV2FsbGV0RXhpc3RzKHRoaXMuX3dhbGxldCk7XG4gICAgICB0aGlzLmVuc3VyZUFjY291bnRFeGlzdHModGhpcy5fYWNjb3VudCk7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwic2lnbl9hbmRfc3VibWl0X3RyYW5zYWN0aW9uXCIpO1xuICAgICAgY29uc3QgcGF5bG9hZERhdGEgPSB0cmFuc2FjdGlvbklucHV0LmRhdGE7XG4gICAgICBjb25zdCBhcHRvc0NvbmZpZyA9IGdldEFwdG9zQ29uZmlnKHRoaXMuX25ldHdvcmssIHRoaXMuX2RhcHBDb25maWcpO1xuICAgICAgY29uc3QgYXB0b3MgPSBuZXcgQXB0b3MzKGFwdG9zQ29uZmlnKTtcbiAgICAgIGlmICh0aGlzLl93YWxsZXQuc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLl93YWxsZXQuaXNBSVA2MlN0YW5kYXJkKSB7XG4gICAgICAgICAgY29uc3QgeyBoYXNoLCAuLi5vdXRwdXQgfSA9IGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5wdXQsXG4gICAgICAgICAgICBhcHRvcyxcbiAgICAgICAgICAgIHRoaXMuX2FjY291bnQsXG4gICAgICAgICAgICB0aGlzLl93YWxsZXQsXG4gICAgICAgICAgICB0aGlzLl9zdGFuZGFyZF93YWxsZXRzXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4geyBoYXNoLCBvdXRwdXQgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7IGhhc2gsIC4uLm91dHB1dCB9ID0gYXdhaXQgdGhpcy53YWxsZXRDb3JlVjEucmVzb2x2ZVNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHBheWxvYWREYXRhLFxuICAgICAgICAgICAgdGhpcy5fbmV0d29yayxcbiAgICAgICAgICAgIHRoaXMuX3dhbGxldCxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5wdXQsXG4gICAgICAgICAgICB0aGlzLl9kYXBwQ29uZmlnXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4geyBoYXNoLCBvdXRwdXQgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBhcHRvcy50cmFuc2FjdGlvbi5idWlsZC5zaW1wbGUoe1xuICAgICAgICBzZW5kZXI6IHRoaXMuX2FjY291bnQuYWRkcmVzcyxcbiAgICAgICAgZGF0YTogdHJhbnNhY3Rpb25JbnB1dC5kYXRhLFxuICAgICAgICBvcHRpb25zOiB0cmFuc2FjdGlvbklucHV0Lm9wdGlvbnNcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2VuZGVyQXV0aGVudGljYXRvciA9IGF3YWl0IHRoaXMuc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zdWJtaXRUcmFuc2FjdGlvbih7XG4gICAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgICBzZW5kZXJBdXRoZW50aWNhdG9yXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25BbmRTdWJtaXRNZXNzYWdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25PclBheWxvYWQsIGFzRmVlUGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2c7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZW5zdXJlV2FsbGV0RXhpc3RzKHRoaXMuX3dhbGxldCk7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwic2lnbl90cmFuc2FjdGlvblwiKTtcbiAgICAgIGlmICh0aGlzLl93YWxsZXQuc2lnblRyYW5zYWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLl93YWxsZXQuaXNBSVA2MlN0YW5kYXJkKSB7XG4gICAgICAgICAgaWYgKFwicmF3VHJhbnNhY3Rpb25cIiBpbiB0cmFuc2FjdGlvbk9yUGF5bG9hZCkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25UcmFuc2FjdGlvbihcbiAgICAgICAgICAgICAgdHJhbnNhY3Rpb25PclBheWxvYWQsXG4gICAgICAgICAgICAgIHRoaXMuX3dhbGxldCxcbiAgICAgICAgICAgICAgYXNGZWVQYXllclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbGxldC5pc1NpZ25UcmFuc2FjdGlvblYxXzEpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBjb252ZXJ0UGF5bG9hZElucHV0VjFUb1YyKHRyYW5zYWN0aW9uT3JQYXlsb2FkKTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnNWMSA9IG9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0b3IgfSA9IGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25UcmFuc2FjdGlvbihcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWVzdGFtcDogKF9hID0gb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEuZXhwaXJlVGltZXN0YW1wKSAhPSBudWxsID8gX2EgOiBvcHRpb25zVjEgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnNWMS5leHBpcmF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdzogb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEuZXhwaXJhdGlvblNlY29uZHNGcm9tTm93LFxuICAgICAgICAgICAgICAgIGdhc1VuaXRQcmljZTogKF9iID0gb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEuZ2FzVW5pdFByaWNlKSAhPSBudWxsID8gX2IgOiBvcHRpb25zVjEgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnNWMS5nYXNfdW5pdF9wcmljZSxcbiAgICAgICAgICAgICAgICBtYXhHYXNBbW91bnQ6IChfYyA9IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLm1heEdhc0Ftb3VudCkgIT0gbnVsbCA/IF9jIDogb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEubWF4X2dhc19hbW91bnQsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICAgICAgICAgIHNlbmRlcjogKG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLnNlbmRlcikgPyB7IGFkZHJlc3M6IEFjY291bnRBZGRyZXNzLmZyb20ob3B0aW9uc1YxLnNlbmRlcikgfSA6IHZvaWQgMFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB0aGlzLl93YWxsZXRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRvcjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYXB0b3NDb25maWcgPSBnZXRBcHRvc0NvbmZpZyh0aGlzLl9uZXR3b3JrLCB0aGlzLl9kYXBwQ29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuZW5zdXJlQWNjb3VudEV4aXN0cyh0aGlzLl9hY2NvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IHNlbmRlciA9IHRoaXMuX2FjY291bnQuYWRkcmVzcztcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZEZyb21WMUlucHV0KFxuICAgICAgICAgICAgICBhcHRvc0NvbmZpZyxcbiAgICAgICAgICAgICAgdHJhbnNhY3Rpb25PclBheWxvYWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zVjEgPSBvcHRpb25zO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc1YyID0ge1xuICAgICAgICAgICAgICBhY2NvdW50U2VxdWVuY2VOdW1iZXI6IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICAgICAgICBleHBpcmVUaW1lc3RhbXA6IChfZCA9IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLmV4cGlyZVRpbWVzdGFtcCkgIT0gbnVsbCA/IF9kIDogb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEuZXhwaXJhdGlvblRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgZ2FzVW5pdFByaWNlOiAoX2UgPSBvcHRpb25zVjEgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnNWMS5nYXNVbml0UHJpY2UpICE9IG51bGwgPyBfZSA6IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLmdhc191bml0X3ByaWNlLFxuICAgICAgICAgICAgICBtYXhHYXNBbW91bnQ6IChfZiA9IG9wdGlvbnNWMSA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9uc1YxLm1heEdhc0Ftb3VudCkgIT0gbnVsbCA/IF9mIDogb3B0aW9uc1YxID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zVjEubWF4X2dhc19hbW91bnRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCByYXdUcmFuc2FjdGlvbiA9IGF3YWl0IGdlbmVyYXRlUmF3VHJhbnNhY3Rpb24oe1xuICAgICAgICAgICAgICBhcHRvc0NvbmZpZyxcbiAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgc2VuZGVyLFxuICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zVjJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25UcmFuc2FjdGlvbihcbiAgICAgICAgICAgICAgbmV3IFNpbXBsZVRyYW5zYWN0aW9uKHJhd1RyYW5zYWN0aW9uKSxcbiAgICAgICAgICAgICAgdGhpcy5fd2FsbGV0LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwicmF3VHJhbnNhY3Rpb25cIiBpbiB0cmFuc2FjdGlvbk9yUGF5bG9hZCkge1xuICAgICAgICAgIGNvbnN0IGFjY291bnRBdXRoZW50aWNhdG9yID0gYXdhaXQgdGhpcy5fd2FsbGV0LnNpZ25UcmFuc2FjdGlvbihcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uT3JQYXlsb2FkLFxuICAgICAgICAgICAgYXNGZWVQYXllclxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGFjY291bnRBdXRoZW50aWNhdG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy53YWxsZXRDb3JlVjEuc2lnblRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25PclBheWxvYWQsXG4gICAgICAgICAgICB0aGlzLl93YWxsZXQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG1heF9nYXNfYW1vdW50OiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5tYXhHYXNBbW91bnQpID8gQmlnSW50KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMubWF4R2FzQW1vdW50KSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgZ2FzX3VuaXRfcHJpY2U6IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmdhc1VuaXRQcmljZSkgPyBCaWdJbnQob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5nYXNVbml0UHJpY2UpIDogdm9pZCAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlcnJvclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZGVzZXJpYWxpemVyMSA9IG5ldyBCQ1MyLkRlc2VyaWFsaXplcihyZXNwb25zZSk7XG4gICAgICAgICAgY29uc3QgZGVzZXJpYWxpemVkU2lnbmF0dXJlID0gVHhuQnVpbGRlclR5cGVzNC5TaWduZWRUcmFuc2FjdGlvbi5kZXNlcmlhbGl6ZShkZXNlcmlhbGl6ZXIxKTtcbiAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbkF1dGhlbnRpY2F0b3IgPSBkZXNlcmlhbGl6ZWRTaWduYXR1cmUuYXV0aGVudGljYXRvcjtcbiAgICAgICAgICBjb25zdCBwdWJsaWNLZXkgPSB0cmFuc2FjdGlvbkF1dGhlbnRpY2F0b3IucHVibGljX2tleS52YWx1ZTtcbiAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSB0cmFuc2FjdGlvbkF1dGhlbnRpY2F0b3Iuc2lnbmF0dXJlLnZhbHVlO1xuICAgICAgICAgIGNvbnN0IGFjY291bnRBdXRoZW50aWNhdG9yID0gbmV3IEFjY291bnRBdXRoZW50aWNhdG9yRWQyNTUxOShcbiAgICAgICAgICAgIG5ldyBFZDI1NTE5UHVibGljS2V5KHB1YmxpY0tleSksXG4gICAgICAgICAgICBuZXcgRWQyNTUxOVNpZ25hdHVyZShzaWduYXR1cmUpXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gYWNjb3VudEF1dGhlbnRpY2F0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBXYWxsZXROb3RTdXBwb3J0ZWRNZXRob2QoXG4gICAgICAgIGBTaWduIFRyYW5zYWN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgJHsoX2cgPSB0aGlzLndhbGxldCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLm5hbWV9YFxuICAgICAgKS5tZXNzYWdlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0U2lnblRyYW5zYWN0aW9uRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZW5zdXJlV2FsbGV0RXhpc3RzKHRoaXMuX3dhbGxldCk7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwic2lnbl9tZXNzYWdlXCIpO1xuICAgICAgaWYgKHRoaXMuX3dhbGxldC5pc0FJUDYyU3RhbmRhcmQpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25NZXNzYWdlKG1lc3NhZ2UsIHRoaXMuX3dhbGxldCk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3dhbGxldC5zaWduTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBzdWJtaXRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmVuc3VyZVdhbGxldEV4aXN0cyh0aGlzLl93YWxsZXQpO1xuICAgICAgY29uc3QgeyBhZGRpdGlvbmFsU2lnbmVyc0F1dGhlbnRpY2F0b3JzIH0gPSB0cmFuc2FjdGlvbjtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uVHlwZSA9IGFkZGl0aW9uYWxTaWduZXJzQXV0aGVudGljYXRvcnMgIT09IHZvaWQgMCA/IFwibXVsdGktYWdlbnRcIiA6IFwic2ltcGxlXCI7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwic3VibWl0X3RyYW5zYWN0aW9uXCIsIHtcbiAgICAgICAgdHJhbnNhY3Rpb25fdHlwZTogdHJhbnNhY3Rpb25UeXBlXG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLl93YWxsZXQuc3VibWl0VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ1RyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy5fd2FsbGV0LnN1Ym1pdFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdUcmFuc2FjdGlvbjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFwdG9zQ29uZmlnID0gZ2V0QXB0b3NDb25maWcodGhpcy5fbmV0d29yaywgdGhpcy5fZGFwcENvbmZpZyk7XG4gICAgICBjb25zdCBhcHRvcyA9IG5ldyBBcHRvczMoYXB0b3NDb25maWcpO1xuICAgICAgaWYgKGFkZGl0aW9uYWxTaWduZXJzQXV0aGVudGljYXRvcnMgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBtdWx0aUFnZW50VHhuID0ge1xuICAgICAgICAgIC4uLnRyYW5zYWN0aW9uLFxuICAgICAgICAgIGFkZGl0aW9uYWxTaWduZXJzQXV0aGVudGljYXRvcnNcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFwdG9zLnRyYW5zYWN0aW9uLnN1Ym1pdC5tdWx0aUFnZW50KG11bHRpQWdlbnRUeG4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFwdG9zLnRyYW5zYWN0aW9uLnN1Ym1pdC5zaW1wbGUodHJhbnNhY3Rpb24pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0U2lnblRyYW5zYWN0aW9uRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBvbkFjY291bnRDaGFuZ2UoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZW5zdXJlV2FsbGV0RXhpc3RzKHRoaXMuX3dhbGxldCk7XG4gICAgICBhd2FpdCB0aGlzLl93YWxsZXQub25BY2NvdW50Q2hhbmdlKFxuICAgICAgICBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0QWNjb3VudChkYXRhKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldEFuc05hbWUoKTtcbiAgICAgICAgICB0aGlzLnJlY29yZEV2ZW50KFwiYWNjb3VudF9jaGFuZ2VcIik7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiYWNjb3VudENoYW5nZVwiLCB0aGlzLl9hY2NvdW50KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldEFjY291bnRDaGFuZ2VFcnJvcihlcnJNc2cpLm1lc3NhZ2U7XG4gICAgfVxuICB9XG4gIGFzeW5jIG9uTmV0d29ya0NoYW5nZSgpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5lbnN1cmVXYWxsZXRFeGlzdHModGhpcy5fd2FsbGV0KTtcbiAgICAgIGF3YWl0IHRoaXMuX3dhbGxldC5vbk5ldHdvcmtDaGFuZ2UoXG4gICAgICAgIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXROZXR3b3JrKGRhdGEpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0QW5zTmFtZSgpO1xuICAgICAgICAgIHRoaXMuZW1pdChcIm5ldHdvcmtDaGFuZ2VcIiwgdGhpcy5fbmV0d29yayk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVyck1zZyA9IGdlbmVyYWxpemVkRXJyb3JNZXNzYWdlKGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBXYWxsZXROZXR3b3JrQ2hhbmdlRXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxuICBhc3luYyBjaGFuZ2VOZXR3b3JrKG5ldHdvcmspIHtcbiAgICB2YXIgX2E7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZW5zdXJlV2FsbGV0RXhpc3RzKHRoaXMuX3dhbGxldCk7XG4gICAgICB0aGlzLnJlY29yZEV2ZW50KFwiY2hhbmdlX25ldHdvcmtfcmVxdWVzdFwiLCB7XG4gICAgICAgIGZyb206IChfYSA9IHRoaXMuX25ldHdvcmspID09IG51bGwgPyB2b2lkIDAgOiBfYS5uYW1lLFxuICAgICAgICB0bzogbmV0d29ya1xuICAgICAgfSk7XG4gICAgICBjb25zdCBjaGFpbklkID0gbmV0d29yayA9PT0gTmV0d29yazQuREVWTkVUID8gYXdhaXQgZmV0Y2hEZXZuZXRDaGFpbklkKCkgOiBOZXR3b3JrVG9DaGFpbklkW25ldHdvcmtdO1xuICAgICAgaWYgKHRoaXMuX3dhbGxldC5jaGFuZ2VOZXR3b3JrKSB7XG4gICAgICAgIGNvbnN0IG5ldHdvcmtJbmZvID0ge1xuICAgICAgICAgIG5hbWU6IG5ldHdvcmssXG4gICAgICAgICAgY2hhaW5JZFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3dhbGxldC5jaGFuZ2VOZXR3b3JrKG5ldHdvcmtJbmZvKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gVXNlclJlc3BvbnNlU3RhdHVzMi5SRUpFQ1RFRCkge1xuICAgICAgICAgIHRocm93IG5ldyBXYWxsZXRDb25uZWN0aW9uRXJyb3IoXCJVc2VyIGhhcyByZWplY3RlZCB0aGUgcmVxdWVzdFwiKS5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5hcmdzO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IFdhbGxldENoYW5nZU5ldHdvcmtFcnJvcihcbiAgICAgICAgYCR7dGhpcy5fd2FsbGV0Lm5hbWV9IGRvZXMgbm90IHN1cHBvcnQgY2hhbmdpbmcgbmV0d29yayByZXF1ZXN0YFxuICAgICAgKS5tZXNzYWdlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSBnZW5lcmFsaXplZEVycm9yTWVzc2FnZShlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgV2FsbGV0Q2hhbmdlTmV0d29ya0Vycm9yKGVyck1zZykubWVzc2FnZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2VBbmRWZXJpZnkobWVzc2FnZSkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmVuc3VyZVdhbGxldEV4aXN0cyh0aGlzLl93YWxsZXQpO1xuICAgICAgdGhpcy5lbnN1cmVBY2NvdW50RXhpc3RzKHRoaXMuX2FjY291bnQpO1xuICAgICAgdGhpcy5yZWNvcmRFdmVudChcInNpZ25fbWVzc2FnZV9hbmRfdmVyaWZ5XCIpO1xuICAgICAgaWYgKHRoaXMuX3dhbGxldC5pc0FJUDYyU3RhbmRhcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2FsbGV0U3RhbmRhcmRDb3JlLnNpZ25NZXNzYWdlQW5kVmVyaWZ5KFxuICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgdGhpcy5fd2FsbGV0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy53YWxsZXRDb3JlVjEuc2lnbk1lc3NhZ2VBbmRWZXJpZnkoXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHRoaXMuX3dhbGxldCxcbiAgICAgICAgdGhpcy5fYWNjb3VudFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyTXNnID0gZ2VuZXJhbGl6ZWRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlQW5kVmVyaWZ5RXJyb3IoZXJyTXNnKS5tZXNzYWdlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gc3JjL2luZGV4LnRzXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICB3aW5kb3cuV0FMTEVUX0FEQVBURVJfQ09SRV9WRVJTSU9OID0gV0FMTEVUX0FEQVBURVJfQ09SRV9WRVJTSU9OO1xufVxuZXhwb3J0IHtcbiAgQVBUT1NfQ09OTkVDVF9BQ0NPVU5UX1VSTCxcbiAgQVBUT1NfQ09OTkVDVF9CQVNFX1VSTCxcbiAgQ2hhaW5JZFRvQW5zU3VwcG9ydGVkTmV0d29ya01hcCxcbiAgTmV0d29ya05hbWUsXG4gIFR4bkJ1aWxkZXJUeXBlczMgYXMgVHhuQnVpbGRlclR5cGVzLFxuICBUeXBlczMgYXMgVHlwZXMsXG4gIFdhbGxldENvcmUsXG4gIFdhbGxldENvcmVWMSxcbiAgV2FsbGV0UmVhZHlTdGF0ZSxcbiAgV2FsbGV0U3RhbmRhcmRDb3JlLFxuICBhcmVCQ1NBcmd1bWVudHMsXG4gIGNvbnZlcnROZXR3b3JrLFxuICBjb252ZXJ0UGF5bG9hZElucHV0VjFUb1YyLFxuICBjb252ZXJ0VjJQYXlsb2FkVG9WMUpTT05QYXlsb2FkLFxuICBjb252ZXJ0VjJUcmFuc2FjdGlvblBheWxvYWRUb1YxQkNTUGF5bG9hZCxcbiAgZmV0Y2hEZXZuZXRDaGFpbklkLFxuICBnZW5lcmFsaXplZEVycm9yTWVzc2FnZSxcbiAgZ2VuZXJhdGVUcmFuc2FjdGlvblBheWxvYWRGcm9tVjFJbnB1dCxcbiAgZ2V0QXB0b3NDb25maWcsXG4gIGdldEFwdG9zQ29ubmVjdFdhbGxldHMsXG4gIGdldExvY2FsU3RvcmFnZSxcbiAgZ3JvdXBBbmRTb3J0V2FsbGV0cyxcbiAgaGFuZGxlUHVibGlzaFBhY2thZ2VUcmFuc2FjdGlvbixcbiAgaXNBcHRvc0Nvbm5lY3RXYWxsZXQsXG4gIGlzQXB0b3NOZXR3b3JrLFxuICBpc0luQXBwQnJvd3NlcixcbiAgaXNJbnN0YWxsUmVxdWlyZWQsXG4gIGlzSW5zdGFsbGVkT3JMb2FkYWJsZSxcbiAgaXNNb2JpbGUsXG4gIGlzUmVkaXJlY3RhYmxlLFxuICBwYXJ0aXRpb25XYWxsZXRzLFxuICByZW1vdmVMb2NhbFN0b3JhZ2UsXG4gIHNjb3BlUG9sbGluZ0RldGVjdGlvblN0cmF0ZWd5LFxuICBzZXRMb2NhbFN0b3JhZ2UsXG4gIHRydW5jYXRlQWRkcmVzc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@aptos-labs+wallet-adapter-core@4.20.0_@aptos-labs+ts-sdk@1.30.0_@mizuwallet-sdk+core@1.4.0_@_cgmcuphqum2bcnvteqmmfjs2ba/node_modules/@aptos-labs/wallet-adapter-core/dist/index.mjs\n");

/***/ })

};
;