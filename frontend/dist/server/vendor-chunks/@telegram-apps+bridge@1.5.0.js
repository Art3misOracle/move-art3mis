"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps+bridge@1.5.0";
exports.ids = ["vendor-chunks/@telegram-apps+bridge@1.5.0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@telegram-apps+bridge@1.5.0/node_modules/@telegram-apps/bridge/dist/index.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@telegram-apps+bridge@1.5.0/node_modules/@telegram-apps/bridge/dist/index.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ ne),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ re),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ He),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Je),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ Be),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ge),\n/* harmony export */   EnhancedPromise: () => (/* binding */ S),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ te),\n/* harmony export */   camelToKebab: () => (/* binding */ it),\n/* harmony export */   camelToSnake: () => (/* binding */ ct),\n/* harmony export */   captureSameReq: () => (/* binding */ et),\n/* harmony export */   compareVersions: () => (/* binding */ tt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ k),\n/* harmony export */   createLogger: () => (/* binding */ ke),\n/* harmony export */   createPostEvent: () => (/* binding */ mt),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ L),\n/* harmony export */   defineEventHandlers: () => (/* binding */ bt),\n/* harmony export */   deleteCssVar: () => (/* binding */ ft),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ x),\n/* harmony export */   getStorageValue: () => (/* binding */ xe),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ Q),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Et),\n/* harmony export */   isAbortError: () => (/* binding */ ot),\n/* harmony export */   isCanceledError: () => (/* binding */ st),\n/* harmony export */   isIframe: () => (/* binding */ Ne),\n/* harmony export */   isTMA: () => (/* binding */ lt),\n/* harmony export */   isTimeoutError: () => (/* binding */ rt),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ _t),\n/* harmony export */   off: () => (/* binding */ wt),\n/* harmony export */   on: () => (/* binding */ Fe),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ gt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ yt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Ye),\n/* harmony export */   setCssVar: () => (/* binding */ pt),\n/* harmony export */   setStorageValue: () => (/* binding */ je),\n/* harmony export */   sleep: () => (/* binding */ at),\n/* harmony export */   snakeToCamel: () => (/* binding */ ut),\n/* harmony export */   subscribe: () => (/* binding */ ht),\n/* harmony export */   supports: () => (/* binding */ H),\n/* harmony export */   unsubscribe: () => (/* binding */ dt)\n/* harmony export */ });\nclass m extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, m.prototype);\n  }\n}\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new m(\n        K,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new m(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new m(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new m(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction _(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return V(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new m(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), l = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return V(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = l(), o = l(!0), s = $(!0), a = _(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: _(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(l()(e))), q = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction j(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = l(), n = l(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    defaultColors: [\"tgWebAppDefaultColors\", q(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", q()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Se(e) {\n  const {\n    initDataRaw: t,\n    startParam: n,\n    showSettings: r,\n    botInline: o,\n    fullscreen: s,\n    defaultColors: a\n  } = e, i = new URLSearchParams();\n  return i.set(\"tgWebAppPlatform\", e.platform), i.set(\"tgWebAppThemeParams\", /* @__PURE__ */ j(e.themeParams)), i.set(\"tgWebAppVersion\", e.version), t && i.set(\"tgWebAppData\", t), n && i.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && i.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && i.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && i.set(\"tgWebAppFullscreen\", s ? \"1\" : \"0\"), a && i.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ j(a)), i.toString();\n}\nconst X = _({\n  eventType: l(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Y = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction $e(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = _({\n  TelegramWebviewProxy: _({ postEvent: Y() })()\n});\nfunction Q(e) {\n  return Ce().isValid(e);\n}\nfunction Ne() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar De = Object.defineProperty, Ue = (e, t, n) => t in e ? De(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, ee = (e, t, n) => Ue(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction te(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction k(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction We(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction L(e) {\n  return (t) => We(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst rt = L(oe), ot = L(ne), st = L(re);\nfunction F(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = k(), d = (E) => (...ge) => (h(), E(...ge)), T = new AbortController(), { signal: A } = T;\n      a = d((E) => {\n        T.abort(E), c(E);\n      }), s = d(i), u && f(\n        te(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const E = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(E);\n        });\n      }\n      r && r(s, a, A);\n    }), ee(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction J(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass S extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), ee(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new S(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new S((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new S((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return J(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return J(super.then(t, n), this);\n  }\n}\nfunction at(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction je(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction xe(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction it(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction ke(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction ft(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Le(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction y(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, Le(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, A]) => T === u && A.once === h.once && A.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Oe(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst W = [];\nfunction Oe(e) {\n  W.length && W[W.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ y(!1), [O, Ie] = /* @__PURE__ */ ke(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: _({\n    req_id: l(),\n    data: (e) => e === null ? e : l(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: _({\n    req_id: l(),\n    result: (e) => e,\n    error: l(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? _({\n    button_id: (t) => t == null ? void 0 : l()(t)\n  })()(e) : {}),\n  viewport_changed: _({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Me(e) {\n  const t = window, [, n] = k(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    te(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = X()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        O(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Ie(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst C = /* @__PURE__ */ y(), N = /* @__PURE__ */ y();\nfunction ie() {\n  return N() || N.set(Me(C.set)), C;\n}\nconst v = /* @__PURE__ */ y({});\nfunction ce(e) {\n  let t = v()[e];\n  return t || (t = /* @__PURE__ */ y(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), v.set({ ...v(), [e]: t })), t;\n}\nfunction Fe(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Je = \"ERR_METHOD_UNSUPPORTED\", Be = \"ERR_RETRIEVE_LP_FAILED\", He = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ge = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ y(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (Q(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (Ne())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (_({ notify: Y() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ge);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = k();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Fe(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction le(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ve() {\n  return le(window.location.href);\n}\nfunction Ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return le(e.name);\n}\nconst ze = \"launchParams\";\nfunction Xe() {\n  return I(xe(ze) || \"\");\n}\nfunction _e(e) {\n  je(\"launchParams\", /* @__PURE__ */ Se(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Ye() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ve,\n    // Then, try using the lower level API - window.performance.\n    Ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Xe\n  ])\n    try {\n      const n = t();\n      return _e(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(Be, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"ðŸ“– Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `â€” ${be(t)}`)\n  ].join(`\n`));\n}\nfunction lt(e) {\n  if (e === \"simple\")\n    try {\n      return Ye(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (Q(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction x(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Qe(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = X()(t);\n      n === \"web_app_request_theme\" && x(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ j(e))\n      }), n === \"web_app_request_viewport\" && x(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction _t(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  _e(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      Qe(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction bt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = x;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction gt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction wt(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction ht(e, t) {\n  return ie().sub(e, t);\n}\nfunction dt(e, t) {\n  C.unsub(e, t);\n}\nfunction et(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction B(e) {\n  return e.split(\".\").map(Number);\n}\nfunction tt(e, t) {\n  const n = B(e), r = B(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return tt(e, t) <= 0;\n}\nfunction H(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n      return p(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction mt(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = He) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Je), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => H(r, e) ? $e(o) && r === \"web_app_set_header_color\" && \"color\" in o && !H(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction Et(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: et(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction nt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction yt() {\n  var e;\n  (e = N()) == null || e(), [\n    ...Object.values(v()),\n    v,\n    C,\n    N,\n    ue,\n    ae\n  ].forEach(nt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHRlbGVncmFtLWFwcHMrYnJpZGdlQDEuNS4wL25vZGVfbW9kdWxlcy9AdGVsZWdyYW0tYXBwcy9icmlkZ2UvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnQkFBZ0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLHVCQUF1QixFQUFFLG1CQUFtQixtQ0FBbUMsRUFBRSxHQUFHO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHlCQUF5QixFQUFFO0FBQzNCO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0RBQWdELGtCQUFrQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsMENBQTBDLFFBQVEsUUFBUSxFQUFFLCtDQUErQyxFQUFFLDZCQUE2QixFQUFFLHdDQUF3QyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1Q0FBdUMsbUJBQW1CLHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQSxHQUFHLFVBQVUscUJBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FydDNtaXNvcmFjbGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHRlbGVncmFtLWFwcHMrYnJpZGdlQDEuNS4wL25vZGVfbW9kdWxlcy9AdGVsZWdyYW0tYXBwcy9icmlkZ2UvZGlzdC9pbmRleC5qcz9jMTFjIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIG0gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHQsIG4sIHIpIHtcbiAgICBzdXBlcihcbiAgICAgIHR5cGVvZiBuID09IFwib2JqZWN0XCIgPyBuLm1lc3NhZ2UgOiBuIHx8IHQsXG4gICAgICB7XG4gICAgICAgIGNhdXNlOiB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5jYXVzZSA6IHJcbiAgICAgIH1cbiAgICApLCB0aGlzLnR5cGUgPSB0LCBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbS5wcm90b3R5cGUpO1xuICB9XG59XG5mdW5jdGlvbiBHKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB3ZShlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbmNvbnN0IGhlID0gXCJFUlJfSU5WQUxJRF9WQUxVRVwiLCBkZSA9IFwiRVJSX1VORVhQRUNURURfVkFMVUVcIiwgbWUgPSBcIkVSUl9VTkVYUEVDVEVEX1RZUEVcIiwgSyA9IFwiRVJSX1BBUlNFXCI7XG5mdW5jdGlvbiBWKGUsIHQpIHtcbiAgY29uc3QgbiA9IHt9O1xuICBmb3IgKGNvbnN0IHIgaW4gZSkge1xuICAgIGNvbnN0IG8gPSBlW3JdO1xuICAgIGlmICghbylcbiAgICAgIGNvbnRpbnVlO1xuICAgIGxldCBzLCBhO1xuICAgIHR5cGVvZiBvID09IFwiZnVuY3Rpb25cIiA/IChzID0gciwgYSA9IG8pIDogW3MsIGFdID0gbztcbiAgICB0cnkge1xuICAgICAgY29uc3QgaSA9IGEodChzKSk7XG4gICAgICBpICE9PSB2b2lkIDAgJiYgKG5bcl0gPSBpKTtcbiAgICB9IGNhdGNoIChpKSB7XG4gICAgICB0aHJvdyBuZXcgbShcbiAgICAgICAgSyxcbiAgICAgICAgYFBhcnNlciBmb3IgXCIke3J9XCIgcHJvcGVydHkgZmFpbGVkJHtzID09PSByID8gXCJcIiA6IGAuIFNvdXJjZSBmaWVsZDogXCIke3N9XCJgfWAsXG4gICAgICAgIGlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gWihlKSB7XG4gIGxldCB0ID0gZTtcbiAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgdHJ5IHtcbiAgICAgIHQgPSBKU09OLnBhcnNlKHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgIHRocm93IG5ldyBtKGhlLCB7IGNhdXNlOiBuIH0pO1xuICAgIH1cbiAgaWYgKHR5cGVvZiB0ICE9IFwib2JqZWN0XCIgfHwgIXQgfHwgQXJyYXkuaXNBcnJheSh0KSlcbiAgICB0aHJvdyBuZXcgbShkZSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gZyhlLCB0KSB7XG4gIHJldHVybiAobikgPT4ge1xuICAgIGNvbnN0IHIgPSAobykgPT4ge1xuICAgICAgaWYgKCEobiAmJiBvID09PSB2b2lkIDApKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0KG8pO1xuICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IG0oSywge1xuICAgICAgICAgICAgbWVzc2FnZTogYFwiJHtlfVwiIHRyYW5zZm9ybWVyIGZhaWxlZCB0byBwYXJzZSB0aGUgdmFsdWVgLFxuICAgICAgICAgICAgY2F1c2U6IHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuYXNzaWduKFxuICAgICAgcixcbiAgICAgIHtcbiAgICAgICAgaXNWYWxpZChvKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiByKG8pLCAhMDtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xufVxuZnVuY3Rpb24gXyhlLCB0KSB7XG4gIHJldHVybiBnKHQgfHwgXCJvYmplY3RcIiwgKG4pID0+IHtcbiAgICBjb25zdCByID0gWihuKTtcbiAgICByZXR1cm4gVihlLCAobykgPT4gcltvXSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gUihlKSB7XG4gIHRocm93IG5ldyBtKG1lLCBgVW5leHBlY3RlZCB2YWx1ZSByZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbn1cbmNvbnN0ICQgPSBnKFwiYm9vbGVhblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJib29sZWFuXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSBTdHJpbmcoZSk7XG4gIGlmICh0ID09PSBcIjFcIiB8fCB0ID09PSBcInRydWVcIilcbiAgICByZXR1cm4gITA7XG4gIGlmICh0ID09PSBcIjBcIiB8fCB0ID09PSBcImZhbHNlXCIpXG4gICAgcmV0dXJuICExO1xuICBSKGUpO1xufSksIGwgPSBnKFwic3RyaW5nXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBlID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIGUudG9TdHJpbmcoKTtcbiAgUihlKTtcbn0pLCBQID0gZyhcIm51bWJlclwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZTtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCB0ID0gTnVtYmVyKGUpO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgUihlKTtcbn0pLCBFZSA9IGcoXCJkYXRlXCIsIChlKSA9PiBlIGluc3RhbmNlb2YgRGF0ZSA/IGUgOiBuZXcgRGF0ZShQKCkoZSkgKiAxZTMpKTtcbmZ1bmN0aW9uIHooZSwgdCkge1xuICByZXR1cm4gZyh0IHx8IFwic2VhcmNoUGFyYW1zXCIsIChuKSA9PiB7XG4gICAgdHlwZW9mIG4gIT0gXCJzdHJpbmdcIiAmJiAhKG4gaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpICYmIFIobik7XG4gICAgY29uc3QgciA9IHR5cGVvZiBuID09IFwic3RyaW5nXCIgPyBuZXcgVVJMU2VhcmNoUGFyYW1zKG4pIDogbjtcbiAgICByZXR1cm4gVihlLCAobykgPT4ge1xuICAgICAgY29uc3QgcyA9IHIuZ2V0KG8pO1xuICAgICAgcmV0dXJuIHMgPT09IG51bGwgPyB2b2lkIDAgOiBzO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFUoZSkge1xuICBmb3IgKGNvbnN0IHQgaW4gZSlcbiAgICBlW3RdID0gW0codCksIGVbdF1dO1xuICByZXR1cm4gZTtcbn1cbmNvbnN0IHllID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IFAoKSwgbiA9IFAoITApLCByID0gbCgpLCBvID0gbCghMCksIHMgPSAkKCEwKSwgYSA9IF8oVSh7XG4gICAgYWRkZWRUb0F0dGFjaG1lbnRNZW51OiBzLFxuICAgIGFsbG93c1dyaXRlVG9QbTogcyxcbiAgICBmaXJzdE5hbWU6IHIsXG4gICAgaWQ6IHQsXG4gICAgaXNCb3Q6IHMsXG4gICAgaXNQcmVtaXVtOiBzLFxuICAgIGxhbmd1YWdlQ29kZTogbyxcbiAgICBsYXN0TmFtZTogbyxcbiAgICBwaG90b1VybDogbyxcbiAgICB1c2VybmFtZTogb1xuICB9KSwgXCJVc2VyXCIpKCEwKTtcbiAgcmV0dXJuIHooXG4gICAgVSh7XG4gICAgICBhdXRoRGF0ZTogRWUoKSxcbiAgICAgIGNhblNlbmRBZnRlcjogbixcbiAgICAgIGNoYXQ6IF8oXG4gICAgICAgIFUoe1xuICAgICAgICAgIGlkOiB0LFxuICAgICAgICAgIHR5cGU6IHIsXG4gICAgICAgICAgdGl0bGU6IHIsXG4gICAgICAgICAgcGhvdG9Vcmw6IG8sXG4gICAgICAgICAgdXNlcm5hbWU6IG9cbiAgICAgICAgfSksXG4gICAgICAgIFwiQ2hhdFwiXG4gICAgICApKCEwKSxcbiAgICAgIGNoYXRJbnN0YW5jZTogbyxcbiAgICAgIGNoYXRUeXBlOiBvLFxuICAgICAgaGFzaDogcixcbiAgICAgIHF1ZXJ5SWQ6IG8sXG4gICAgICByZWNlaXZlcjogYSxcbiAgICAgIHN0YXJ0UGFyYW06IG8sXG4gICAgICB1c2VyOiBhXG4gICAgfSksXG4gICAgXCJpbml0RGF0YVwiXG4gICkoZSk7XG59O1xuZnVuY3Rpb24gdmUoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17Nn0kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFBlKGUpIHtcbiAgcmV0dXJuIC9eI1tcXGRhLWZdezN9JC9pLnRlc3QoZSk7XG59XG5mdW5jdGlvbiBSZShlKSB7XG4gIGNvbnN0IHQgPSBlLnJlcGxhY2UoL1xccy9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAodmUodCkpXG4gICAgcmV0dXJuIHQ7XG4gIGlmIChQZSh0KSkge1xuICAgIGxldCByID0gXCIjXCI7XG4gICAgZm9yIChsZXQgbyA9IDA7IG8gPCAzOyBvICs9IDEpXG4gICAgICByICs9IHRbMSArIG9dLnJlcGVhdCgyKTtcbiAgICByZXR1cm4gcjtcbiAgfVxuICBjb25zdCBuID0gdC5tYXRjaCgvXnJnYlxcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pXFwpJC8pIHx8IHQubWF0Y2goL15yZ2JhXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSksXFxkezEsM31cXCkkLyk7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIFwiJHtlfVwiIGRvZXMgbm90IHNhdGlzZnkgYW55IG9mIGtub3duIFJHQiBmb3JtYXRzLmApO1xuICByZXR1cm4gbi5zbGljZSgxKS5yZWR1Y2UoKHIsIG8pID0+IHtcbiAgICBjb25zdCBzID0gcGFyc2VJbnQobywgMTApLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gciArIChzLmxlbmd0aCA9PT0gMSA/IFwiMFwiIDogXCJcIikgKyBzO1xuICB9LCBcIiNcIik7XG59XG5jb25zdCBUZSA9IGcoXCJyZ2JcIiwgKGUpID0+IFJlKGwoKShlKSkpLCBxID0gZyhcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBUZSghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFooZSkpLnJlZHVjZSgobiwgW3IsIG9dKSA9PiAoblt3ZShyKV0gPSB0KG8pLCBuKSwge30pO1xuICB9XG4pO1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGooZSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXMoZSkubWFwKChbdCwgbl0pID0+IFtHKHQpLCBuXSlcbiAgICApXG4gICk7XG59XG5jb25zdCBBZSA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBsKCksIG4gPSBsKCEwKSwgciA9ICQoITApO1xuICByZXR1cm4geih7XG4gICAgYm90SW5saW5lOiBbXCJ0Z1dlYkFwcEJvdElubGluZVwiLCByXSxcbiAgICBkZWZhdWx0Q29sb3JzOiBbXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgcSghMCldLFxuICAgIGZ1bGxzY3JlZW46IFtcInRnV2ViQXBwRnVsbHNjcmVlblwiLCByXSxcbiAgICBpbml0RGF0YTogW1widGdXZWJBcHBEYXRhXCIsIHllKCEwKV0sXG4gICAgaW5pdERhdGFSYXc6IFtcInRnV2ViQXBwRGF0YVwiLCBuXSxcbiAgICBwbGF0Zm9ybTogW1widGdXZWJBcHBQbGF0Zm9ybVwiLCB0XSxcbiAgICBzaG93U2V0dGluZ3M6IFtcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIHJdLFxuICAgIHN0YXJ0UGFyYW06IFtcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCBuXSxcbiAgICB0aGVtZVBhcmFtczogW1widGdXZWJBcHBUaGVtZVBhcmFtc1wiLCBxKCldLFxuICAgIHZlcnNpb246IFtcInRnV2ViQXBwVmVyc2lvblwiLCB0XVxuICB9LCBcImxhdW5jaFBhcmFtc1wiKShlKTtcbn07XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gU2UoZSkge1xuICBjb25zdCB7XG4gICAgaW5pdERhdGFSYXc6IHQsXG4gICAgc3RhcnRQYXJhbTogbixcbiAgICBzaG93U2V0dGluZ3M6IHIsXG4gICAgYm90SW5saW5lOiBvLFxuICAgIGZ1bGxzY3JlZW46IHMsXG4gICAgZGVmYXVsdENvbG9yczogYVxuICB9ID0gZSwgaSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgcmV0dXJuIGkuc2V0KFwidGdXZWJBcHBQbGF0Zm9ybVwiLCBlLnBsYXRmb3JtKSwgaS5zZXQoXCJ0Z1dlYkFwcFRoZW1lUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyBqKGUudGhlbWVQYXJhbXMpKSwgaS5zZXQoXCJ0Z1dlYkFwcFZlcnNpb25cIiwgZS52ZXJzaW9uKSwgdCAmJiBpLnNldChcInRnV2ViQXBwRGF0YVwiLCB0KSwgbiAmJiBpLnNldChcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCBuKSwgdHlwZW9mIHIgPT0gXCJib29sZWFuXCIgJiYgaS5zZXQoXCJ0Z1dlYkFwcFNob3dTZXR0aW5nc1wiLCByID8gXCIxXCIgOiBcIjBcIiksIHR5cGVvZiBvID09IFwiYm9vbGVhblwiICYmIGkuc2V0KFwidGdXZWJBcHBCb3RJbmxpbmVcIiwgbyA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgcyA9PSBcImJvb2xlYW5cIiAmJiBpLnNldChcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBzID8gXCIxXCIgOiBcIjBcIiksIGEgJiYgaS5zZXQoXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgLyogQF9fUFVSRV9fICovIGooYSkpLCBpLnRvU3RyaW5nKCk7XG59XG5jb25zdCBYID0gXyh7XG4gIGV2ZW50VHlwZTogbCgpLFxuICBldmVudERhdGE6IChlKSA9PiBlXG59LCBcIm1pbmlBcHBzTWVzc2FnZVwiKSwgWSA9IGcoXCJmblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiKVxuICAgIHJldHVybiBlO1xuICBSKGUpO1xufSk7XG5mdW5jdGlvbiAkZShlKSB7XG4gIHJldHVybiAhIWUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShlKTtcbn1cbmNvbnN0IENlID0gXyh7XG4gIFRlbGVncmFtV2Vidmlld1Byb3h5OiBfKHsgcG9zdEV2ZW50OiBZKCkgfSkoKVxufSk7XG5mdW5jdGlvbiBRKGUpIHtcbiAgcmV0dXJuIENlKCkuaXNWYWxpZChlKTtcbn1cbmZ1bmN0aW9uIE5lKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICEwO1xuICB9XG59XG52YXIgRGUgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIFVlID0gKGUsIHQsIG4pID0+IHQgaW4gZSA/IERlKGUsIHQsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IG4gfSkgOiBlW3RdID0gbiwgZWUgPSAoZSwgdCwgbikgPT4gVWUoZSwgdHlwZW9mIHQgIT0gXCJzeW1ib2xcIiA/IHQgKyBcIlwiIDogdCwgbik7XG5jbGFzcyBiIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCBuLCByKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5tZXNzYWdlIDogbiB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIG4gPT0gXCJvYmplY3RcIiA/IG4uY2F1c2UgOiByXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGIucHJvdG90eXBlKTtcbiAgfVxufVxuZnVuY3Rpb24gdGUoZSwgdCwgbikge1xuICByZXR1cm4gZS5hZGRFdmVudExpc3RlbmVyKHQsIG4pLCAoKSA9PiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCwgbik7XG59XG5mdW5jdGlvbiBrKC4uLmUpIHtcbiAgY29uc3QgdCA9IGUuZmxhdCgxKTtcbiAgcmV0dXJuIFtcbiAgICB0LnB1c2guYmluZCh0KSxcbiAgICAoKSA9PiB7XG4gICAgICB0LmZvckVhY2goKG4pID0+IHtcbiAgICAgICAgbigpO1xuICAgICAgfSk7XG4gICAgfVxuICBdO1xufVxuZnVuY3Rpb24gV2UoZSwgdCkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIGIgJiYgZS50eXBlID09PSB0O1xufVxuZnVuY3Rpb24gTChlKSB7XG4gIHJldHVybiAodCkgPT4gV2UodCwgZSk7XG59XG5jb25zdCBuZSA9IFwiRVJSX0FCT1JURURcIiwgcmUgPSBcIkVSUl9DQU5DRUxFRFwiLCBvZSA9IFwiRVJSX1RJTUVEX09VVFwiO1xuZnVuY3Rpb24gTShlKSB7XG4gIHJldHVybiBuZXcgYihuZSwgeyBjYXVzZTogZSB9KTtcbn1cbmNvbnN0IHJ0ID0gTChvZSksIG90ID0gTChuZSksIHN0ID0gTChyZSk7XG5mdW5jdGlvbiBGKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVqZWN0ID0gdC5yZWplY3QsIGU7XG59XG5jbGFzcyB3IGV4dGVuZHMgUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKHQsIG4pIHtcbiAgICBsZXQgciwgbztcbiAgICB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyAociA9IHQsIG8gPSBuKSA6IG8gPSB0O1xuICAgIGxldCBzLCBhO1xuICAgIHN1cGVyKChpLCBjKSA9PiB7XG4gICAgICBvIHx8IChvID0ge30pO1xuICAgICAgY29uc3QgeyBhYm9ydFNpZ25hbDogdSB9ID0gbztcbiAgICAgIGlmICh1ICYmIHUuYWJvcnRlZClcbiAgICAgICAgcmV0dXJuIGMoTSh1LnJlYXNvbikpO1xuICAgICAgY29uc3QgW2YsIGhdID0gaygpLCBkID0gKEUpID0+ICguLi5nZSkgPT4gKGgoKSwgRSguLi5nZSkpLCBUID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCB7IHNpZ25hbDogQSB9ID0gVDtcbiAgICAgIGEgPSBkKChFKSA9PiB7XG4gICAgICAgIFQuYWJvcnQoRSksIGMoRSk7XG4gICAgICB9KSwgcyA9IGQoaSksIHUgJiYgZihcbiAgICAgICAgdGUodSwgXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgYShNKHUucmVhc29uKSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgY29uc3QgeyB0aW1lb3V0OiBEIH0gPSBvO1xuICAgICAgaWYgKEQpIHtcbiAgICAgICAgY29uc3QgRSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGEobmV3IGIob2UsIGBUaW1lb3V0IHJlYWNoZWQ6ICR7RH1tc2ApKTtcbiAgICAgICAgfSwgRCk7XG4gICAgICAgIGYoKCkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dChFKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByICYmIHIocywgYSwgQSk7XG4gICAgfSksIGVlKHRoaXMsIFwicmVqZWN0XCIpLCB0aGlzLnJlamVjdCA9IGE7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQmV0dGVyUHJvbWlzZSBpbnN0YW5jZSB1c2luZyBleGVjdXRvciwgcmVzb2x2aW5nIHByb21pc2Ugd2hlbiBhIHJlc3VsdFxuICAgKiB3YXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSBmbiAtIGZ1bmN0aW9uIHJldHVybmluZyBwcm9taXNlIHJlc3VsdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICBzdGF0aWMgd2l0aEZuKHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IHcoKHIsIG8sIHMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGEgPSB0KHMpO1xuICAgICAgICByZXR1cm4gYSBpbnN0YW5jZW9mIFByb21pc2UgPyBhLnRoZW4ociwgbykgOiByKGEpO1xuICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICBvKGEpO1xuICAgICAgfVxuICAgIH0sIG4pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgdygobikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyB3KChuLCByKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwcm9taXNlIGV4ZWN1dGlvbi5cbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnJlamVjdChuZXcgYihyZSkpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gRihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgbikge1xuICAgIHJldHVybiBGKHN1cGVyLnRoZW4odCwgbiksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBKKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVzb2x2ZSA9IHQucmVzb2x2ZSwgZTtcbn1cbmNsYXNzIFMgZXh0ZW5kcyB3IHtcbiAgY29uc3RydWN0b3IodCwgbikge1xuICAgIGxldCByLCBvO1xuICAgIHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IChyID0gdCwgbyA9IG4pIDogbyA9IHQ7XG4gICAgbGV0IHM7XG4gICAgc3VwZXIoKGEsIGksIGMpID0+IHtcbiAgICAgIHMgPSBhLCByICYmIHIoYSwgaSwgYyk7XG4gICAgfSwgbyksIGVlKHRoaXMsIFwicmVzb2x2ZVwiKSwgdGhpcy5yZXNvbHZlID0gcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBFbmhhbmNlZFByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBTKFxuICAgICAgKHIsIG8sIHMpID0+IHcud2l0aEZuKHQsIHsgYWJvcnRTaWduYWw6IHMgfSkudGhlbihyLCBvKSxcbiAgICAgIG5cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgUygobikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyBTKChuLCByKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gSihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgbikge1xuICAgIHJldHVybiBKKHN1cGVyLnRoZW4odCwgbiksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBhdChlLCB0KSB7XG4gIHJldHVybiBuZXcgdygobikgPT4ge1xuICAgIHNldFRpbWVvdXQobiwgZSk7XG4gIH0sIHsgYWJvcnRTaWduYWw6IHQgfSk7XG59XG5mdW5jdGlvbiBzZShlKSB7XG4gIHJldHVybiBgdGFwcHMvJHtlfWA7XG59XG5mdW5jdGlvbiBqZShlLCB0KSB7XG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2UoZSksIEpTT04uc3RyaW5naWZ5KHQpKTtcbn1cbmZ1bmN0aW9uIHhlKGUpIHtcbiAgY29uc3QgdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oc2UoZSkpO1xuICB0cnkge1xuICAgIHJldHVybiB0ID8gSlNPTi5wYXJzZSh0KSA6IHZvaWQgMDtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIGl0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGAtJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiBjdChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgXyR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gdXQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9fW2Etel0vZywgKHQpID0+IHRbMV0udG9VcHBlckNhc2UoKSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24ga2UoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCB7XG4gICAgdGV4dENvbG9yOiBuLFxuICAgIGJnQ29sb3I6IHIsXG4gICAgc2hvdWxkTG9nOiBvID0gITBcbiAgfSA9IHQ7XG4gIGZ1bmN0aW9uIHMoYSwgLi4uaSkge1xuICAgIGlmICghbyB8fCB0eXBlb2YgbyA9PSBcImZ1bmN0aW9uXCIgJiYgIW8oKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjID0gXCJmb250LXdlaWdodDpib2xkO3BhZGRpbmc6MCA1cHg7Ym9yZGVyLXJhZGl1czo1cHhcIjtcbiAgICBjb25zb2xlW2FdKFxuICAgICAgYCVjJHtJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tR0JcIiwge1xuICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogMyxcbiAgICAgICAgdGltZVpvbmU6IFwiVVRDXCJcbiAgICAgIH0pLmZvcm1hdCgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSl9JWMgLyAlYyR7ZX1gLFxuICAgICAgYCR7Y307YmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlO2NvbG9yOmJsYWNrYCxcbiAgICAgIFwiXCIsXG4gICAgICBgJHtjfTske24gPyBgY29sb3I6JHtufTtgIDogXCJcIn0ke3IgPyBgYmFja2dyb3VuZC1jb2xvcjoke3J9YCA6IFwiXCJ9YCxcbiAgICAgIC4uLmlcbiAgICApO1xuICB9XG4gIHJldHVybiBbXG4gICAgZnVuY3Rpb24oLi4uYSkge1xuICAgICAgcyhcImxvZ1wiLCAuLi5hKTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHMoXCJlcnJvclwiLCAuLi5hKTtcbiAgICB9XG4gIF07XG59XG5mdW5jdGlvbiBwdChlLCB0KSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShlLCB0KTtcbn1cbmZ1bmN0aW9uIGZ0KGUpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGUpO1xufVxuZnVuY3Rpb24gTGUoZSwgdCkge1xuICB0KCk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24geShlLCB0KSB7XG4gIHQgfHwgKHQgPSB7fSk7XG4gIGNvbnN0IG4gPSB0LmVxdWFscyB8fCBPYmplY3QuaXM7XG4gIGxldCByID0gW10sIG8gPSBlO1xuICBjb25zdCBzID0gKHUpID0+IHtcbiAgICBpZiAoIW4obywgdSkpIHtcbiAgICAgIGNvbnN0IGYgPSBvO1xuICAgICAgbyA9IHUsIExlKGMsICgpID0+IHtcbiAgICAgICAgWy4uLnJdLmZvckVhY2goKFtoLCBkXSkgPT4ge1xuICAgICAgICAgIGgodSwgZiksIGQgJiYgaShoLCAhMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICBjb25zdCBmID0gdHlwZW9mIHUgIT0gXCJvYmplY3RcIiA/IHsgb25jZTogdSB9IDogdTtcbiAgICByZXR1cm4ge1xuICAgICAgb25jZTogZi5vbmNlIHx8ICExLFxuICAgICAgc2lnbmFsOiBmLnNpZ25hbCB8fCAhMVxuICAgIH07XG4gIH1cbiAgY29uc3QgaSA9ICh1LCBmKSA9PiB7XG4gICAgY29uc3QgaCA9IGEoZiksIGQgPSByLmZpbmRJbmRleCgoW1QsIEFdKSA9PiBUID09PSB1ICYmIEEub25jZSA9PT0gaC5vbmNlICYmIEEuc2lnbmFsID09PSBoLnNpZ25hbCk7XG4gICAgZCA+PSAwICYmIHIuc3BsaWNlKGQsIDEpO1xuICB9LCBjID0gT2JqZWN0LmFzc2lnbihcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPZShjKSwgbztcbiAgICB9LFxuICAgIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHIgPSBbXTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IHMsXG4gICAgICByZXNldCgpIHtcbiAgICAgICAgcyhlKTtcbiAgICAgIH0sXG4gICAgICBzdWIodSwgZikge1xuICAgICAgICByZXR1cm4gci5wdXNoKFt1LCBhKGYpXSksICgpID0+IGkodSwgZik7XG4gICAgICB9LFxuICAgICAgdW5zdWI6IGksXG4gICAgICB1bnN1YkFsbCgpIHtcbiAgICAgICAgciA9IHIuZmlsdGVyKCh1KSA9PiB1WzFdLnNpZ25hbCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gYztcbn1cbmNvbnN0IFcgPSBbXTtcbmZ1bmN0aW9uIE9lKGUpIHtcbiAgVy5sZW5ndGggJiYgV1tXLmxlbmd0aCAtIDFdLmFkZChlKTtcbn1cbmNvbnN0IGFlID0gLyogQF9fUFVSRV9fICovIHkoITEpLCBbTywgSWVdID0gLyogQF9fUFVSRV9fICovIGtlKFwiQnJpZGdlXCIsIHtcbiAgYmdDb2xvcjogXCIjOTE0N2ZmXCIsXG4gIHRleHRDb2xvcjogXCJ3aGl0ZVwiLFxuICBzaG91bGRMb2c6IGFlXG59KSwgcWUgPSB7XG4gIGNsaXBib2FyZF90ZXh0X3JlY2VpdmVkOiBfKHtcbiAgICByZXFfaWQ6IGwoKSxcbiAgICBkYXRhOiAoZSkgPT4gZSA9PT0gbnVsbCA/IGUgOiBsKCEwKShlKVxuICB9LCBcImNsaXBib2FyZF90ZXh0X3JlY2VpdmVkXCIpLFxuICBjdXN0b21fbWV0aG9kX2ludm9rZWQ6IF8oe1xuICAgIHJlcV9pZDogbCgpLFxuICAgIHJlc3VsdDogKGUpID0+IGUsXG4gICAgZXJyb3I6IGwoITApXG4gIH0sIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIpLFxuICBwb3B1cF9jbG9zZWQ6IGcoXCJwb3B1cF9jbG9zZWRcIiwgKGUpID0+IGUgPyBfKHtcbiAgICBidXR0b25faWQ6ICh0KSA9PiB0ID09IG51bGwgPyB2b2lkIDAgOiBsKCkodClcbiAgfSkoKShlKSA6IHt9KSxcbiAgdmlld3BvcnRfY2hhbmdlZDogXyh7XG4gICAgaGVpZ2h0OiBQKCksXG4gICAgd2lkdGg6IChlKSA9PiBlID09IG51bGwgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IFAoKShlKSxcbiAgICBpc19zdGF0ZV9zdGFibGU6ICQoKSxcbiAgICBpc19leHBhbmRlZDogJCgpXG4gIH0sIFwidmlld3BvcnRfY2hhbmdlZFwiKVxufTtcbmZ1bmN0aW9uIE1lKGUpIHtcbiAgY29uc3QgdCA9IHdpbmRvdywgWywgbl0gPSBrKFxuICAgIC8vIEFkZCBsaXN0ZW5lciwgd2hpY2ggaGFuZGxlcyBldmVudHMgc2VudCBmcm9tIHRoZSBUZWxlZ3JhbSB3ZWIgYXBwbGljYXRpb24gYW5kIGFsc28gZXZlbnRzXG4gICAgLy8gZ2VuZXJhdGVkIGJ5IHRoZSBsb2NhbCBlbWl0RXZlbnQgZnVuY3Rpb24uXG4gICAgdGUodCwgXCJtZXNzYWdlXCIsIChyKSA9PiB7XG4gICAgICBpZiAoci5zb3VyY2UgIT09IHQucGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgbztcbiAgICAgIHRyeSB7XG4gICAgICAgIG8gPSBYKCkoci5kYXRhKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGV2ZW50VHlwZTogcywgZXZlbnREYXRhOiBhIH0gPSBvLCBpID0gcWVbc107XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjID0gaSA/IGkoKShhKSA6IGE7XG4gICAgICAgIE8oXCJFdmVudCByZWNlaXZlZDpcIiwgYyA/IHsgZXZlbnRUeXBlOiBzLCBldmVudERhdGE6IGMgfSA6IHsgZXZlbnRUeXBlOiBzIH0pLCBlKFtzLCBjXSk7XG4gICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgIEllKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIGBBbiBlcnJvciBvY2N1cnJlZCBwcm9jZXNzaW5nIHRoZSBcIiR7c31cIiBldmVudCBmcm9tIHRoZSBUZWxlZ3JhbSBhcHBsaWNhdGlvbi5gLFxuICAgICAgICAgICAgXCJQbGVhc2UsIGZpbGUgYW4gaXNzdWUgaGVyZTpcIixcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9naXRodWIuY29tL1RlbGVncmFtLU1pbmktQXBwcy90ZWxlZ3JhbS1hcHBzL2lzc3Vlcy9uZXcvY2hvb3NlXCJcbiAgICAgICAgICBdLmpvaW4oYFxuYCksXG4gICAgICAgICAgbyxcbiAgICAgICAgICBjXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIG47XG59XG5jb25zdCBDID0gLyogQF9fUFVSRV9fICovIHkoKSwgTiA9IC8qIEBfX1BVUkVfXyAqLyB5KCk7XG5mdW5jdGlvbiBpZSgpIHtcbiAgcmV0dXJuIE4oKSB8fCBOLnNldChNZShDLnNldCkpLCBDO1xufVxuY29uc3QgdiA9IC8qIEBfX1BVUkVfXyAqLyB5KHt9KTtcbmZ1bmN0aW9uIGNlKGUpIHtcbiAgbGV0IHQgPSB2KClbZV07XG4gIHJldHVybiB0IHx8ICh0ID0gLyogQF9fUFVSRV9fICovIHkodm9pZCAwLCB7XG4gICAgZXF1YWxzKCkge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSksIGllKCkuc3ViKChuKSA9PiB7XG4gICAgbiAmJiBuWzBdID09PSBlICYmIHQuc2V0KG5bMV0pO1xuICB9KSwgdi5zZXQoeyAuLi52KCksIFtlXTogdCB9KSksIHQ7XG59XG5mdW5jdGlvbiBGZShlLCB0LCBuKSB7XG4gIHJldHVybiBjZShlKS5zdWIodCwgbik7XG59XG5jb25zdCBKZSA9IFwiRVJSX01FVEhPRF9VTlNVUFBPUlRFRFwiLCBCZSA9IFwiRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRFwiLCBIZSA9IFwiRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURURcIiwgR2UgPSBcIkVSUl9VTktOT1dOX0VOVlwiLCBLZSA9IFwiRVJSX0lOVk9LRV9DVVNUT01fTUVUSE9EX1JFU1BPTlNFXCIsIHVlID0gLyogQF9fUFVSRV9fICovIHkoXCJodHRwczovL3dlYi50ZWxlZ3JhbS5vcmdcIik7XG5mdW5jdGlvbiBwZShlLCB0KSB7XG4gIE8oXCJQb3N0aW5nIGV2ZW50OlwiLCB0ID8geyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9IDogeyBldmVudFR5cGU6IGUgfSk7XG4gIGNvbnN0IG4gPSB3aW5kb3c7XG4gIGlmIChRKG4pKSB7XG4gICAgbi5UZWxlZ3JhbVdlYnZpZXdQcm94eS5wb3N0RXZlbnQoZSwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByID0gSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9KTtcbiAgaWYgKE5lKCkpXG4gICAgcmV0dXJuIG4ucGFyZW50LnBvc3RNZXNzYWdlKHIsIHVlKCkpO1xuICBjb25zdCB7IGV4dGVybmFsOiBvIH0gPSBuO1xuICBpZiAoXyh7IG5vdGlmeTogWSgpIH0pKCkuaXNWYWxpZChvKSkge1xuICAgIG8ubm90aWZ5KHIpO1xuICAgIHJldHVybjtcbiAgfVxuICB0aHJvdyBuZXcgYihHZSk7XG59XG5mdW5jdGlvbiBmZShlLCB0LCBuKSB7XG4gIG4gfHwgKG4gPSB7fSk7XG4gIGNvbnN0IHsgY2FwdHVyZTogciB9ID0gbiwgW28sIHNdID0gaygpO1xuICByZXR1cm4gbmV3IHcoKGEpID0+IHtcbiAgICAoQXJyYXkuaXNBcnJheSh0KSA/IHQgOiBbdF0pLmZvckVhY2goKGkpID0+IHtcbiAgICAgIG8oXG4gICAgICAgIEZlKGksIChjKSA9PiB7XG4gICAgICAgICAgKCFyIHx8IChBcnJheS5pc0FycmF5KHQpID8gcih7XG4gICAgICAgICAgICBldmVudDogaSxcbiAgICAgICAgICAgIHBheWxvYWQ6IGNcbiAgICAgICAgICB9KSA6IHIoYykpKSAmJiBhKGMpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KSwgKG4ucG9zdEV2ZW50IHx8IHBlKShlLCBuLnBhcmFtcyk7XG4gIH0sIG4pLmZpbmFsbHkocyk7XG59XG5mdW5jdGlvbiBJKGUpIHtcbiAgcmV0dXJuIEFlKCkoZSk7XG59XG5mdW5jdGlvbiBsZShlKSB7XG4gIHJldHVybiBJKFxuICAgIGUucmVwbGFjZSgvXltePyNdKls/I10vLCBcIlwiKS5yZXBsYWNlKC9bPyNdL2csIFwiJlwiKVxuICApO1xufVxuZnVuY3Rpb24gVmUoKSB7XG4gIHJldHVybiBsZSh3aW5kb3cubG9jYXRpb24uaHJlZik7XG59XG5mdW5jdGlvbiBaZSgpIHtcbiAgY29uc3QgZSA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpWzBdO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCBmaXJzdCBuYXZpZ2F0aW9uIGVudHJ5LlwiKTtcbiAgcmV0dXJuIGxlKGUubmFtZSk7XG59XG5jb25zdCB6ZSA9IFwibGF1bmNoUGFyYW1zXCI7XG5mdW5jdGlvbiBYZSgpIHtcbiAgcmV0dXJuIEkoeGUoemUpIHx8IFwiXCIpO1xufVxuZnVuY3Rpb24gX2UoZSkge1xuICBqZShcImxhdW5jaFBhcmFtc1wiLCAvKiBAX19QVVJFX18gKi8gU2UoZSkpO1xufVxuZnVuY3Rpb24gYmUoZSkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlICsgKGUuY2F1c2UgPyBgXG4gICR7YmUoZS5jYXVzZSl9YCA6IFwiXCIpIDogSlNPTi5zdHJpbmdpZnkoZSk7XG59XG5mdW5jdGlvbiBZZSgpIHtcbiAgY29uc3QgZSA9IFtdO1xuICBmb3IgKGNvbnN0IHQgb2YgW1xuICAgIC8vIFRyeSB0byByZXRyaWV2ZSBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uLiBUaGlzIG1ldGhvZCBjYW4gcmV0dXJuXG4gICAgLy8gbm90aGluZyBpbiBjYXNlLCBsb2NhdGlvbiB3YXMgY2hhbmdlZCwgYW5kIHRoZW4gdGhlIHBhZ2Ugd2FzIHJlbG9hZGVkLlxuICAgIFZlLFxuICAgIC8vIFRoZW4sIHRyeSB1c2luZyB0aGUgbG93ZXIgbGV2ZWwgQVBJIC0gd2luZG93LnBlcmZvcm1hbmNlLlxuICAgIFplLFxuICAgIC8vIEZpbmFsbHksIHRyeSB0byBleHRyYWN0IGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gdGhlIHNlc3Npb24gc3RvcmFnZS5cbiAgICBYZVxuICBdKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuID0gdCgpO1xuICAgICAgcmV0dXJuIF9lKG4pLCBuO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgIGUucHVzaChuKTtcbiAgICB9XG4gIHRocm93IG5ldyBiKEJlLCBbXG4gICAgXCJVbmFibGUgdG8gcmV0cmlldmUgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSBhbnkga25vd24gc291cmNlLiBQZXJoYXBzLCB5b3UgaGF2ZSBvcGVuZWQgeW91ciBhcHAgb3V0c2lkZSBUZWxlZ3JhbT9cIixcbiAgICBcIvCfk5YgUmVmZXIgdG8gZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbjpcIixcbiAgICBcImh0dHBzOi8vZG9jcy50ZWxlZ3JhbS1taW5pLWFwcHMuY29tL3BhY2thZ2VzL3RlbGVncmFtLWFwcHMtc2RrL2Vudmlyb25tZW50XCIsXG4gICAgXCJDb2xsZWN0ZWQgZXJyb3JzOlwiLFxuICAgIC4uLmUubWFwKCh0KSA9PiBg4oCUICR7YmUodCl9YClcbiAgXS5qb2luKGBcbmApKTtcbn1cbmZ1bmN0aW9uIGx0KGUpIHtcbiAgaWYgKGUgPT09IFwic2ltcGxlXCIpXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBZZSgpLCAhMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIHJldHVybiB3LndpdGhGbihhc3luYyAoKSA9PiB7XG4gICAgaWYgKFEod2luZG93KSlcbiAgICAgIHJldHVybiAhMDtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGZlKFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsIFwidGhlbWVfY2hhbmdlZFwiLCB7IHRpbWVvdXQ6IDEwMCB9KSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9LCBlKTtcbn1cbmZ1bmN0aW9uIHgoZSwgdCkge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgTWVzc2FnZUV2ZW50KFwibWVzc2FnZVwiLCB7XG4gICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9KSxcbiAgICAvLyBXZSBzcGVjaWZ5IHdpbmRvdy5wYXJlbnQgdG8gaW1pdGF0ZSB0aGUgY2FzZSwgdGhlIHBhcmVudCBpZnJhbWUgc2VudCB1cyB0aGlzIGV2ZW50LlxuICAgIHNvdXJjZTogd2luZG93LnBhcmVudFxuICB9KSk7XG59XG5mdW5jdGlvbiBRZShlLCB0KSB7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGV2ZW50VHlwZTogbiB9ID0gWCgpKHQpO1xuICAgICAgbiA9PT0gXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIiAmJiB4KFwidGhlbWVfY2hhbmdlZFwiLCB7XG4gICAgICAgIHRoZW1lX3BhcmFtczogSlNPTi5wYXJzZSgvKiBAX19QVVJFX18gKi8gaihlKSlcbiAgICAgIH0pLCBuID09PSBcIndlYl9hcHBfcmVxdWVzdF92aWV3cG9ydFwiICYmIHgoXCJ2aWV3cG9ydF9jaGFuZ2VkXCIsIHtcbiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgaXNfc3RhdGVfc3RhYmxlOiAhMCxcbiAgICAgICAgaXNfZXhwYW5kZWQ6ICEwXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG59XG5mdW5jdGlvbiBfdChlKSB7XG4gIHZhciByO1xuICBjb25zdCB0ID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IEkoZSkgOiBlO1xuICBfZSh0KTtcbiAgY29uc3QgbiA9IChyID0gd2luZG93LlRlbGVncmFtV2Vidmlld1Byb3h5KSA9PSBudWxsID8gdm9pZCAwIDogci5wb3N0RXZlbnQ7XG4gIHdpbmRvdy5UZWxlZ3JhbVdlYnZpZXdQcm94eSA9IHtcbiAgICBwb3N0RXZlbnQobywgcykge1xuICAgICAgUWUodC50aGVtZVBhcmFtcywgSlNPTi5zdHJpbmdpZnkoeyBldmVudFR5cGU6IG8sIGV2ZW50RGF0YTogcyB9KSksIG4gPT0gbnVsbCB8fCBuKG8sIHMpO1xuICAgIH1cbiAgfSwgTyhcIkVudmlyb25tZW50IHdhcyBtb2NrZWQgYnkgdGhlIG1vY2tUZWxlZ3JhbUVudiBmdW5jdGlvblwiKTtcbn1cbmZ1bmN0aW9uIGJ0KCkge1xuICBbXG4gICAgW1wiVGVsZWdyYW1HYW1lUHJveHlfcmVjZWl2ZUV2ZW50XCJdLFxuICAgIC8vIFdpbmRvd3MgUGhvbmUuXG4gICAgW1wiVGVsZWdyYW1HYW1lUHJveHlcIiwgXCJyZWNlaXZlRXZlbnRcIl0sXG4gICAgLy8gRGVza3RvcC5cbiAgICBbXCJUZWxlZ3JhbVwiLCBcIldlYlZpZXdcIiwgXCJyZWNlaXZlRXZlbnRcIl1cbiAgICAvLyBBbmRyb2lkIGFuZCBpT1MuXG4gIF0uZm9yRWFjaCgoZSkgPT4ge1xuICAgIGxldCB0ID0gd2luZG93O1xuICAgIGUuZm9yRWFjaCgobiwgciwgbykgPT4ge1xuICAgICAgaWYgKHIgPT09IG8ubGVuZ3RoIC0gMSkge1xuICAgICAgICB0W25dID0geDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbiBpbiB0IHx8ICh0W25dID0ge30pLCB0ID0gdFtuXTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBndCgpIHtcbiAgW1wiVGVsZWdyYW1HYW1lUHJveHlfcmVjZWl2ZUV2ZW50XCIsIFwiVGVsZWdyYW1HYW1lUHJveHlcIiwgXCJUZWxlZ3JhbVwiXS5mb3JFYWNoKChlKSA9PiB7XG4gICAgZGVsZXRlIHdpbmRvd1tlXTtcbiAgfSk7XG59XG5mdW5jdGlvbiB3dChlLCB0LCBuKSB7XG4gIGNlKGUpLnVuc3ViKHQsIG4pO1xufVxuZnVuY3Rpb24gaHQoZSwgdCkge1xuICByZXR1cm4gaWUoKS5zdWIoZSwgdCk7XG59XG5mdW5jdGlvbiBkdChlLCB0KSB7XG4gIEMudW5zdWIoZSwgdCk7XG59XG5mdW5jdGlvbiBldChlKSB7XG4gIHJldHVybiAoeyByZXFfaWQ6IHQgfSkgPT4gdCA9PT0gZTtcbn1cbmZ1bmN0aW9uIEIoZSkge1xuICByZXR1cm4gZS5zcGxpdChcIi5cIikubWFwKE51bWJlcik7XG59XG5mdW5jdGlvbiB0dChlLCB0KSB7XG4gIGNvbnN0IG4gPSBCKGUpLCByID0gQih0KSwgbyA9IE1hdGgubWF4KG4ubGVuZ3RoLCByLmxlbmd0aCk7XG4gIGZvciAobGV0IHMgPSAwOyBzIDwgbzsgcyArPSAxKSB7XG4gICAgY29uc3QgYSA9IG5bc10gfHwgMCwgaSA9IHJbc10gfHwgMDtcbiAgICBpZiAoYSAhPT0gaSlcbiAgICAgIHJldHVybiBhID4gaSA/IDEgOiAtMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIHAoZSwgdCkge1xuICByZXR1cm4gdHQoZSwgdCkgPD0gMDtcbn1cbmZ1bmN0aW9uIEgoZSwgdCwgbikge1xuICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfb3Blbl9saW5rXCIpIHtcbiAgICAgIGlmICh0ID09PSBcInRyeV9pbnN0YW50X3ZpZXdcIilcbiAgICAgICAgcmV0dXJuIHAoXCI2LjRcIiwgbik7XG4gICAgICBpZiAodCA9PT0gXCJ0cnlfYnJvd3NlclwiKVxuICAgICAgICByZXR1cm4gcChcIjcuNlwiLCBuKTtcbiAgICB9XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCIgJiYgdCA9PT0gXCJjb2xvclwiKVxuICAgICAgcmV0dXJuIHAoXCI2LjlcIiwgbik7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9jbG9zZVwiICYmIHQgPT09IFwicmV0dXJuX2JhY2tcIilcbiAgICAgIHJldHVybiBwKFwiNy42XCIsIG4pO1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfc2V0dXBfbWFpbl9idXR0b25cIiAmJiB0ID09PSBcImhhc19zaGluZV9lZmZlY3RcIilcbiAgICAgIHJldHVybiBwKFwiNy4xMFwiLCBuKTtcbiAgfVxuICBzd2l0Y2ggKGUpIHtcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3RnX2xpbmtcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX2ludm9pY2VcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9iYWNrX2J1dHRvblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9iYWNrZ3JvdW5kX2NvbG9yXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3RyaWdnZXJfaGFwdGljX2ZlZWRiYWNrXCI6XG4gICAgICByZXR1cm4gcChcIjYuMVwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3BvcHVwXCI6XG4gICAgICByZXR1cm4gcChcIjYuMlwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9jbG9zZV9zY2FuX3FyX3BvcHVwXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9zY2FuX3FyX3BvcHVwXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVhZF90ZXh0X2Zyb21fY2xpcGJvYXJkXCI6XG4gICAgICByZXR1cm4gcChcIjYuNFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zd2l0Y2hfaW5saW5lX3F1ZXJ5XCI6XG4gICAgICByZXR1cm4gcChcIjYuN1wiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9pbnZva2VfY3VzdG9tX21ldGhvZFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3Rfd3JpdGVfYWNjZXNzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9waG9uZVwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjlcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc2V0dGluZ3NfYnV0dG9uXCI6XG4gICAgICByZXR1cm4gcChcIjYuMTBcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfZ2V0X2luZm9cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9vcGVuX3NldHRpbmdzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfcmVxdWVzdF9hY2Nlc3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9yZXF1ZXN0X2F1dGhcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV91cGRhdGVfdG9rZW5cIjpcbiAgICAgIHJldHVybiBwKFwiNy4yXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3N3aXBlX2JlaGF2aW9yXCI6XG4gICAgICByZXR1cm4gcChcIjcuN1wiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zaGFyZV90b19zdG9yeVwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjhcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc2Vjb25kYXJ5X2J1dHRvblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9ib3R0b21fYmFyX2NvbG9yXCI6XG4gICAgICByZXR1cm4gcChcIjcuMTBcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9mdWxsc2NyZWVuXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfZXhpdF9mdWxsc2NyZWVuXCI6XG4gICAgICByZXR1cm4gcChcIjguMFwiLCB0KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgXCJpZnJhbWVfcmVhZHlcIixcbiAgICAgICAgXCJpZnJhbWVfd2lsbF9yZWxvYWRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2Nsb3NlXCIsXG4gICAgICAgIFwid2ViX2FwcF9kYXRhX3NlbmRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2V4cGFuZFwiLFxuICAgICAgICBcIndlYl9hcHBfb3Blbl9saW5rXCIsXG4gICAgICAgIFwid2ViX2FwcF9yZWFkeVwiLFxuICAgICAgICBcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiLFxuICAgICAgICBcIndlYl9hcHBfcmVxdWVzdF92aWV3cG9ydFwiLFxuICAgICAgICBcIndlYl9hcHBfc2V0dXBfbWFpbl9idXR0b25cIixcbiAgICAgICAgXCJ3ZWJfYXBwX3NldHVwX2Nsb3NpbmdfYmVoYXZpb3JcIlxuICAgICAgXS5pbmNsdWRlcyhlKTtcbiAgfVxufVxuZnVuY3Rpb24gbXQoZSwgdCkge1xuICB0IHx8ICh0ID0gXCJzdHJpY3RcIik7XG4gIGNvbnN0IG4gPSB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyB0IDogKHIpID0+IHtcbiAgICBjb25zdCB7IG1ldGhvZDogbywgdmVyc2lvbjogcyB9ID0gcjtcbiAgICBsZXQgYSwgaTtcbiAgICBpZiAoXCJwYXJhbVwiIGluIHIgPyAoYSA9IGBQYXJhbWV0ZXIgXCIke3IucGFyYW19XCIgb2YgXCIke299XCIgbWV0aG9kIGlzIHVuc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7c31gLCBpID0gSGUpIDogKGEgPSBgTWV0aG9kIFwiJHtvfVwiIGlzIHVuc3VwcG9ydGVkIGluIE1pbmkgQXBwcyB2ZXJzaW9uICR7c31gLCBpID0gSmUpLCB0ID09PSBcInN0cmljdFwiKVxuICAgICAgdGhyb3cgbmV3IGIoaSwgYSk7XG4gICAgcmV0dXJuIGNvbnNvbGUud2FybihhKTtcbiAgfTtcbiAgcmV0dXJuIChyLCBvKSA9PiBIKHIsIGUpID8gJGUobykgJiYgciA9PT0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiAmJiBcImNvbG9yXCIgaW4gbyAmJiAhSChyLCBcImNvbG9yXCIsIGUpID8gbih7IHZlcnNpb246IGUsIG1ldGhvZDogciwgcGFyYW06IFwiY29sb3JcIiB9KSA6IHBlKHIsIG8pIDogbih7IHZlcnNpb246IGUsIG1ldGhvZDogciB9KTtcbn1cbmZ1bmN0aW9uIEV0KGUsIHQsIG4sIHIpIHtcbiAgcmV0dXJuIGZlKFwid2ViX2FwcF9pbnZva2VfY3VzdG9tX21ldGhvZFwiLCBcImN1c3RvbV9tZXRob2RfaW52b2tlZFwiLCB7XG4gICAgLi4uciB8fCB7fSxcbiAgICBwYXJhbXM6IHsgbWV0aG9kOiBlLCBwYXJhbXM6IHQsIHJlcV9pZDogbiB9LFxuICAgIGNhcHR1cmU6IGV0KG4pXG4gIH0pLnRoZW4oKHsgcmVzdWx0OiBvLCBlcnJvcjogcyB9KSA9PiB7XG4gICAgaWYgKHMpXG4gICAgICB0aHJvdyBuZXcgYihLZSwgcyk7XG4gICAgcmV0dXJuIG87XG4gIH0pO1xufVxuZnVuY3Rpb24gbnQoZSkge1xuICBlLnVuc3ViQWxsKCksIGUucmVzZXQoKTtcbn1cbmZ1bmN0aW9uIHl0KCkge1xuICB2YXIgZTtcbiAgKGUgPSBOKCkpID09IG51bGwgfHwgZSgpLCBbXG4gICAgLi4uT2JqZWN0LnZhbHVlcyh2KCkpLFxuICAgIHYsXG4gICAgQyxcbiAgICBOLFxuICAgIHVlLFxuICAgIGFlXG4gIF0uZm9yRWFjaChudCk7XG59XG5leHBvcnQge1xuICBhZSBhcyAkZGVidWcsXG4gIHVlIGFzICR0YXJnZXRPcmlnaW4sXG4gIHcgYXMgQ2FuY2VsYWJsZVByb21pc2UsXG4gIG5lIGFzIEVSUl9BQk9SVEVELFxuICByZSBhcyBFUlJfQ0FOQ0VMRUQsXG4gIEtlIGFzIEVSUl9DVVNUT01fTUVUSE9EX0VSUl9SRVNQT05TRSxcbiAgSGUgYXMgRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURUQsXG4gIEplIGFzIEVSUl9NRVRIT0RfVU5TVVBQT1JURUQsXG4gIEJlIGFzIEVSUl9SRVRSSUVWRV9MUF9GQUlMRUQsXG4gIG9lIGFzIEVSUl9USU1FRF9PVVQsXG4gIEdlIGFzIEVSUl9VTktOT1dOX0VOVixcbiAgUyBhcyBFbmhhbmNlZFByb21pc2UsXG4gIGIgYXMgVHlwZWRFcnJvcixcbiAgdGUgYXMgYWRkRXZlbnRMaXN0ZW5lcixcbiAgaXQgYXMgY2FtZWxUb0tlYmFiLFxuICBjdCBhcyBjYW1lbFRvU25ha2UsXG4gIGV0IGFzIGNhcHR1cmVTYW1lUmVxLFxuICB0dCBhcyBjb21wYXJlVmVyc2lvbnMsXG4gIE0gYXMgY3JlYXRlQWJvcnRFcnJvcixcbiAgayBhcyBjcmVhdGVDYkNvbGxlY3RvcixcbiAga2UgYXMgY3JlYXRlTG9nZ2VyLFxuICBtdCBhcyBjcmVhdGVQb3N0RXZlbnQsXG4gIEwgYXMgY3JlYXRlVHlwZWRFcnJvclByZWRpY2F0ZSxcbiAgYnQgYXMgZGVmaW5lRXZlbnRIYW5kbGVycyxcbiAgZnQgYXMgZGVsZXRlQ3NzVmFyLFxuICB4IGFzIGVtaXRNaW5pQXBwc0V2ZW50LFxuICB4ZSBhcyBnZXRTdG9yYWdlVmFsdWUsXG4gIFEgYXMgaGFzV2Vidmlld1Byb3h5LFxuICBFdCBhcyBpbnZva2VDdXN0b21NZXRob2QsXG4gIG90IGFzIGlzQWJvcnRFcnJvcixcbiAgc3QgYXMgaXNDYW5jZWxlZEVycm9yLFxuICBOZSBhcyBpc0lmcmFtZSxcbiAgbHQgYXMgaXNUTUEsXG4gIHJ0IGFzIGlzVGltZW91dEVycm9yLFxuICBfdCBhcyBtb2NrVGVsZWdyYW1FbnYsXG4gIHd0IGFzIG9mZixcbiAgRmUgYXMgb24sXG4gIHBlIGFzIHBvc3RFdmVudCxcbiAgZ3QgYXMgcmVtb3ZlRXZlbnRIYW5kbGVycyxcbiAgZmUgYXMgcmVxdWVzdCxcbiAgeXQgYXMgcmVzZXRQYWNrYWdlU3RhdGUsXG4gIFllIGFzIHJldHJpZXZlTGF1bmNoUGFyYW1zLFxuICBwdCBhcyBzZXRDc3NWYXIsXG4gIGplIGFzIHNldFN0b3JhZ2VWYWx1ZSxcbiAgYXQgYXMgc2xlZXAsXG4gIHV0IGFzIHNuYWtlVG9DYW1lbCxcbiAgaHQgYXMgc3Vic2NyaWJlLFxuICBIIGFzIHN1cHBvcnRzLFxuICBkdCBhcyB1bnN1YnNjcmliZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@telegram-apps+bridge@1.5.0/node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ })

};
;